(this["webpackJsonpplazon-app"]=this["webpackJsonpplazon-app"]||[]).push([[3],{237:function(e,a,t){"use strict";var r=t(31);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t(0)),i=(0,r(t(35)).default)(n.default.createElement("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2V4zm6 9l-4 5h12l-3-4-2.03 2.71L10 13zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5zM20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2zm0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2v7zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4v-7z"}),"Wallpaper");a.default=i},238:function(e,a,t){"use strict";t.r(a);var r=t(11),n=t(7),i=t(8),s=t(10),o=t(9),l=t(14),c=t(0),p=t.n(c),d=t(24),u=t(6),m=t(83),f=t(233),h=t(229),g=t(65),v=t(237),b=t.n(v),D=t(104),E=t(66),x=t(18),k=t(21),_=t(45),y=t(23),j=t(234),I=t(40),O=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(e){var i;return Object(n.a)(this,t),(i=a.call(this,e)).errorHandler=function(e){try{i.setState({loading:!1,serverInfo:[],serverErrors:e.response.data.errors.map((function(e){return e.msg}))})}catch(a){i.setState({loading:!1,serverInfo:[],serverErrors:["Server error"]})}},i.inputChangedHandler=function(e,a){var t=Object(l.a)({},e,{value:a.target.value,error:"description"===e?null:Object(y.d)(a.target.value,e)});i.setState({formData:Object(r.a)(Object(r.a)({},i.state.formData),t)})},i.fileSelectedHandler=function(e,a){try{var t=a.target.files[0].name.split(".");if(t=t[t.length-1],!["png","jpeg","jpg"].includes(t))return;var n=Object(r.a)(Object(r.a)({},i.state.formData),{},Object(l.a)({},e,{address:URL.createObjectURL(a.target.files[0]),file:a.target.files[0],filename:a.target.files[0].name.slice(0,30)}));i.setState({formData:n})}catch(s){}},i.submitHandler=function(){var e=new FormData;for(var a in i.state.formData)if("profile_pic"===a||"banner_pic"===a){if(!i.state.formData[a].file)continue;e.append(a,i.state.formData[a].file)}else if(e.append(a,i.state.formData[a].value),i.state.formData[a].error)return;i.setState({loading:!0}),x.a.post("/users/".concat(i.props.userId,"/edit"),e,{headers:{Authorization:"Bearer ".concat(i.props.token)}}).then((function(e){i.user={name:e.data.updatedUserFields.name,username:e.data.updatedUserFields.username,description:e.data.updatedUserFields.description};var a=Object(r.a)({},i.state.formData);["profile_pic","banner_pic"].forEach((function(t){e.data.updatedUserFields[t]&&(a[t]={address:null,file:null,filename:null})}));var t=[];e.data.errors&&(t=e.data.errors.map((function(e){return Object(u.a)(e.msg)})));var n=[];for(var s in e.data.updatedUserFields)"profile_pic"===s&&(s="profile picture"),"banner_pic"===s&&(s="banner picture"),n.push(Object(u.a)(s)+" has been updated");i.props.updatePictures(e.data.updatedUserFields.profile_pic,e.data.updatedUserFields.banner_pic),i.setState({loading:!1,formData:a,serverErrors:t,serverInfo:n})})).catch((function(e){i.errorHandler(e)}))},i.user={},i.state={formData:{name:{value:"",error:null},username:{value:"",error:null},description:{value:"",error:null},profile_pic:{address:null,file:null,filename:null},banner_pic:{address:null,file:null,filename:null}},serverErrors:[],serverInfo:[],loading:!0},i}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.a.get("/users/"+this.props.userId).then((function(a){var t={};for(var n in e.state.formData){if("profile_pic"===n)break;t[n]={value:a.data.user[n],error:!1}}e.user={name:a.data.user.name,username:a.data.user.username,description:a.data.user.description},e.setState({loading:!1,formData:Object(r.a)(Object(r.a)({},e.state.formData),t)})})).catch((function(a){e.errorHandler(a)}))}},{key:"render",value:function(){var e=this,a=this.props.classes;return p.a.createElement("div",{className:a.accountSettings},p.a.createElement(E.a,{variant:"h5"},"Edit Profile"),p.a.createElement("div",{className:a.container},p.a.createElement("div",{className:a.wrapper},["profile_pic","banner_pic"].map((function(a){return p.a.createElement("input",{key:a,style:{display:"none"},type:"file",onChange:e.fileSelectedHandler.bind(e,a),ref:function(t){return e[a]=t}})})),p.a.createElement(g.a,{backgroundUrl:this.state.formData.banner_pic.address||this.props.banner_pic},p.a.createElement("div",{className:a.changeCover,onClick:function(){return e.banner_pic.click()}},p.a.createElement(b.a,{className:a.coverIcon}),p.a.createElement("p",null,this.state.formData.banner_pic.filename||"Change Cover Photo"),p.a.createElement("p",null,this.state.formData.banner_pic.file?"Click save to upload changes":"1200px X 400px"))),p.a.createElement("div",{className:a.userInfo},p.a.createElement("div",{className:a.profilePhoto,onClick:function(){return e.profile_pic.click()}},p.a.createElement("img",{className:a.image,src:this.state.formData.profile_pic.address||this.props.profile_pic,alt:""}),p.a.createElement("p",{className:a.changePic},this.state.formData.profile_pic.filename||"Change Profile Photo"),p.a.createElement("p",{className:a.resolution},this.state.formData.profile_pic.file?"Click save to upload changes":"200px X 200px")),p.a.createElement("div",{className:a.profileForm},p.a.createElement("div",{className:a.data},p.a.createElement("p",null,this.user.name),p.a.createElement("p",null,"@"+this.user.username),p.a.createElement(m.a,null,this.user.description)),p.a.createElement("div",{className:a.inlineInputs},p.a.createElement(f.a,{disabled:this.state.loading,error:!!this.state.formData.name.error,helperText:this.state.formData.name.error,onChange:this.inputChangedHandler.bind(this,"name"),InputLabelProps:{shrink:!0},inputProps:{maxLength:50},className:a.firstInput,fullWidth:!0,label:"Name",value:this.state.formData.name.value}),p.a.createElement(f.a,{disabled:this.state.loading,error:!!this.state.formData.username.error,helperText:this.state.formData.username.error,onChange:this.inputChangedHandler.bind(this,"username"),InputLabelProps:{shrink:!0},inputProps:{maxLength:50},fullWidth:!0,label:"Username",value:this.state.formData.username.value})),p.a.createElement(f.a,{disabled:this.state.loading,onChange:this.inputChangedHandler.bind(this,"description"),inputProps:{maxLength:200},InputLabelProps:{shrink:!0},value:this.state.formData.description.value,fullWidth:!0,className:a.textArea,id:"standard-multiline-static",label:"Describe yourself...",multiline:!0,rows:5}),p.a.createElement(D.a,{mainButtonDisabled:this.state.loading,mainButtonClicked:this.submitHandler,mainButtonColor:"secondary",mainButtonText:"Save",message:(this.state.formData.description.value?this.state.formData.description.value.length:0)+"/200"}),this.state.loading&&p.a.createElement(h.a,{style:{marginTop:8}}),this.state.serverErrors.map((function(e){return p.a.createElement(j.a,{key:e,style:{marginTop:8},severity:"error"},e)})),this.state.serverInfo.map((function(e){return p.a.createElement(j.a,{key:e,style:{marginTop:8},severity:"success"},e)})))))))}}]),t}(c.Component);a.default=Object(k.b)((function(e){return{token:e.auth.token,userId:e.auth.currentUser._id,profile_pic:e.auth.currentUser.profile_pic,banner_pic:e.auth.currentUser.banner_pic}}),(function(e){return{updatePictures:function(a,t){return e(_.e(a,t))}}}))(Object(I.a)(O,(function(e){var a;return a={accountSettings:{borderRadius:16,overflow:"hidden",marginBottom:e.spacing(3),marginTop:e.spacing(3)},container:{backgroundColor:e.palette.background.front,padding:e.spacing(3)},wrapper:{border:"1px solid "+e.palette.text.secondary,borderRadius:10,overflow:"hidden"},userInfo:{display:"flex",alignItems:"flex-start",padding:"0 "+e.spacing(3)+"px",paddingBottom:e.spacing(3)},image:{height:70,width:70,borderRadius:"50%",marginBottom:e.spacing(1)},textArea:{display:"block",marginBottom:e.spacing(1.5)},data:{marginBottom:e.spacing(2),"& p":{wordBreak:"break-word",fontSize:"1.1em",margin:"0.3em 0",color:e.palette.text.secondary},"& p:first-child":{fontSize:"1.5em"}},profilePhoto:{position:"relative",top:-30,display:"flex",flexDirection:"column",alignItems:"center",marginRight:e.spacing(3),width:100,textAlign:"center",cursor:"pointer"},resolution:{color:Object(d.b)(e.palette.text.primary,.6),fontSize:"0.9rem",margin:"0.3em 0"},changePic:{margin:"0.3em 0","&:hover":{color:Object(d.b)(e.palette.text.primary,.8)}},profileForm:{flexGrow:1},inlineInputs:{display:"flex",marginBottom:e.spacing(1)},firstInput:{marginRight:e.spacing(1.5)},changeCover:{borderRadius:10,display:"flex",flexDirection:"column",backgroundColor:"rgba(0,0,0,0.5)",alignItems:"center",padding:e.spacing(3),color:"white","& p":{margin:"0.3em"},"& p:last-child":{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem"},"&:hover":{cursor:"pointer",color:"#cccccc"}},coverIcon:{height:80,width:80,marginBottom:e.spacing(1.5)}},Object(l.a)(a,e.breakpoints.down("xs"),{userInfo:{flexDirection:"column",alignItems:"center"},data:{textAlign:"center","& p":{fontSize:"1.1em"},"& p:last-child":{fontSize:"1em"}},profilePhoto:{marginTop:e.spacing(1),marginRight:0,top:0},changeCover:{flexDirection:"row",padding:e.spacing(1),"& p , p:last-child":{fontSize:"0.8em"}},coverIcon:{marginBottom:0}}),Object(l.a)(a,e.breakpoints.down("sm"),{coverIcon:{height:40,width:40}}),a}),x.a))}}]);
//# sourceMappingURL=3.7419acb7.chunk.js.map