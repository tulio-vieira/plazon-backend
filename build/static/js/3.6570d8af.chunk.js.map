{"version":3,"sources":["../node_modules/@material-ui/icons/Wallpaper.js","containers/AccountSettings.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","d","AccountSettings","props","errorHandler","err","setState","loading","serverInfo","serverErrors","response","data","errors","map","error","msg","inputChangedHandler","key","event","newFormData","target","checkValidity","formData","state","fileSelectedHandler","pic_field","ext","files","name","split","length","includes","address","URL","createObjectURL","file","filename","slice","submitHandler","fd","FormData","append","axios","post","userId","headers","Authorization","token","then","res","user","updatedUserFields","username","description","updatedFormData","forEach","field","capitalize","info","push","updatePictures","profile_pic","banner_pic","catch","get","this","classes","className","accountSettings","variant","container","wrapper","style","display","type","onChange","bind","ref","fileInput","backgroundUrl","changeCover","onClick","click","coverIcon","userInfo","profilePhoto","image","src","alt","changePic","resolution","profileForm","inlineInputs","disabled","helperText","InputLabelProps","shrink","inputProps","maxLength","firstInput","fullWidth","label","textArea","id","multiline","rows","mainButtonDisabled","mainButtonClicked","mainButtonColor","mainButtonText","message","marginTop","errMessage","severity","infoMessage","Component","connect","auth","currentUser","_id","dispatch","actions","withErrorHandler","theme","borderRadius","overflow","marginBottom","spacing","backgroundColor","palette","background","front","padding","border","text","secondary","alignItems","paddingBottom","height","width","wordBreak","fontSize","margin","color","position","top","flexDirection","marginRight","textAlign","cursor","fade","primary","flexGrow","breakpoints","down"],"mappings":"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","file":"static/js/3.6570d8af.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2V4zm6 9l-4 5h12l-3-4-2.03 2.71L10 13zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5zM20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2zm0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2v7zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4v-7z\"\n}), 'Wallpaper');\n\nexports.default = _default;","import React, { Component } from 'react';\r\nimport { capitalize, fade, LinearProgress, TextField, Typography } from '@material-ui/core';\r\nimport CoverPhoto from '../components/CoverPhoto';\r\nimport WallpaperIcon from '@material-ui/icons/Wallpaper';\r\nimport BottomOptions from '../components/BottomOptions';\r\nimport Heading from '../components/UI/Heading';\r\nimport axios from '../axios-instance';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../store/actions/index'\r\nimport { checkValidity } from '../shared/utility';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport withErrorHandler from '../hoc/withErrorHandler';\r\n\r\nconst styles = (theme) => ({\r\n  accountSettings: {\r\n    borderRadius: 16,\r\n    overflow: 'hidden',\r\n    marginBottom: theme.spacing(3),\r\n    marginTop: theme.spacing(3)\r\n  },\r\n  container: {\r\n    backgroundColor: theme.palette.background.front,\r\n    padding: theme.spacing(3),\r\n  },\r\n  wrapper: {\r\n    border: '1px solid ' + theme.palette.text.secondary,\r\n    borderRadius: 10,\r\n    overflow: 'hidden',\r\n  },\r\n  userInfo: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    padding: '0 ' + theme.spacing(3) + 'px',\r\n    paddingBottom: theme.spacing(3)\r\n  },\r\n  image: {\r\n    height: 70,\r\n    width: 70,\r\n    borderRadius: '50%',\r\n    marginBottom: theme.spacing(1)\r\n  },\r\n  textArea: {\r\n    display: 'block',\r\n    marginBottom: theme.spacing(1.5),\r\n  },\r\n  data: {\r\n    marginBottom: theme.spacing(2),\r\n    '& p': {\r\n      wordBreak: 'break-word',\r\n      fontSize: '1.1em',\r\n      margin: '0.3em 0',\r\n      color: theme.palette.text.secondary\r\n    },\r\n    '& p:first-child': {\r\n      fontSize: '1.5em'\r\n    }\r\n  },\r\n  profilePhoto: {\r\n    position: 'relative',\r\n    top: -30,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    marginRight: theme.spacing(3),\r\n    width: 100,\r\n    textAlign: 'center',\r\n    cursor: 'pointer'\r\n  },\r\n  resolution: {\r\n    color: fade(theme.palette.text.primary, 0.6),\r\n    fontSize: '0.9rem',\r\n    margin: '0.3em 0'\r\n  },\r\n  changePic: {\r\n    margin: '0.3em 0',\r\n    '&:hover': {\r\n      color: fade(theme.palette.text.primary, 0.8)\r\n    }\r\n  },\r\n  profileForm: {\r\n    flexGrow: 1\r\n  },\r\n  inlineInputs: {\r\n    display: 'flex',\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  firstInput: {\r\n    marginRight: theme.spacing(1.5)\r\n  },\r\n  changeCover: {\r\n    borderRadius: 10,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    backgroundColor: 'rgba(0,0,0,0.5)',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(3),\r\n    color: 'white',\r\n    '& p': {\r\n      margin: '0.3em'\r\n    },\r\n    '& p:last-child': {\r\n      color: 'rgba(255,255,255,0.6)',\r\n      fontSize: '0.9rem',\r\n    },\r\n    '&:hover': {\r\n      cursor: 'pointer',\r\n      color: '#cccccc'\r\n    }\r\n  },\r\n  coverIcon: {\r\n    height: 80,\r\n    width: 80,\r\n    marginBottom: theme.spacing(1.5)\r\n  },\r\n  [theme.breakpoints.down('xs')]: {\r\n    userInfo: {\r\n      flexDirection: 'column',\r\n      alignItems: 'center'\r\n    },\r\n    data: {\r\n      textAlign: 'center',\r\n      '& p': {\r\n        fontSize: '1.1em'\r\n      },\r\n      '& p:last-child': {\r\n        fontSize: '1em',\r\n      },\r\n    },\r\n    profilePhoto: {\r\n      marginTop: theme.spacing(1),\r\n      marginRight: 0,\r\n      top: 0\r\n    },\r\n    changeCover: {\r\n      flexDirection: 'row',\r\n      padding: theme.spacing(1),\r\n      '& p , p:last-child': {\r\n        fontSize: '0.8em',\r\n      }\r\n    },\r\n    coverIcon: {\r\n      marginBottom: 0\r\n    },\r\n  },\r\n  [theme.breakpoints.down('sm')]: {\r\n    coverIcon: {\r\n      height: 40,\r\n      width: 40,\r\n    },\r\n  }\r\n});\r\n\r\nclass AccountSettings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.user = {};\r\n    this.state = {\r\n      formData: {\r\n        name: {\r\n          value: '',\r\n          error: null\r\n        },\r\n        username: {\r\n          value: '',\r\n          error: null\r\n        },\r\n        description: {\r\n          value: '',\r\n          error: null\r\n        },\r\n        profile_pic: {\r\n          address: null,\r\n          file: null,\r\n          filename: null,\r\n        },\r\n        banner_pic: {\r\n          address: null,\r\n          file: null,\r\n          filename: null,\r\n        }\r\n      },\r\n      serverErrors: [],\r\n      serverInfo: [],\r\n      loading: true\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get('/users/' + this.props.userId)\r\n    .then(res => {\r\n      let newFormData = {};\r\n      for (let key in this.state.formData) {\r\n        if(key === 'profile_pic') break;\r\n        newFormData[key] = {value: res.data.user[key], error: false} \r\n      }\r\n      this.user = {name: res.data.user.name, username: res.data.user.username, description: res.data.user.description}\r\n      this.setState({loading: false, formData: {...this.state.formData, ...newFormData}});\r\n    })\r\n    .catch(err => {\r\n      this.errorHandler(err);\r\n    });\r\n  }\r\n\r\n  errorHandler = (err) => {\r\n    try {\r\n      this.setState({loading: false, serverInfo: [], serverErrors: err.response.data.errors.map(error => error.msg)});\r\n    } catch {\r\n      this.setState({loading: false, serverInfo: [], serverErrors: ['Server error']});\r\n    }\r\n  }\r\n\r\n  inputChangedHandler = (key, event) => {\r\n    const newFormData = {[key]: {\r\n      value: event.target.value,\r\n      error: key === 'description' ? null : checkValidity(event.target.value, key)\r\n    }};\r\n    this.setState({formData: {...this.state.formData, ...newFormData}})\r\n  }\r\n\r\n  fileSelectedHandler = (pic_field, event) => {\r\n    try {\r\n      let ext = event.target.files[0].name.split('.');\r\n      ext = ext[ext.length - 1];\r\n      if (!['png', 'jpeg', 'jpg'].includes(ext)) return;\r\n      const newFormData = {...this.state.formData, [pic_field]: {\r\n        address: URL.createObjectURL(event.target.files[0]),\r\n        file: event.target.files[0],\r\n        filename: event.target.files[0].name.slice(0,30)\r\n      }};\r\n      this.setState({formData: newFormData});\r\n    } catch {}\r\n  }\r\n\r\n  submitHandler = () => {\r\n    let fd = new FormData();\r\n    for (let key in this.state.formData) {\r\n      if (key === 'profile_pic' || key ==='banner_pic') {\r\n        if (!this.state.formData[key].file) continue;\r\n        fd.append(key, this.state.formData[key].file);\r\n      } else {\r\n        fd.append(key, this.state.formData[key].value);\r\n        if (this.state.formData[key].error) return;\r\n      }\r\n    }\r\n\r\n    this.setState({loading: true});\r\n    axios.post(\r\n      `/users/${this.props.userId}/edit`,\r\n      fd,\r\n      {headers: { Authorization: `Bearer ${this.props.token}` }}\r\n    ).then(res => {\r\n      // update refs to username, name and description\r\n      this.user = {name: res.data.updatedUserFields.name, username: res.data.updatedUserFields.username, description: res.data.updatedUserFields.description};\r\n      // reset files that were successfully uploaded\r\n      // Setting them to null will mean that the new links from the redux state are rendered\r\n      let updatedFormData = {...this.state.formData};\r\n      ['profile_pic', 'banner_pic'].forEach(field => {\r\n        if (res.data.updatedUserFields[field]) {\r\n          updatedFormData[field] = {\r\n            address: null,\r\n            file: null,\r\n            filename: null,\r\n          };\r\n        }\r\n      });\r\n      // update server errors\r\n      let errors = [];\r\n      if (res.data.errors) errors = res.data.errors.map(err => capitalize(err.msg));\r\n      // update Server info messages\r\n      let info = [];\r\n      for (let key in res.data.updatedUserFields) {\r\n        if (key === 'profile_pic') key = 'profile picture';\r\n        if (key === 'banner_pic') key = 'banner picture';\r\n        info.push(capitalize(key) + ' has been updated')\r\n      }\r\n      // update redux state of pictures, since pictures are used in other parts of the app\r\n      this.props.updatePictures(res.data.updatedUserFields.profile_pic, res.data.updatedUserFields.banner_pic);\r\n      // set state updates and loading to false\r\n      this.setState({loading: false, formData: updatedFormData, serverErrors: errors, serverInfo: info});\r\n    })\r\n    .catch(err => {\r\n      this.errorHandler(err);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const classes = this.props.classes;\r\n    return (\r\n      <div className={classes.accountSettings}>\r\n        <Heading variant='h5'>Edit Profile</Heading>\r\n        <div className={classes.container}>\r\n          <div className={classes.wrapper}>\r\n\r\n            {['profile_pic', 'banner_pic'].map(key => \r\n              <input\r\n                key={key}\r\n                style={{display: 'none'}}\r\n                type='file'\r\n                onChange={this.fileSelectedHandler.bind(this, key)}\r\n                ref={fileInput => this[key] = fileInput}/>\r\n            )}\r\n\r\n            <CoverPhoto backgroundUrl={this.state.formData.banner_pic.address || this.props.banner_pic}>\r\n              <div className={classes.changeCover} onClick={() => this.banner_pic.click()}>\r\n                <WallpaperIcon className={classes.coverIcon} />\r\n                <p>{this.state.formData.banner_pic.filename || 'Change Cover Photo'}</p>\r\n                <p>{this.state.formData.banner_pic.file ? 'Click save to upload changes' : '1200px X 400px'}</p>\r\n              </div>\r\n            </CoverPhoto>\r\n\r\n            <div className={classes.userInfo}>\r\n              <div className={classes.profilePhoto} onClick={() => this.profile_pic.click()} >\r\n                <img className={classes.image} src={this.state.formData.profile_pic.address || this.props.profile_pic} alt='' />\r\n                <p className={classes.changePic}>{this.state.formData.profile_pic.filename || 'Change Profile Photo'}</p>\r\n                <p className={classes.resolution}>{this.state.formData.profile_pic.file ? 'Click save to upload changes' : '200px X 200px'}</p>\r\n              </div>\r\n\r\n              <div className={classes.profileForm}>\r\n                <div className={classes.data}>\r\n                  <p>{this.user.name}</p>\r\n                  <p>{'@' + this.user.username}</p>\r\n                  <Typography>{this.user.description}</Typography>\r\n                </div>\r\n                <div className={classes.inlineInputs}>\r\n                  <TextField disabled={this.state.loading} error={!!this.state.formData.name.error} helperText={this.state.formData.name.error} onChange={this.inputChangedHandler.bind(this, 'name')} InputLabelProps={{ shrink: true }} inputProps={{maxLength: 50}} className={classes.firstInput} fullWidth label=\"Name\" value={this.state.formData.name.value} />\r\n                  <TextField disabled={this.state.loading} error={!!this.state.formData.username.error} helperText={this.state.formData.username.error} onChange={this.inputChangedHandler.bind(this, 'username')} InputLabelProps={{ shrink: true }} inputProps={{maxLength: 50}} fullWidth label=\"Username\" value={this.state.formData.username.value} />\r\n                </div>\r\n                <TextField\r\n                  disabled={this.state.loading}\r\n                  onChange={this.inputChangedHandler.bind(this, 'description')}\r\n                  inputProps={{maxLength: 200}}\r\n                  InputLabelProps={{ shrink: true }}\r\n                  value={this.state.formData.description.value}\r\n                  fullWidth\r\n                  className={classes.textArea}\r\n                  id=\"standard-multiline-static\"\r\n                  label=\"Describe yourself...\"\r\n                  multiline\r\n                  rows={5}\r\n                />\r\n                <BottomOptions\r\n                  mainButtonDisabled={this.state.loading}\r\n                  mainButtonClicked={this.submitHandler}\r\n                  mainButtonColor='secondary'\r\n                  mainButtonText='Save'\r\n                  message={(this.state.formData.description.value ? this.state.formData.description.value.length : 0) + '/200'} />\r\n\r\n                {this.state.loading && <LinearProgress style={{marginTop: 8}} />}\r\n                {this.state.serverErrors.map(errMessage => <Alert key={errMessage} style={{marginTop: 8}} severity=\"error\">{errMessage}</Alert>)}\r\n                {this.state.serverInfo.map(infoMessage => <Alert key={infoMessage} style={{marginTop: 8}} severity=\"success\">{infoMessage}</Alert>)}\r\n              \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    token: state.auth.token,\r\n    userId: state.auth.currentUser._id,\r\n    profile_pic: state.auth.currentUser.profile_pic,\r\n    banner_pic: state.auth.currentUser.banner_pic\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    updatePictures: (profile_pic, banner_pic) => dispatch( actions.updatePictures(profile_pic, banner_pic) )\r\n  };\r\n};\r\n\r\nexport default connect( mapStateToProps, mapDispatchToProps )( withErrorHandler(AccountSettings, styles, axios) );"],"sourceRoot":""}