{"version":3,"sources":["components/BottomOptions.js","assets/images/logo-small.png","components/Navigation/NavBar/SearchBar.js","components/Logo.js","components/Navigation/NavBar/NavBar.js","components/Navigation/SideDrawer/UserInfo.js","components/Navigation/SideDrawer/SideDrawer.js","hoc/Layout.js","components/CreatePost/EmbedContentDialog.js","components/Comments/EmbededContent.js","components/CreatePost/ContentPreview.js","components/CreatePost/CreatePost.js","hoc/withLikeSystem.js","containers/PostList/Post.js","components/Observer.js","hoc/withAuthGard.js","containers/PostList/PostList.js","containers/Feed.js","components/Comments/CreateComment.js","components/Comments/LinkThread.js","components/Comments/CommentData.js","components/Comments/Comment.js","components/Comments/StatefulCreateComment.js","components/Comments/Comments.js","components/UI/LoadingModal.js","containers/PostDetail.js","containers/Profile/ProfileTabs.js","hoc/withFollowSystem.js","containers/Profile/ProfileDashboard.js","containers/UserList/UserCard.js","containers/UserList/UserList.js","containers/CommentList/CommentListing.js","containers/CommentList/CommentList.js","components/UI/DashBoardWrapper.js","components/UI/List.js","containers/Profile/Profile.js","containers/Auth/Auth.js","containers/Auth/Logout.js","containers/Search.js","containers/Discover.js","App.js","serviceWorker.js","store/reducers/auth.js","index.js","axios-instance.js","shared/utility.js","store/actions/actionTypes.js","components/ErrorPage.js","hoc/withErrorHandler.js","store/actions/auth.js","components/CoverPhoto.js","components/UI/Heading.js"],"names":["useStyles","makeStyles","theme","bottomOptions","display","alignItems","justifyContent","marginTop","spacing","message","marginRight","replyButton","margin","buttons","flexWrap","breakpoints","down","fontSize","BottomOptions","props","classes","className","messageClass","variant","handleCanceled","disabled","mainButtonDisabled","onClick","disableElevation","mainButtonClicked","color","mainButtonColor","mainButtonText","module","exports","SearchBar","state","value","handleInput","e","setState","target","handleKeyPress","charCode","submitInput","length","location","pathname","match","history","push","this","search","placeholder","onChange","onKeyPress","input","searchIcon","Component","withStyles","fontColor","palette","type","paddingLeft","overflow","borderRadius","backgroundColor","background","front","darken","maxWidth","cursor","height","border","outline","padding","width","up","transition","transitions","create","withRouter","Logo","style","src","logoUrl","alt","menuButton","title","lineHeight","textDecoration","navbar","boxShadow","toolbar","minHeight","profilePic","logoWrapper","filter","titleText","fontFamily","marginLeft","fontWeight","navItem","searchWrapper","NavBar","menuClicked","currentUser","isAuthenticated","switchedDarkMode","AppBar","Toolbar","IconButton","edge","aria-label","to","visibility","Button","size","_id","profile_pic","userInfo","position","bottom","wordBreak","image","username","nickname","UserInfo","name","drawer","flexShrink","drawerPaper","drawerContainer","closeIcon","top","right","link","textTransform","listItem","footer","marginBottom","text","secondary","SideDrawer","open","onClose","links","Drawer","anchor","paper","CoverPhoto","backgroundUrl","banner_pic","DEFAULT_BANNER","List","Object","keys","map","key","ListItem","button","href","Layout","showSideDrawer","sideDrawerToggleHandler","prevState","sideDrawerClosedHandler","wrapper","children","connect","auth","token","paddingTop","EmbedContentDialog","defaultValue","onSubmit","refInput","useRef","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","inputProps","maxLength","autoFocus","label","fullWidth","current","inputRef","DialogActions","EmbededContent","contentUrl","isVideo","isSmall","embededContent","iframeContainer","paddingBottom","left","objectFit","maxHeight","frameBorder","allow","allowFullScreen","contentPreview","closeIconContainer","zIndex","mid","textAlign","ContentPreview","onClear","CreatePost","body","show","showDialog","touched","loading","urlSubmitted","urlTransformed","handleFocusIn","handleFocusOut","handleText","field","event","submitHandler","a","onAuthFail","newPost","postSubmitted","handleDialog","handleLinkSubmitted","clearContentLink","trim","VIDEO_VALIDATORS","validator","matchArr","regex","embedUrl","createPost","Typography","container","DEFAULT_PROFILE_PIC","Tooltip","icon","Input","error","titleFocus","bind","textArea","flexGrow","resize","success","light","flexDirection","withLikeSystem","WrappedComponent","routeToSubmitLike","LikeSystem","likeHandler","isLike","submitLike","newState","liked","like_count","dislike_count","axios","method","url","headers","data","userPic","Post","replace","detail","substring","author_id","date","comment_count","linkToProfile","LinkToProfile","noClass","LinkToPost","post","divider","authorInfo","info","handle","embededWrapper","paragraph","whiteSpace","bodyLink","iconButton","spacer","primary","borderBottom","Observer","observer","IntersectionObserver","entries","isIntersecting","unobserve","hasBeenSeen","ref","el","observe","withAuthGard","AuthGard","setAuthRedirectPath","dispatch","path","actions","PostList","posts","hasMore","pageNumber","handleScroll","makeRequest","prevProps","params","page","then","res","next","postsAdded","concat","index","author","date_formatted","LinearProgress","Feed","handlePostCreate","catch","err","Promise","reject","withErrorHandler","reply","CreateComment","replyClicked","textBoxClosed","handleAuthFail","multiline","showMore","LinkThread","forward","commentData","commentInfo","rating","CommentData","onReplyClicked","OptionalLink","Comment","handleLoadMore","loadMore","handleShowTextBox","showTextBox","openShowMore","closeShowMore","postNewComment","newComment","submitted","commentControl","handleData","nextProps","nextState","reduce","acc","continueThread","verticalLine","minWidth","main","StatefulCreateComment","initialState","renderSwitch","Comments","updateCommentTree","comments_arr","comment_tree","comment","comment_ids_added","parent_id","children_count","depth","post_id","postId","unshift","console","log","mapComments","comments","endOfThread","startingDepth","maxDepth","num_children","startDepth","handleCommentData","commentId","status","commentsData","initializeData","root","rootId","commentWrapper","post_num_children","backDrop","opacity","hide","pointerEvents","loadingCircle","LoadingModal","CircularProgress","PostDetail","initialLoading","limit","startIndex","withParent","getComments","withComments","all","resultsArr","postDetail","profileTabs","underline","transform","active","ProfileTabs","navLinks","navLink","activeClassName","exact","withFollowSystem","FollowSystem","submitFollow","followed","userId","displayFollowButton","currentUserId","settings","alignSelf","date_created","description","convertDate","userCard","userDetail","UserList","users","Authorization","user","commentContainer","borderLeft","commentListing","CommentListing","comment_id","post_author_id","post_author_profile_pic","post_author_username","post_title","post_date","spacers","i","CommentList","DashBoardWrapper","list","out","Heading","Profile","follower_count","following_count","id","routes","split","capitalize","includes","render","Auth","inputChangedHandler","newControls","controls","checkValidity","register","password","confirmPassword","onAuth","initializeState","isRegister","fields","max","errors","clearErrors","redirectMessage","clearRedirectMessage","clearAuthHelpers","authRedirectPath","login","header","control","helperText","InputLabelProps","shrink","spaced","Alert","msg","severity","actionTypes","Logout","logout","goBack","Search","Discover","discover","AccountSettings","lazy","App","switchDarkMode","dark","onTryAutoSignup","lightTheme","createMuiTheme","purple","green","default","back","darkTheme","ThemeProvider","CssBaseline","fallback","component","Boolean","window","hostname","reducer","action","updateObject","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","authReducer","store","createStore","applyMiddleware","thunk","app","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","instance","baseURL","timeout","BASE_URL","dateString","Date","toDateString","oldObject","updatedProperties","updatedPropsNoUndefined","undefined","test","AUTH_START","AUTH_SUCCESS","REGISTER_SUCCESS","AUTH_FAIL","AUTH_LOGOUT","CLEAR_ERRORS","CLEAR_AUTH_HELPERS","CLEAR_REDIRECT_MESSAGE","UPDATE_PICTURES","SET_AUTH_REDIRECT_PATH","errorPage","ErrorPage","compStyles","WithError","errorConfirmedHandler","errMsg","reqInterceptor","interceptors","request","use","req","resInterceptor","response","eject","styles","wordWrap","shadows","userFields","authSuccess","updatePictures","forEach","localStorage","removeItem","checkAuthTimeout","expirationTime","setTimeout","authData","expirationDate","getTime","expiresIn","setItem","userField","authCheckState","getItem","coverPhoto","backgroundSize","content","backgroundImage","heading"],"mappings":"uMAKMA,EAAYC,aAAW,SAACC,GAAD,oBAC3BC,cAAe,CACbC,QAAS,OACTC,WAAY,SACZC,eAAgB,gBAChBC,UAAWL,EAAMM,QAAQ,KAE3BC,QAAS,CACPL,QAAS,eACTM,YAAaR,EAAMM,QAAQ,IAE7BG,YAAa,CACXC,OAAQV,EAAMM,QAAQ,KAExBK,QAAS,CACPT,QAAS,OACTU,SAAU,OACVR,eAAgB,aAEjBJ,EAAMa,YAAYC,KAAK,MAAQ,CAC9BP,QAAS,CACPQ,SAAU,cAKD,SAASC,EAAcC,GACpC,IAAMC,EAAUpB,IAEhB,OACE,yBAAKqB,UAAWD,EAAQjB,eACtB,kBAAC,IAAD,CAAYkB,UAAWD,EAAQX,QAAU,IAAMU,EAAMG,aAAcC,QAAQ,SAAUJ,EAAMV,SAC3F,yBAAKY,UAAWD,EAAQP,SACrBM,EAAMK,eACL,kBAAC,IAAD,CACEC,SAAUN,EAAMO,mBAChBC,QAASR,EAAMK,eACfD,QAAQ,YAAYK,kBAAgB,EACpCP,UAAWD,EAAQT,aAJrB,UAKE,KACJ,kBAAC,IAAD,CACEc,SAAUN,EAAMO,mBAChBH,QAAQ,YACRI,QAASR,EAAMU,kBACfD,kBAAgB,EAACE,MAAOX,EAAMY,gBAC9BV,UAAWD,EAAQT,aAAcQ,EAAMa,oB,kBClDjDC,EAAOC,QAAU,0jE,oWC8CXC,E,4MACFC,MAAQ,CAACC,MAAO,I,EAEhBC,YAAc,SAACC,GACX,EAAKC,SAAS,CAACH,MAAOE,EAAEE,OAAOJ,S,EAGnCK,eAAiB,SAACH,GACK,KAAfA,EAAEI,UAAiB,EAAKC,e,EAGhCA,YAAc,WACsB,IAA5B,EAAKR,MAAMC,MAAMQ,SACjB,EAAK1B,MAAM2B,SAASC,SAASC,MAAM,4BACnC,EAAK7B,MAAM8B,QAAQC,KAAK,EAAK/B,MAAM2B,SAASC,SAAW,WAAa,EAAKX,MAAMC,OAE/E,EAAKlB,MAAM8B,QAAQC,KAAK,wBAA0B,EAAKd,MAAMC,S,uDAKjE,IAAMjB,EAAU+B,KAAKhC,MAAMC,QAC3B,OACI,yBAAKC,UAAWD,EAAQgC,QACpB,2BACIC,YAAY,sBACZhB,MAAOc,KAAKf,MAAMC,MAClBiB,SAAUH,KAAKb,YACfiB,WAAYJ,KAAKT,eACjBrB,UAAWD,EAAQoC,QAEvB,kBAAC,IAAD,CAAY7B,QAASwB,KAAKP,YAAcvB,UAAWD,EAAQqC,kB,GA/BnDC,aAqCTC,eA9EA,SAACzD,GACZ,IAAM0D,EAAmC,SAAvB1D,EAAM2D,QAAQC,KAAkB,QAAU,QAC5D,MAAO,CACHV,OAAQ,CACJW,YAAa7D,EAAMM,QAAQ,GAC3BwD,SAAU,SACV5D,QAAS,OACTC,WAAY,SACZ4D,aAAc,GACdC,gBAAiBhE,EAAM2D,QAAQM,WAAWC,MAC1C,UAAW,CACPF,gBAAiBG,YAAOnE,EAAM2D,QAAQM,WAAWC,MAAO,KAE5D1D,YAAa,EACb4D,SAAU,KAEdb,WAAY,CACR3B,MAAO8B,EACPW,OAAQ,UACR7D,YAAaR,EAAMM,QAAQ,GAC3BgE,OAAQ,QAEZhB,MAAM,aACFU,gBAAiB,UACjBO,OAAQ,OACRC,QAAS,OACT5C,MAAO8B,EACPe,QAASzE,EAAMM,QAAQ,EAAG,EAAG,EAAG,GAChCS,SAAU,SACV2D,MAAO,QACN1E,EAAMa,YAAY8D,GAAG,KAAO,CACzBC,WAAY5E,EAAM6E,YAAYC,OAAO,SACrCJ,MAAO,IACP,UAAW,CACPA,MAAO,UA4CZjB,CAAmBsB,YAAW9C,I,kBC5E9B+C,EAJF,kBACX,yBAAKC,MAAO,CAAEX,OAAQ,QAAUY,IAAKC,IAASC,IAAI,Y,2CCS9CtF,EAAYC,aAAW,SAACC,GAAD,YAAY,CACrCqF,WAAW,yBACHrF,EAAMa,YAAY8D,GAAG,MADnB,iCAC0D,CAC5DnE,YAAaR,EAAMM,QAAQ,KAGnCgF,MAAO,CACH9E,YAAaR,EAAMM,QAAQ,GAC3BgE,OAAQ,GACRpE,QAAS,OACTC,WAAY,SACZoF,WAAY,EACZC,eAAgB,OAChB5D,MAAO,WAEX6D,OAAQ,CACJC,UAAW,QAEfC,SAAO,mBACF3F,EAAMa,YAAY8D,GAAG,MAAQ,CAC1BiB,UAAW,KAFZ,cAIF5F,EAAMa,YAAY8D,GAAG,MAAQ,CAC1BiB,UAAW,KALZ,GAQPC,WAAY,CACRvB,OAAQ,GACRI,MAAO,GACPX,aAAc,OAElB+B,YAAa,CACTC,OAAQ,eACRzB,OAAQ,IAEZ0B,UAAU,aACNC,WAAY,oCACZ/F,QAAS,OACTQ,OAAQ,EACRwF,WAAY,UACZnF,SAAU,UACVoF,WAAY,KACXnG,EAAMa,YAAY8D,GAAG,KAAO,CACzBzE,QAAS,UAGjBkG,QAAQ,aACJlG,QAAS,QACRF,EAAMa,YAAY8D,GAAG,KAAO,CACzBzE,QAAS,UAGjBmG,cAAe,CACX3F,OAAQ,cAID,SAAS4F,EAAT,GAAkF,IAAhEC,EAA+D,EAA/DA,YAAaC,EAAkD,EAAlDA,YAAaC,EAAqC,EAArCA,gBAAiBC,EAAoB,EAApBA,iBAClExF,EAAUpB,IAEhB,OACI,kBAAC6G,EAAA,EAAD,CAAQxF,UAAWD,EAAQuE,QACvB,kBAACmB,EAAA,EAAD,CAASzF,UAAWD,EAAQyE,SACxB,kBAACkB,EAAA,EAAD,CACIpF,QAAS8E,EACTO,KAAK,QACL3F,UAAWD,EAAQmE,WACnBzD,MAAM,UACNmF,aAAW,QACX,kBAAC,IAAD,OAEJ,kBAAC,IAAD,CAAM5F,UAAWD,EAAQoE,MAAO0B,GAAG,SAC/B,yBAAK7F,UAAWD,EAAQ4E,aACpB,kBAAC,EAAD,OAEJ,uBAAG3E,UAAWD,EAAQ8E,WAAW,0BAAMf,MAAO,CAACgC,WAAY,WAA1B,KAAjC,UAGJ,yBAAK9F,UAAWD,EAAQmF,eACpB,kBAAC,EAAD,QAGFI,GAAmB,kBAACS,EAAA,EAAD,CAAQ/F,UAAWD,EAAQkF,QAASxE,MAAM,WAC3D,kBAAC,IAAD,CAAMqD,MAAO,CAACO,eAAgB,OAAQ5D,MAAO,WAAYoF,GAAG,UAA5D,UAEJ,kBAACH,EAAA,EAAD,CAAY1F,UAAWD,EAAQkF,QAAS3E,QAASiF,GAC7C,kBAAC,IAAD,CAAiBzB,MAAO,CAACrD,MAAO,YAEnC6E,GAAmB,kBAAC,IAAD,CAAMO,GAAI,YAAa7F,UAAWD,EAAQkF,QAASnB,MAAO,CAACM,WAAY,IACvF,kBAACsB,EAAA,EAAD,KAAY,kBAAC,IAAD,CAAc5B,MAAO,CAACrD,MAAO,SAAUuF,KAAK,YAE3DV,GAAmB,kBAAC,IAAD,CAAMO,GAAE,mBAAcR,EAAYY,KAAOnC,MAAO,CAAEM,WAAY,EAAGW,WAAY,IAC7F/E,UAAWD,EAAQkF,SACnB,yBAAKjF,UAAWD,EAAQ2E,WAAYX,IAAKsB,EAAYa,YAAajC,IAAI,Q,uCCvGpFtF,EAAYC,aAAW,SAACC,GAAD,MAAY,CACrCsH,SAAU,CACN1F,MAA8B,SAAvB5B,EAAM2D,QAAQC,KAAkB,QAAU,QACjD7C,SAAU,MACVoF,WAAY,IACZoB,SAAU,WACVC,OAAQ,OACRtB,WAAYlG,EAAMM,QAAQ,KAC1B,MAAO,CACHmH,UAAW,eAGnBC,MAAO,CACHpD,OAAQ,GACRI,MAAO,GACPX,aAAc,OAElB4D,SAAU,CACNjH,OAAQ,WAEZkH,SAAU,CACN7G,SAAU,QACVL,OAAQ,OAID,SAASmH,EAAS5G,GAC7B,IAAMC,EAAUpB,IAChB,OACI,yBAAKqB,UAAWD,EAAQoG,UACpB,yBAAKnG,UAAWD,EAAQwG,MAAOxC,IAAKjE,EAAMuF,YAAYa,YAAajC,IAAI,KACvE,uBAAGjE,UAAWD,EAAQyG,UAAY1G,EAAMuF,YAAYsB,MACpD,uBAAG3G,UAAWD,EAAQ0G,UAAW,IAAM3G,EAAMuF,YAAYmB,W,sCCpB/D7H,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrC+H,OAAQ,CACJrD,MAJY,IAKZsD,WAAY,GAEhBC,YAAa,CACTvD,MARY,IASZV,gBAAiBhE,EAAM2D,QAAQM,WAAWC,OAE9CgE,gBAAiB,CACbpE,SAAU,QAEdqE,UAAW,CACPvG,MAAO,QACP2F,SAAU,WACVxG,SAAU,GACVL,OAAQ,EACR0H,IAAK,EACLC,MAAO,EACPhE,OAAQ,WAEZiE,KAAM,CACF9C,eAAgB,OAChB+C,cAAe,aACf3G,MAAO,UACP6C,QAASzE,EAAMM,QAAQ,GAAK,MAAQN,EAAMM,QAAQ,KAAO,KACzDoE,MAAO,OACPJ,OAAQ,QAEZkE,SAAU,CACN/D,QAAS,GAEbgE,OAAQ,CACJpI,UAAW,OACX6F,WAAYlG,EAAMM,QAAQ,GAC1BoI,aAAc1I,EAAMM,QAAQ,GAC5BsB,MAAO5B,EAAM2D,QAAQgF,KAAKC,UAC1B7H,SAAU,SACV,MAAO,CACHb,QAAS,OACTC,WAAY,SACZyB,MAAO,WAEX,SAAU,CACNsE,WAAY,cAkET2C,OA7Df,YAAwF,IAAlEpC,EAAiE,EAAjEA,gBAAiBD,EAAgD,EAAhDA,YAAasC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,QAASrC,EAAoB,EAApBA,iBACzDxF,EAAUpB,KAEZkJ,EAAQ,CACR,KAAQ,CAAEhC,GAAI,SACd,iBAAkB,CAAEA,GAAI,cAkB5B,OAdIgC,EADAvC,EACK,2BACEuC,GADF,IAED,aAAc,CAAEhC,GAAG,YAAD,OAAcR,EAAYY,MAC5C,SAAY,CAAEJ,GAAI,aAClB,OAAU,CAAEA,GAAI,aAGf,2BACEgC,GADF,IAED,MAAS,CAAEhC,GAAI,UACf,SAAY,CAAEA,GAAI,eAKtB,kBAACiC,EAAA,EAAD,CACIC,OAAO,OACPJ,KAAMA,EACNC,QAASA,EACT5H,UAAWD,EAAQ6G,OACnB7G,QAAS,CACLiI,MAAOjI,EAAQ+G,cAGnB,kBAACmB,EAAA,EAAD,CAAYC,cAAgB7C,EAAY8C,YAAeC,MACvD,yBAAK9H,QAASsH,EAAS5H,UAAWD,EAAQiH,WAA1C,UACC1B,GAAmB,kBAACoB,EAAD,CAAUrB,YAAaA,IAE3C,yBAAKrF,UAAWD,EAAQgH,iBAEpB,kBAACsB,EAAA,EAAD,CAAMvE,MAAO,CAACR,QAAS,GAAIhD,QAASsH,GAC/BU,OAAOC,KAAKV,GAAOW,KAAI,SAAAC,GAAG,OACvB,kBAACC,EAAA,EAAD,CAAUD,IAAKA,EAAKE,QAAM,EAAC3I,UAAWD,EAAQsH,UAC1C,kBAAC,IAAD,eAAMrH,UAAWD,EAAQoH,MAAUU,EAAMY,IAAQA,SAOjE,yBAAKzI,UAAWD,EAAQuH,QACpB,kBAAC5B,EAAA,EAAD,CAAYpF,QAASiF,GACjB,kBAAC,IAAD,OAEJ,0CACA,0CAAe,iDACf,uBAAGqD,KAAK,oCAAmC,kBAAC,IAAD,CAAY9E,MAAO,CAACX,OAAQ,WAAW,mD,mBC/F5F0F,G,4MACF9H,MAAQ,CAAE+H,gBAAgB,G,EAE1BC,wBAA0B,WACtB,EAAK5H,UAAS,SAAC6H,GACX,MAAO,CAAEF,gBAAiBE,EAAUF,oB,EAI5CG,wBAA0B,WACtB,EAAK9H,SAAS,CAAE2H,gBAAgB,K,uDAIhC,OACI,kBAAC,WAAD,KACI,kBAAC3D,EAAD,CACII,iBAAkBzD,KAAKhC,MAAMyF,iBAC7BH,YAAatD,KAAKiH,wBAClBzD,gBAAiBxD,KAAKhC,MAAMwF,gBAC5BD,YAAavD,KAAKhC,MAAMuF,cAC5B,kBAAC,GAAD,CACIE,iBAAkBzD,KAAKhC,MAAMyF,iBAC7BD,gBAAiBxD,KAAKhC,MAAMwF,gBAC5BD,YAAavD,KAAKhC,MAAMuF,YACxBsC,KAAM7F,KAAKf,MAAM+H,eACjBlB,QAAS9F,KAAKmH,0BAClB,0BAAMjJ,UAAW8B,KAAKhC,MAAMC,QAAQmJ,SAC/BpH,KAAKhC,MAAMqJ,e,GA5BX9G,aA0CN+G,iBAPS,SAAArI,GACpB,MAAO,CACHuE,gBAAsC,OAArBvE,EAAMsI,KAAKC,MAC5BjE,YAAatE,EAAMsI,KAAKhE,eAIjB+D,CAAyB9G,cA5DzB,SAACzD,GAAD,YAAY,CACvBqK,SAAO,GACHzI,MAA8B,SAAvB5B,EAAM2D,QAAQC,KAAkB,QAAU,QACjDlD,OAAQ,QACRgK,WAAY,IAHT,cAIF1K,EAAMa,YAAYC,KAAK,KAAO,CAC3BJ,OAAQ,UALT,cAOFV,EAAMa,YAAYC,KAAK,KAAO,CAC3BJ,OAAQ,OACRgK,WAAY,KATb,cAWF1K,EAAMa,YAAYC,KAAK,KAAO,CAC3BJ,OAAQ,IAZT,MA2D6B+C,CAAmBuG,K,wKCzD5C,SAASW,GAAT,GAAwE,IAA1C7B,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,QAAS6B,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,SAClEC,EAAWC,mBAEjB,OACE,kBAACC,GAAA,EAAD,CAAQlC,KAAMA,EAAMC,QAASA,GAC3B,kBAACkC,GAAA,EAAD,sBACA,kBAACC,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,gDAGA,kBAACC,GAAA,EAAD,CACEC,WAAY,CAACC,UAAW,KACxBV,aAAcA,EACdW,WAAS,EACT7K,OAAO,QACP8K,MAAM,kBACN5H,KAAK,OACL6H,WAAS,EACTpI,WAAY,SAAChB,GAA2B,KAAfA,EAAEI,UAAiBoI,EAASC,EAASY,QAAQvJ,QACtEwJ,SAAUb,KAGd,kBAACc,GAAA,EAAD,KACE,kBAAC1E,EAAA,EAAD,CAAQzF,QAASsH,EAASnH,MAAM,WAAhC,UAGA,kBAACsF,EAAA,EAAD,CAAQzF,QAAS,kBAAMoJ,EAASC,EAASY,QAAQvJ,QAAQP,MAAM,WAA/D,QCJO,SAASiK,GAAT,GAAqE,IA5BjEzH,EA4BsB0H,EAA0C,EAA1CA,WAAYC,EAA8B,EAA9BA,QAASzB,EAAqB,EAArBA,SAAU0B,EAAW,EAAXA,QAChE9K,GA7BWkD,EA6BS4H,EAAU,IAAM,IA7BZjM,aAAW,SAACC,GAAD,MAAY,CACrDiM,eAAgB,CACd1E,SAAU,WACVnD,SAAUA,EACV1D,OAAQ,SACRoD,SAAU,UAEZoI,gBAAiB,CACf3E,SAAU,WACV7C,MAAO,OACPyH,cAAe,SACf7H,OAAQ,EACR,WAAY,CACVP,aAAc,GACdwD,SAAU,WACVa,IAAK,EACLgE,KAAM,EACN1H,MAAO,OACPJ,OAAQ,SAGZoD,MAAO,CACL2E,UAAW,UACX3H,MAAO,OACP4H,UAAoB,GAATlI,UAOb,OACE,yBAAKjD,UAAWD,EAAQ+K,gBAErB3B,EAEAyB,EACG,yBAAK5K,UAAWD,EAAQgL,iBACtB,4BACExH,MAAM,MACNJ,OAAO,MACPgB,MAAM,QACNJ,IAAK4G,EAAYS,YAAY,IAC7BC,MAAM,iFACNC,iBAAe,KAGrB,yBAAKtL,UAAWD,EAAQwG,MAAOxC,IAAK4G,EAAY1G,IAAI,eC9C5D,IAAMtF,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0M,eAAgB,CACdnI,OAAQ,aAAevE,EAAM2D,QAAQgF,KAAKC,UAC1CnE,QAASzE,EAAMM,QAAQ,GACvByD,aAAc,GACd1D,UAAWL,EAAMM,QAAQ,IAE3BqM,mBAAoB,CAClBpF,SAAU,WACV9C,QAAS,EACT2D,KAAM,EACNC,OAAQ,EACRuE,OAAQ,IACRvI,OAAQ,UACRN,aAAc,MACdC,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1CnH,UAAW,mBAAqB1F,EAAM2D,QAAQM,WAAW4I,KAE3D1E,UAAW,CACT1D,QAAS,EACT7C,MAAO,QACPoC,gBAAiB,MACjBjD,SAAU,GACV2D,MAAO,GACPJ,OAAQ,GACRwI,UAAW,SACXvH,WAAY,OACZxB,aAAc,WAIH,SAASgJ,GAAT,GAA2D,IAAjCjB,EAAgC,EAAhCA,WAAYC,EAAoB,EAApBA,QAASiB,EAAW,EAAXA,QACtD9L,EAAUpB,KAEhB,OACE,yBAAKqB,UAAWD,EAAQwL,gBAEpB,kBAACb,GAAD,CACEG,SAAS,EACTF,WAAYA,EACZC,QAASA,GAET,yBAAK5K,UAAWD,EAAQyL,mBAAoBlL,QAASuL,GACnD,yBAAK7L,UAAWD,EAAQiH,WAAxB,aCtCZ,IA2EM8E,G,4MACJ/K,MAAQ,CACNoD,MAAO,GACP4H,KAAM,GACNC,MAAM,EACNC,YAAY,EACZC,SAAS,EACTC,SAAS,EACTC,aAAc,KACdC,eAAgB,KAChBzB,SAAS,G,EAGX0B,cAAgB,WACd,EAAKnL,SAAS,CAAE6K,MAAM,K,EAGxBO,eAAiB,WACf,EAAKpL,SAAS,CAAE6K,MAAM,K,EAGxBQ,WAAa,SAACC,EAAOC,GAAW,IAAD,EAC7B,EAAKvL,UAAL,mBAAgBsL,EAAQC,EAAMtL,OAAOJ,OAArC,yBAAqD,GAArD,K,EAIF2L,c,wBAAgB,6BAAAC,EAAA,yDACW,KAArB,EAAK7L,MAAMoD,MADD,yCACsB,EAAKhD,SAAS,CAAC+K,SAAS,KAD9C,UAET,EAAKpM,MAAMwF,gBAFF,yCAE0B,EAAKxF,MAAM+M,cAFrC,cAGd,EAAK1L,SAAS,CAAEgL,SAAS,IACrBW,EAAU,CAAC3I,MAAO,EAAKpD,MAAMoD,MAAO4H,KAAM,EAAKhL,MAAMgL,MACrD,EAAKhL,MAAMsL,iBACbS,EAAQnC,WAAa,EAAK5J,MAAMsL,eAChCS,EAAQlC,QAAU,EAAK7J,MAAM6J,SAPjB,mBAUN,EAAK9K,MAAMiN,cAAcD,GAVnB,QAWZ,EAAK3L,SAAS,CAAEgD,MAAO,GAAI4H,KAAM,GAAIC,MAAM,EAAOE,SAAS,EAAOC,SAAS,IAX/D,kDAaZ,EAAKhL,SAAS,CAAEgL,SAAS,IAbb,0D,EAiBhBa,aAAe,WACb,EAAK7L,UAAS,SAAA6H,GAAS,MAAK,CAACiD,YAAajD,EAAUiD,gB,EAGtDgB,oBAAsB,SAACb,GACrB,GAA4B,IAAxBA,EAAa5K,OAAc,OAAO,EAAK0L,mBAC3C,IAFsC,EAElCb,EAAiBD,EAAae,OAC9BvC,GAAU,EAHwB,eAIhBwC,KAJgB,IAItC,2BAAwC,CAAC,IAAhCC,EAA+B,QAChCC,EAAWjB,EAAe1K,MAAM0L,EAAUE,OAChD,GAAKD,EAAL,CACAjB,EAAiBgB,EAAUG,SAAWF,EAAS,GAC/C1C,GAAU,EACV,QAToC,8BAWtC,EAAKzJ,SAAS,CAAE8K,YAAY,EAAOG,eAAcC,iBAAgBzB,a,EAGnEsC,iBAAmB,WACjB,EAAK/L,SAAS,CAAE8K,YAAY,EAAOG,aAAc,KAAMC,eAAgB,Q,uDAIvE,IAAMtM,EAAU+B,KAAKhC,MAAMC,QAC3B,OACE,yBAAKC,UAAWD,EAAQ0N,YACtB,kBAACC,GAAA,EAAD,CAAY5J,MAAO,CAAEyD,aAAc,QAASvC,WAAY,WAAa9E,QAAQ,MAA7E,wBACA,yBAAKF,UAAWD,EAAQmJ,SAEtB,yBAAKlJ,UAAWD,EAAQ4N,WACtB,yBAAK3N,UAAWD,EAAQwG,MAAOxC,IAAKjC,KAAKhC,MAAMoG,aAAe0H,IAAqB3J,IAAI,KACtFnC,KAAKf,MAAMiL,MACV,kBAAC6B,GAAA,EAAD,CAAS1J,MAAM,iBACb,kBAACuB,EAAA,EAAD,CAAY1F,UAAWD,EAAQ+N,KAAMxN,QAASwB,KAAKkL,cACjD,kBAAC,KAAD,SAMR,yBAAKlJ,MAAO,CAAEP,MAAO,SACnB,kBAACwK,GAAA,EAAD,CACE3N,SAAU0B,KAAKf,MAAMoL,QACrBhC,UAAW,IACX6D,MAAOlM,KAAKf,MAAMmL,SAAgC,KAArBpK,KAAKf,MAAMoD,MACxC7D,QAASwB,KAAKwK,cACdtM,UAAWD,EAAQoE,MAAQ,KAAOrC,KAAKf,MAAMiL,KAAOjM,EAAQkO,WAAa,IACzE3D,WAAS,EACTtI,YAAY,mBACZC,SAAUH,KAAK0K,WAAW0B,KAAKpM,KAAM,SACrCd,MAAOc,KAAKf,MAAMoD,QACnBrC,KAAKf,MAAMiL,KACV,oCACE,8BACE5L,SAAU0B,KAAKf,MAAMoL,QACrBhC,UAAW,IACXnJ,MAAOc,KAAKf,MAAMgL,KAClB/J,YAAY,kBACZC,SAAUH,KAAK0K,WAAW0B,KAAKpM,KAAM,QACrC9B,UAAWD,EAAQoO,WACrB,kBAACtO,GAAA,EAAD,CACEW,kBAAmBsB,KAAK6K,cACxBtM,mBAAoByB,KAAKf,MAAMoL,QAC/BhM,eAAgB2B,KAAKyK,eACrB7L,gBAAgB,YAChBC,eAAe,OACfV,aAAcF,EAAQE,aACtBb,QAAU,IAAM0C,KAAKf,MAAMgL,KAAKvK,OAAU,2BAE5C,OAIPM,KAAKf,MAAMiL,MAAQlK,KAAKf,MAAMsL,gBAC7B,kBAACT,GAAD,CACEjB,WAAY7I,KAAKf,MAAMsL,eACvBzB,QAAS9I,KAAKf,MAAM6J,QACpBiB,QAAS/J,KAAKoL,mBAGlB,kBAAC1D,GAAD,CACE5B,QAAS9F,KAAKkL,aACdtD,SAAU5H,KAAKmL,oBACfxD,aAAc3H,KAAKf,MAAMqL,aACzBzE,KAAM7F,KAAKf,MAAMkL,kB,GA/HF5J,aAsIVC,iBAjNA,SAACzD,GAAD,oBACb4O,WAAY,CACV5K,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1C9I,aAAc,GACdU,QAASzE,EAAMM,QAAQ,GACvBoK,WAAY1K,EAAMM,QAAQ,GAC1BI,OAAQV,EAAMM,QAAQ,GAAK,QAE7B+J,QAAS,CACPnK,QAAS,QAEXoP,SAAU,CACRvO,SAAU,OACV2D,MAAO,OACP6K,SAAU,EACVvL,gBAAiBhE,EAAM2D,QAAQM,WAAWC,MAC1CtC,MAA8B,SAAvB5B,EAAM2D,QAAQC,KAAkB,QAAU,QACjDG,aAAc,gBACdQ,OAAQ,OACRC,QAAS,OACTgL,OAAQ,OACRlL,OAAQ,IACRG,QAASzE,EAAMM,QAAQ,GACvB2F,WAAY,WAEdyB,MAAO,CACL3D,aAAc,MACdW,MAAO,GACPJ,OAAQ,IAEVgB,MAAO,CACLvB,aAAc,sBACdD,SAAU,SACVE,gBAAiBhE,EAAM2D,QAAQM,WAAWC,MAC1CO,QAASzE,EAAMM,QAAQ,GACvB6L,cAAenM,EAAMM,QAAQ,GAC7BS,SAAU,QACV6L,OAAQ,IAEVwC,WAAY,CACVrL,aAAc,iBAEhB3C,aAAc,CACZQ,MAAO5B,EAAM2D,QAAQ8L,QAAQC,OAE/BZ,UAAW,CACT5O,QAAS,OACTyP,cAAe,SACfnP,YAAaR,EAAMM,QAAQ,GAC3BH,WAAY,UAEd8O,KAAM,CACJ5O,UAAW,GACXuB,MAAO,YAER5B,EAAMa,YAAYC,KAAK,MAAQ,CAC9BuJ,QAAS,CACPsF,cAAe,SACfxP,WAAY,UAEd8O,KAAM,CACJvO,OAAQ,GAEVgH,MAAO,CACLhH,OAAQ,UAEVoO,UAAW,CACTa,cAAe,MACfjL,MAAO,OACPvE,WAAY,WACZO,OAAQV,EAAMM,QAAQ,EAAE,EAAE,EAAE,QA2InBmD,CAAmBwJ,I,8ECzJnB2C,GA5DQ,SAAEC,EAAkBC,GAAwB,IAC3DC,EAD0D,kDAE9D,WAAY9O,GAAQ,IAAD,8BACjB,cAAMA,IAQR+O,YAAc,SAACC,GACb,IAAK,EAAKhP,MAAMwJ,MAAO,OAAO,EAAKxJ,MAAM+M,aACzC,EAAKkC,WAAWD,GAChB,IAAIE,EAAQ,2BAAO,EAAKjO,OAAZ,IAAmBkO,MAAOH,EAAS,GAAK,IAChDE,EAASC,QAAU,EAAKlO,MAAMkO,OACb,IAAnBD,EAASC,MAAcD,EAASE,aAAeF,EAASG,gBACxDH,EAASC,MAAQ,GACa,IAArB,EAAKlO,MAAMkO,MACD,IAAnBD,EAASC,MAAcD,EAASE,aAAeF,EAASG,iBAExDH,EAASE,YAAcF,EAASC,MAChCD,EAASG,eAAiBH,EAASC,OAErC,EAAK9N,SAAS6N,IAtBG,EAyBnBD,WAAa,SAACD,GACZM,aAAM,CACJC,OAAQ,OACRC,IAAKX,EAAoB,IAAM,EAAK7O,MAAMmG,IAC1CsJ,QAAS,CAAE,cAAiB,UAAY,EAAKzP,MAAMwJ,OACnDkG,KAAM,CAAEV,aA5BV,EAAK/N,MAAQ,CACXmO,WAAYpP,EAAMoP,WAClBC,cAAerP,EAAMqP,cACrBF,MAAOnP,EAAMmP,OAAS,GALP,EAF2C,qDAqC5D,OACE,kBAACP,EAAD,iBACM5M,KAAKhC,MADX,CAEEmP,MAAOnN,KAAKf,MAAMkO,MAClB3F,MAAOxH,KAAKhC,MAAMwJ,MAClBmG,QAAS3N,KAAKhC,MAAM2P,QACpBP,WAAYpN,KAAKf,MAAMmO,WACvBC,cAAerN,KAAKf,MAAMoO,cAC1BN,YAAa/M,KAAK+M,mBA7CsC,GACvCxM,aAwDzB,OAAO+G,cAPiB,SAAArI,GACtB,MAAO,CACLuI,MAAOvI,EAAMsI,KAAKC,MAClBmG,QAAS1O,EAAMsI,KAAKhE,YAAYa,eAI7BkD,CAA4BwF,ICkB/Bc,G,kDACJ,WAAY5P,GAAQ,IAAD,8BACjB,cAAMA,IACDiM,KAAOjM,EAAMiM,KAAOjM,EAAMiM,KAAK4D,QAAQ,SAAU,MAAQ,MACzD7P,EAAM8P,QAAU,EAAK7D,MAAQ,EAAKA,KAAKvK,OAAS,MAAK,EAAKuK,KAAO,EAAKA,KAAK8D,UAAU,EAAG,KAAO,QAHnF,E,qDAMT,IAAD,SAoBH/N,KAAKhC,MAlBPC,EAFK,EAELA,QACAgM,EAHK,EAGLA,KACA6D,EAJK,EAILA,OACAV,EALK,EAKLA,WACAC,EANK,EAMLA,cACAF,EAPK,EAOLA,MACA9F,EARK,EAQLA,SACAlD,EATK,EASLA,IACA6J,EAVK,EAULA,UACA5J,EAXK,EAWLA,YACA6J,EAZK,EAYLA,KACApJ,EAbK,EAaLA,KACAH,EAdK,EAcLA,SACAwJ,EAfK,EAeLA,cACA7L,EAhBK,EAgBLA,MACA8L,EAjBK,EAiBLA,cACAtF,EAlBK,EAkBLA,WACAC,EAnBK,EAmBLA,QAGF,SAASsF,EAAT,GAA6C,IAArB/G,EAAoB,EAApBA,SAAUgH,EAAU,EAAVA,QAChC,OAAOF,EAAgB,kBAAC,IAAD,CAAMjQ,UAAYmQ,EAAyB,GAAfpQ,EAAQoH,KAAWtB,GAAI,YAAciK,GACrF3G,GAEHA,EAGF,SAASiH,EAAT,GAAmC,IAAbjH,EAAY,EAAZA,SACpB,OAAOyG,EAASzG,EAChB,kBAAC,IAAD,CAAMrF,MAAO,CAACO,eAAgB,OAAQ5D,MAAO,WAAYoF,GAAI,SAAWI,GACrEkD,GAIL,OACE,yBAAKnJ,UAAWD,EAAQsQ,KAAO,KAAOT,EAAS7P,EAAQuQ,QAAU,IAAKxM,MAAO8L,EAAS,CAACrQ,OAAQ,EAAGqD,aAAc,GAAK,MAClHuG,EACD,yBAAKnJ,UAAWD,EAAQwQ,YACtB,kBAACL,EAAD,KAAe,yBAAKlQ,UAAWD,EAAQwG,MAAOxC,IAAKmC,EAAajC,IAAI,MACpE,yBAAKjE,UAAWD,EAAQyQ,MACtB,kBAACN,EAAD,KAAe,kBAACxC,GAAA,EAAD,CAAY5J,MAAO,CAAEkB,WAAY,OAAS9E,QAAQ,SAASyG,IAE1E,kBAAC+G,GAAA,EAAD,CAAY5J,MAAO,CAAEkB,WAAY,OAAS9E,QAAQ,SAChD,0BAAMF,UAAWD,EAAQ0Q,QACvB,kBAACP,EAAD,CAAeC,SAAO,GAAG,IAAM3J,IAFnC,WAGeuJ,EAHf,WAGyB,kBAAC,KAAD,CAAuBnQ,SAAS,QAAQI,UAAWD,EAAQ+N,OAHpF,KAG8FkC,KAKlG,kBAACtC,GAAA,EAAD,CAAY1N,UAAWD,EAAQoE,MAAOjE,QAAQ,MAC1C0P,EAASzL,EACX,kBAAC,IAAD,CAAM0B,GAAI,SAAWI,EAAKjG,UAAWD,EAAQoH,MAC1ChD,IAIJwG,GAAc,kBAACyF,EAAD,KACb,yBAAKpQ,UAAWD,EAAQ2Q,gBACtB,kBAAChG,GAAD,CACEG,SAAU+E,EACVjF,WAAYA,EACZC,QAASA,MAIf,kBAAC8C,GAAA,EAAD,CAAYiD,WAAS,EAAC7M,MAAO,CAAC8M,WAAY,aACvC9O,KAAKiK,MACJ6D,GAAU7D,GAAQA,EAAKvK,OAAS,KAAO,kBAAC,IAAD,CAAMqE,GAAI,SAAWI,EAAKjG,UAAWD,EAAQ8Q,UAA7C,cAK3C,kBAACnD,GAAA,EAAD,CAAY5J,MAAO,CAAEkB,WAAY,OAAS9E,QAAQ,SAChD,kBAACwF,EAAA,EAAD,CAAYpF,QAAS,kBAAM,EAAKR,MAAM+O,aAAY,IAAO/K,MAAO,CAACrD,MAAkB,IAAVwO,GAAgB,SAAUjP,UAAWD,EAAQ+Q,WAAYnL,KAAK,SAAQ,kBAAC,KAAD,OAAwC,KAAQuJ,EAC/L,0BAAMlP,UAAWD,EAAQgR,SACzB,kBAACrL,EAAA,EAAD,CAAYpF,QAAS,kBAAM,EAAKR,MAAM+O,aAAY,IAAQ/K,MAAO,CAACrD,OAAmB,IAAXwO,GAAiB,OAAQjP,UAAWD,EAAQ+Q,YAAY,kBAAC,KAAD,OAA0C,KAAQ3B,Q,GArF3K9M,aA4FJoM,MAAgBnM,aAjKhB,SAACzD,GAAD,MAAY,CACzB4R,OAAQ,CACNhQ,MAAO5B,EAAM2D,QAAQwO,QAAQzC,MAC7B,MAAO,CACL9N,MAAO,UACP4D,eAAgB,OAChB,UAAW,CACTA,eAAgB,eAItBkC,MAAO,CACL3D,aAAc,MACdW,MAAO,GACPJ,OAAQ,GACR9D,YAAaR,EAAMM,QAAQ,IAE7BkR,KAAM,CACJ/M,QAASzE,EAAMM,QAAQ,GACvB6L,cAAenM,EAAMM,QAAQ,KAC7B0D,gBAAiBhE,EAAM2D,QAAQM,WAAWC,MAC1CH,aAAc,GACd1D,UAAWL,EAAMM,QAAQ,GACzBoI,aAAc1I,EAAMM,QAAQ,IAE9BmR,QAAS,CACPW,aAAcpS,EAAM2D,QAAQgF,KAAKC,WAEnC8I,WAAY,CACVxR,QAAS,OACTC,WAAY,SACZY,SAAU,SACV2H,aAAc1I,EAAMM,QAAQ,MAE9B2O,KAAM,CACJvG,aAAc,UAEhBuJ,WAAY,CACVxN,QAAS,GAEXa,MAAO,CACLoD,aAAc1I,EAAMM,QAAQ,IAE9B4R,OAAQ,CACNzN,QAASzE,EAAMM,QAAQ,MAEzBgI,KAAM,CACJ1G,MAAO,UACP4D,eAAgB,QAElBwM,SAAU,CACR9L,WAAY,MACZtE,MAAO,UACP4D,eAAgB,OAChB,UAAW,CACTA,eAAgB,cAGpBqM,eAAe,aACbnR,OAAQV,EAAMM,QAAQ,EAAE,EAAE,EAAE,IAC3BN,EAAMa,YAAY8D,GAAG,MAAQ,CAC5BX,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1CpI,QAASzE,EAAMM,QAAQ,GACvByD,aAAc,GACd1D,UAAWL,EAAMM,QAAQ,QAiGAmD,CAAmBoN,IAAO,UC3J1CwB,G,4MAdbC,SAAW,IAAIC,sBAAqB,SAAAC,GAC9BA,EAAQ,GAAGC,iBACb,EAAKH,SAASI,UAAUF,EAAQ,GAAGjQ,QACnC,EAAKtB,MAAM0R,kB,uDAIL,IAAD,OACP,OACE,yBAAKC,IAAK,SAAAC,GAAUA,GAAI,EAAKP,SAASQ,QAAQD,U,GAV7BrP,a,SCQR,SAASuP,GAAelD,GAAoB,IACnDmD,EADkD,4MAEtD9Q,MAAQ,CAAE4G,MAAM,GAFsC,uDAI5C,IAAD,OACP,OACE,oCACE,kBAACkC,GAAA,EAAD,CACElC,KAAM7F,KAAKf,MAAM4G,KACjBC,QAAS,kBAAM,EAAKzG,SAAS,CAACwG,MAAM,MACpC,kBAACmC,GAAA,EAAD,6CACA,kBAACW,GAAA,EAAD,KACE,kBAAC,IAAD,CAAM5E,GAAG,YAAY/B,MAAO,CAACO,eAAgB,SAC3C,kBAAC0B,EAAA,EAAD,CAAQzF,QAAS,kBAAM,EAAKR,MAAMgS,oBAAoB,EAAKhS,MAAM2B,SAASC,WAAWjB,MAAM,WAA3F,aAIF,kBAAC,IAAD,CAAMoF,GAAG,SAAS/B,MAAO,CAACO,eAAgB,SACxC,kBAAC0B,EAAA,EAAD,CAAQzF,QAAS,kBAAM,EAAKR,MAAMgS,oBAAoB,EAAKhS,MAAM2B,SAASC,WAAWjB,MAAM,UAAU2J,WAAS,GAA9G,YAMN,kBAACsE,EAAD,iBACM5M,KAAKhC,MADX,CAEEwJ,MAAOxH,KAAKhC,MAAMwJ,MAClBmG,QAAS3N,KAAKhC,MAAM2P,QACpB5C,WAAY,kBAAM,EAAK1L,SAAS,CAAEwG,MAAM,aA5BM,GACjCtF,aA+CvB,OAAO+G,cAbiB,SAAArI,GACtB,MAAO,CACLuI,MAAOvI,EAAMsI,KAAKC,MAClBmG,QAAS1O,EAAMsI,KAAKhE,YAAYa,gBAIT,SAAA6L,GACzB,MAAO,CACLD,oBAAqB,SAACE,GAAD,OAAUD,EAAUE,KAA4BD,QAIlE5I,CAAgDxF,YAAYiO,ICnDrE,IAOMK,G,4MACJnR,MAAQ,CACNoR,MAAO,GACPhG,SAAS,EACTiG,SAAS,EACTC,WAAY,G,EAkCdC,aAAe,WACb,EAAKnR,UAAS,SAAA6H,GAAS,kCAClBA,GADkB,IAErBqJ,WAAYrJ,EAAUqJ,WAAa,EACnClG,SAAS,OAEX,EAAKoG,e,kEApCLzQ,KAAKyQ,gB,yCAGYC,GACb1Q,KAAKhC,MAAMwP,MAAQkD,EAAUlD,MAC/BxN,KAAKX,SAAS,CAAEgR,MAAO,GAAIhG,SAAS,EAAMiG,SAAS,EAAMC,WAAY,IACrEvQ,KAAKyQ,iB,oCAIM,IAAD,OACZnD,aAAM,CACJC,OAAQ,MACRC,IAAKxN,KAAKhC,MAAMwP,IAChBC,QAAS,CAAE,cAAiB,UAAYzN,KAAKhC,MAAMwJ,OACnDmJ,OAAQ,CAAEC,KAAM5Q,KAAKf,MAAMsR,cAE5BM,MAAK,SAAAC,GACCA,GACL,EAAKzR,UAAS,SAAA6H,GACZ,OAAO,2BACFA,GADL,IAEEmJ,MAAM,GAAD,oBAAMnJ,EAAUmJ,OAAhB,aAA0BS,EAAIpD,KAAK2C,QACxChG,SAAS,EACTiG,UAASQ,EAAIpD,KAAKqD,e,+BAehB,IAAD,SACmD/Q,KAAKhC,MAAxDC,EADA,EACAA,QAAS8M,EADT,EACSA,WAAYiG,EADrB,EACqBA,WAAY7C,EADjC,EACiCA,cAClCkC,EAAQW,EAAaA,EAAWC,OAAOjR,KAAKf,MAAMoR,OAASrQ,KAAKf,MAAMoR,MAC5E,OACE,oCACGA,EAAM3J,KAAI,SAAC6H,EAAM2C,GAChB,OAAO,kBAAC,GAAD,CACHpD,QAAQ,EACRnH,IAAK4H,EAAKpK,IACV6J,UAAWO,EAAK4C,OAAOhN,IACvBA,IAAKoK,EAAKpK,IACV4G,WAAYA,EACZ3G,YAAamK,EAAK4C,OAAO/M,YACzBS,KAAM0J,EAAK4C,OAAOtM,KAClBH,SAAU6J,EAAK4C,OAAOzM,SACtBwJ,cAAeK,EAAKL,cACpBb,cAAekB,EAAKlB,cACpBD,WAAYmB,EAAKnB,WACjBD,MAAOoB,EAAKpB,MACZ9K,MAAOkM,EAAKlM,MACZ4H,KAAMsE,EAAKtE,KACXgE,KAAMM,EAAK6C,eACXjD,cAAeA,EACftF,WAAY0F,EAAK1F,WACjBC,QAASyF,EAAKzF,SACVuH,EAAM3Q,SAAWwR,EAAQ,IAAO,EAAKjS,MAAMoL,SAAW,EAAKpL,MAAMqR,SAAW,kBAAC,GAAD,CAAUZ,YAAa,EAAKc,mBAGjHxQ,KAAKf,MAAMoL,SAAW,kBAACgH,EAAA,EAAD,CAAgBnT,UAAWD,EAAQoM,e,GA5E3C9J,aAkFRuP,MAActP,aAzFd,SAACzD,GAAD,MAAY,CACzBsN,QAAS,CACP5E,aAAc1I,EAAMM,QAAQ,OAuFHmD,CAAmB4P,KCxF1CkB,G,4MACJrS,MAAQ,CACN+R,WAAY,I,EAGdO,iBAAmB,SAACvG,GAClB,OAAOsC,aAAM,CACXC,OAAQ,OACRC,IAAK,SACLC,QAAS,CAAE,cAAiB,UAAY,EAAKzP,MAAMwJ,OACnDkG,KAAM1C,IAEP6F,MAAK,SAAAC,GACJA,EAAIpD,KAAKyD,OAAS,CAChBhN,IAAK2M,EAAIpD,KAAKyD,OACd/M,YAAa,EAAKpG,MAAMoG,YACxBS,KAAM,EAAK7G,MAAM6G,KACjBH,SAAU,EAAK1G,MAAM0G,UAEvB,EAAKrF,SAAS,CAAC2R,WAAW,CAAEF,EAAIpD,MAAP,oBAAgB,EAAKzO,MAAM+R,kBAErDQ,OAAM,SAAAC,GACL,OAAOC,QAAQC,OAAOF,O,uDAKxB,OACE,oCACE,kBAAC,GAAD,CACE1G,WAAY/K,KAAKhC,MAAM+M,WACvBE,cAAejL,KAAKuR,iBACpB/N,gBAAsC,OAArBxD,KAAKhC,MAAMwJ,MAC5BpD,YAAapE,KAAKhC,MAAMoG,cAE1B,kBAAC,GAAD,CACE4M,WAAYhR,KAAKf,MAAM+R,WACvBxD,IAAK,SACLM,QAAQ,EACRK,eAAe,S,GAvCN5N,aAqDJqR,gBAAkBtK,cART,SAAArI,GACtB,MAAO,CACLmF,YAAanF,EAAMsI,KAAKhE,YAAYa,YACpCS,KAAM5F,EAAMsI,KAAKhE,YAAYsB,KAC7BH,SAAUzF,EAAMsI,KAAKhE,YAAYmB,YAIJ4C,CAA4BwI,GAAawB,KAAS,KAAMhE,M,SCxDnFzQ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0H,MAAM,aACJpD,OAAQ,GACRI,MAAO,GACPX,aAAc,MACdvD,YAAaR,EAAMM,QAAQ,IAC1BN,EAAMa,YAAYC,KAAK,KAAO,CAC7BT,UAAW,EACXiE,OAAQ,GACRI,MAAO,GACPlE,YAAaR,EAAMM,QAAQ,MAG/BwU,MAAO,CACL5U,QAAS,OACTwI,aAAc1I,EAAMM,QAAQ,IAE9BG,YAAa,CACX8H,cAAe,aACflI,UAAWL,EAAMM,QAAQ,IACzB4F,WAAYlG,EAAMM,QAAQ,KAE5BK,QAAS,CACPT,QAAS,OACTE,eAAgB,gBAIL,SAAS2U,GAAT,GAAoH,IAA3F3R,EAA0F,EAA1FA,SAAUjB,EAAgF,EAAhFA,MAAO6S,EAAyE,EAAzEA,aAAcC,EAA2D,EAA3DA,cAAerE,EAA4C,EAA5CA,QAASrP,EAAmC,EAAnCA,SAAU4N,EAAyB,EAAzBA,MAAO+F,EAAkB,EAAlBA,eAExGhU,EAAUpB,KAEhB,OACE,yBAAKqB,UAAWD,EAAQ4T,OACtB,yBAAK3T,UAAWD,EAAQwG,MAAOxC,IAAK0L,GAAW7B,IAAqB3J,IAAI,KACxE,yBAAKH,MAAO,CAAEP,MAAO,SACnB,kBAACwK,GAAA,EAAD,CACEjK,MAAO,CAAClE,SAAU,OAClBoO,MAAOA,EACP5N,SAAUA,EACV+J,UAAW,IACXlI,SAAUA,EACVjB,MAAOA,EACPsJ,WAAS,EACTtI,YAAY,eACZgS,WAAS,IACX,yBAAKhU,UAAWD,EAAQP,SACrBsU,GACC,kBAAC/N,EAAA,EAAD,CACE3F,SAAUA,EACVE,QAASwT,EACT5T,QAAQ,YAAYK,kBAAgB,EACpCP,UAAWD,EAAQT,YACnB0G,KAAK,SALP,UAOF,kBAACD,EAAA,EAAD,CACE3F,SAAUA,EACVE,QAASyT,GAAkBF,EAC3B3T,QAAQ,YAAYK,kBAAgB,EACpCE,MAAM,YACNT,UAAWD,EAAQT,YACnB0G,KAAK,SANP,Y,8CCtDJrH,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCoV,SAAU,CACR1M,aAAc1I,EAAMM,QAAQ,GAC5BsB,MAAO5B,EAAM2D,QAAQwO,QAAQzC,MAC7BlK,eAAgB,OAChB,UAAW,CACTA,eAAgB,aAElBnB,OAAQ,UACRtD,SAAU,aAIC,SAASsU,GAAT,GAAyD,IAAnCC,EAAkC,EAAlCA,QAAShL,EAAyB,EAAzBA,SAAUtD,EAAe,EAAfA,GAAIvF,EAAW,EAAXA,QACpDP,EAAUpB,KAEhB,OACE,yBAAKmF,MAAO,CAACyD,aAAc,IACxBjH,EAAU,0BAAMN,UAAWD,EAAQkU,SAAU3T,QAASA,GAAW6I,GAClE,kBAAC,IAAD,CAAMtD,GAAIA,EAAI7F,UAAWD,EAAQkU,SAAUnQ,MAAO,CAAC/E,QAAS,OAAQC,WAAY,YAC5EmV,GAAW,kBAAC,KAAD,CAAyBvU,SAAS,UAC/C,8BAAOuJ,GACNgL,GAAW,kBAAC,KAAD,CAA4BvU,SAAS,YCpBzD,IAAMjB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCuV,YAAa,CACXrV,QAAS,OACTC,WAAY,aACZuI,aAAc1I,EAAMM,QAAQ,MAE9BoH,MAAM,aACJrH,UAAWL,EAAMM,QAAQ,GACzBE,YAAaR,EAAMM,QAAQ,GAC3BgE,OAAQ,GACRI,MAAO,GACPX,aAAc,OACb/D,EAAMa,YAAYC,KAAK,KAAO,CAC7BwD,OAAQ,GACRI,MAAO,KAGX8Q,YAAa,CACX,MAAO,CACL/N,UAAW,eAGfE,SAAU,CACRjH,OAAQ,cACRK,SAAU,QACVa,MAAO5B,EAAM2D,QAAQgF,KAAKC,WAE5B6M,OAAQ,CACN7T,MAAO5B,EAAM2D,QAAQgF,KAAKC,UAC1BlI,OAAQ,EACRK,SAAU,QACVmF,YAAalG,EAAMM,QAAQ,GAC3BD,WAAYL,EAAMM,QAAQ,KAE5BgI,KAAM,CACJ9C,eAAgB,OAChB5D,MAAO,UACP,UAAW,CACT4D,eAAgB,kBAKP,SAASkQ,GAAT,GAWA,IAVb/N,EAUY,EAVZA,SACAuF,EASY,EATZA,KACAgE,EAQY,EARZA,KACAb,EAOY,EAPZA,WACAC,EAMY,EANZA,cACAF,EAKY,EALZA,MACAJ,EAIY,EAJZA,YACA2F,EAGY,EAHZA,eACA1E,EAEY,EAFZA,UACA5J,EACY,EADZA,YACA9F,EAAY,EAAZA,SACML,EAAUpB,KAEhB,SAAS8V,EAAT,GAAqD,IAA9B3Q,EAA6B,EAA7BA,MAAOqF,EAAsB,EAAtBA,SAAUnJ,EAAY,EAAZA,UACtC,OAAO8P,EAAY,kBAAC,IAAD,CAAMjK,GAAI,YAAciK,EAAWhM,MAAOA,EAAO9D,UAAWA,GAC5EmJ,GACOA,EAGZ,OACE,yBAAKnJ,UAAWD,EAAQqU,YAAatQ,MAAO1D,GAAY,CAACmH,aAAc,IACrE,kBAACkN,EAAD,CAAc3Q,MAAO,CAAC/E,QAAS,QAASsF,eAAgB,SACtD,yBACErE,UAAWD,EAAQwG,MACnBxC,IAAKmC,EAAajC,IAAI,MAE1B,yBAAKjE,UAAWD,EAAQsU,aACtB,uBAAGrU,UAAWD,EAAQyG,UACpB,kBAACiO,EAAD,CAAczU,UAAWD,EAAQoH,MAAO,IAAMX,GAAyB,WAAUuJ,GAEnF,uBAAGjM,MAAO,CAACvE,OAAQ,IAAMwM,GACzB,yBAAK/L,UAAWD,EAAQuU,QACtB,kBAAC5O,EAAA,EAAD,CAAYtF,SAAUA,EAAU4F,KAAK,QAAQvF,MAAM,UAAUH,QAAS,kBAAMuO,GAAY,IAAO/K,MAAO,CAACrD,MAAkB,IAAVwO,GAAgB,UAAU,kBAAC,KAAD,CAAwBrP,SAAS,WAAwBsP,EAClM,kBAACxJ,EAAA,EAAD,CAAYtF,SAAUA,EAAU4F,KAAK,QAAQvF,MAAM,UAAUH,QAAS,kBAAMuO,GAAY,IAAQ/K,MAAO,CAACrD,OAAmB,IAAXwO,GAAiB,QAAQ,kBAAC,KAAD,CAA0BrP,SAAS,WAAwBuP,EACnMqF,GACC,kBAACzO,EAAA,EAAD,CACEtF,MAAM,YACNuF,KAAK,QACLlC,MAAO,CAAEsD,cAAe,cACxB9G,QAASkU,GAJX,YC/EZ,IAuBME,G,kDACJ,WAAY5U,GAAQ,IAAD,8BACjB,cAAMA,IA6BR6U,eAAiB,WACf,EAAKxT,SAAS,CAACgL,SAAS,IACxB,EAAKrM,MAAM8U,YAhCM,EAuCnBC,kBAAoB,WAClB,EAAK1T,UAAS,SAAA6H,GAAS,MAAK,CAAE8L,aAAc9L,EAAU8L,iBAxCrC,EA2CnBC,aAAe,WACb,EAAK5T,SAAS,CAAC6K,MAAM,KA5CJ,EA+CnBgJ,cAAgB,WACd,EAAK7T,SAAS,CAAC6K,MAAM,KAhDJ,EAmDnBiJ,eAAiB,WACe,KAA1B,EAAKlU,MAAMmU,aACf,EAAK/T,SAAS,CAACgL,SAAS,IACxB,EAAKgJ,WAAY,EACjB,EAAKrV,MAAMmV,eAAe,EAAKlU,MAAMmU,cAvDpB,EA0DnBE,eAAiB,SAAClU,GAChB,EAAKC,SAAS,CAAE+T,WAAYhU,EAAEE,OAAOJ,MAAOkL,SAAS,KAzDrD,EAAKnL,MAAQ,EAAKjB,MAAMuV,WAAW,EAAKvV,MAAMmG,IAAK,aACnD,EAAKlF,MAAMoL,SAAU,EACrB,EAAKpL,MAAMmL,SAAU,EACrB,EAAKiJ,WAAY,EALA,E,kEAQGG,EAAWC,GAAY,IAAD,OAC1C,OACED,EAAUnM,WAAarH,KAAKhC,MAAMqJ,UAClCrH,KAAKhC,MAAMC,UAAYuV,EAAUvV,SACjC+B,KAAKhC,MAAMoP,aAAeoG,EAAUpG,YACpCpN,KAAKhC,MAAMqP,gBAAkBmG,EAAUnG,eACvCrN,KAAKhC,MAAMmP,QAAUqG,EAAUrG,OAC/B3G,OAAOC,KAAKzG,KAAKf,OAAOyU,QAAO,SAACC,EAAKhN,GAAN,OAAegN,GAAO,EAAK1U,MAAM0H,KAAS8M,EAAU9M,MAAO,K,yCAI3E+J,GACbA,EAAUrJ,WAAarH,KAAKhC,MAAMqJ,WAChCrH,KAAKqT,WACPrT,KAAKX,SAAS,CAAC+K,SAAS,EAAO4I,aAAa,EAAOI,WAAY,GAAI/I,SAAS,IAC5ErK,KAAKqT,WAAY,GAEjBrT,KAAKX,SAAS,CAACgL,SAAS,O,6CAW5BrK,KAAKhC,MAAMuV,WAAWvT,KAAKhC,MAAMmG,IAAK,cAAenE,KAAKf,S,+BA0BlD,IAAD,EAace,KAAKhC,MAXxBoG,EAFK,EAELA,YACA2I,EAHK,EAGLA,YACAK,EAJK,EAILA,WACAC,EALK,EAKLA,cACAF,EANK,EAMLA,MACAa,EAPK,EAOLA,UACAtJ,EARK,EAQLA,SACAuJ,EATK,EASLA,KACAhE,EAVK,EAULA,KACAhM,EAXK,EAWLA,QACA6U,EAZK,EAYLA,SACAc,EAbK,EAaLA,eAEIvM,EAAWrH,KAAKhC,MAAMqJ,UAAYrH,KAAKhC,MAAMqJ,SAAS3H,OAAS,EAAIM,KAAKhC,MAAMqJ,SAAW,KAE/F,OACE,yBAAKrF,MAAO,CAAEP,MAAO,SAEnB,kBAACgR,GAAD,CACErF,WAAYA,EACZC,cAAeA,EACfF,MAAOA,EACPJ,YAAaA,EACb3I,YAAaA,EACb4J,UAAWA,EACXtJ,SAAUA,EACVuF,KAAMA,EACNgE,KAAMA,EACNyE,eAAgB1S,KAAK+S,oBAEvB,yBAAK/Q,MAAO,CAAE/E,QAAS,SAErB,yBAAKuB,QAASwB,KAAKf,MAAMiL,MAAQ7C,EAAWrH,KAAKkT,cAAgB,KAC/DhV,UAAWD,EAAQgR,OAAQjN,MAAQhC,KAAKf,MAAMiL,MAAQ7C,EAAY,CAACjG,OAAQ,WAAa,MACtFpB,KAAKf,MAAMiL,MAAQ7C,GAAY,yBAAKnJ,UAAWD,EAAQ4V,gBAG3D,yBAAK7R,MAAO,CAACsK,SAAU,IAEpBtM,KAAKf,MAAM+T,aACV,kBAAClB,GAAD,CACEG,eAAgBjS,KAAKhC,MAAMwJ,MAAQ,KAAOxH,KAAKhC,MAAM+M,WACrD4C,QAAS3N,KAAKhC,MAAM2P,QACpBrP,SAAU0B,KAAKf,MAAMoL,QACrBnL,MAAOc,KAAKf,MAAMmU,WAClBlH,MAAOlM,KAAKf,MAAMmL,SAAqC,KAA1BpK,KAAKf,MAAMmU,WACxCjT,SAAUH,KAAKsT,eACfvB,aAAc/R,KAAKmT,eACnBnB,cAAehS,KAAK+S,oBAGvB1L,IAAarH,KAAKf,MAAMiL,MAAQ,kBAACkI,GAAD,CAAY5T,QAASwB,KAAKiT,cAA1B,aAChCjT,KAAKf,MAAMiL,KAAO7C,EAAW,KAC7BuM,GAAkB5T,KAAKf,MAAMiL,MAAQ,kBAACkI,GAAD,CAAYrO,GAAI6P,EAAgBvB,SAAO,GAAvC,mBACrCS,GAAY9S,KAAKf,MAAMiL,MAAQ,kBAACkI,GAAD,CAAY5T,QAASwB,KAAK6S,gBAA1B,aAC/B7S,KAAKf,MAAMoL,SAAW,kBAACgH,EAAA,EAAD,CAAgBnT,UAAWD,EAAQoM,iB,GAxHhD9J,aAmIPoM,MAAgBnM,cA1JhB,SAACzD,GAAD,YAAY,CACzBkS,QAAM,GACJ7R,WAAYL,EAAMM,QAAQ,KAC1BoI,aAAc1I,EAAMM,QAAQ,GAC5ByW,SAAU,IAHN,cAIH/W,EAAMa,YAAYC,KAAK,KAAO,CAC7BiW,SAAU,KALR,cAOJ,UAAW,CACT,QAAS,CACP/S,gBAAiBhE,EAAM2D,QAAQwO,QAAQ6E,QATvC,GAaNF,aAAc,CACZ9S,gBAAiBhE,EAAM2D,QAAQwO,QAAQzC,MACvCpL,OAAQ,OACR5D,OAAQ,SACRgE,MAAO,GAET4I,QAAS,CAAC5E,aAAc1I,EAAMM,QAAQ,OAsITmD,CAAmBoS,IAAU,aC/JvCoB,G,4MACnBC,aAAe,CACb/U,MAAO,GACPmL,SAAS,EACTD,SAAS,G,EAEXnL,MAAQ,EAAKgV,a,EAMbX,eAAiB,SAAClU,GAChB,EAAKC,SAAS,CAAEH,MAAOE,EAAEE,OAAOJ,MAAOkL,SAAS,K,EAGlD+I,eAAiB,WACf,GAAyB,KAArB,EAAKlU,MAAMC,MAAf,CACA,GAAI,EAAKlB,MAAMiU,eAAgB,OAAO,EAAKjU,MAAMiU,iBACjD,EAAK5S,SAAS,CAAEgL,SAAS,IACzB,EAAKrM,MAAMmV,eAAe,EAAKlU,MAAMC,S,iEAZpBwR,GACbA,EAAUwD,eAAiBlU,KAAKhC,MAAMkW,cAAclU,KAAKX,SAASW,KAAKiU,gB,+BAe3E,OAAO,kBAACnC,GAAD,CACLnE,QAAS3N,KAAKhC,MAAM2P,QACpBrP,SAAU0B,KAAKf,MAAMoL,QACrBnL,MAAOc,KAAKf,MAAMC,MAClBgN,MAAOlM,KAAKf,MAAMmL,SAAgC,KAArBpK,KAAKf,MAAMC,MACxCiB,SAAUH,KAAKsT,eACfvB,aAAc/R,KAAKmT,qB,GA9B0B5S,aCiB7C4T,G,kDACJ,WAAYnW,GAAQ,IAAD,8BACjB,cAAMA,IAoCRoW,kBAAoB,SAACC,GACnB,IADoC,EAChCC,EAAe,EAAKA,aADY,eAEhBD,GAFgB,IAEpC,2BAAkC,CAAC,IAA1BE,EAAyB,QAC5B,EAAKC,kBAAkBD,EAAQpQ,OAC/BmQ,EAAaC,EAAQE,YACvBH,EAAaC,EAAQE,WAAWpN,SAAStH,KAAKwU,GAC9CD,EAAaC,EAAQE,WAAWC,kBAEhCJ,EAAaC,EAAQE,WAAa,CAAEpN,SAAU,CAACkN,GAAUG,eAAgB,KARzC,gCArCnB,EAkDnBvB,eAAiB,SAACwB,EAAOF,EAAWxK,GAClCqD,aAAO,CACLC,OAAQ,OACRC,IAAK,YACLC,QAAS,CAAE,cAAiB,UAAY,EAAKzP,MAAMwJ,OACnDkG,KAAM,CACJkH,QAAS,EAAK5W,MAAM6W,OACpBJ,YACAxK,OACA0K,WAED9D,MAAK,SAAAC,GACN,EAAK0D,kBAAkB1D,EAAIpD,KAAKvJ,MAAO,EACvC,EAAKmQ,aAAaG,GAClB,EAAKH,aAAaG,GAAWpN,SAASyN,QAAQhE,EAAIpD,MAClD,EAAK4G,aAAaG,GAAa,CAAEpN,SAAU,CAACyJ,EAAIpD,OAChD,EAAKrO,UAAS,SAAA6H,GAAS,MAAK,CAACgN,cAAehN,EAAUgN,oBACrD1C,OAAM,SAAAC,GACP,EAAK6C,aAAaG,GAClB,EAAKH,aAAaG,GAAWpN,SAA7B,aAA4C,EAAKiN,aAAaG,GAAWpN,UACzE,EAAKiN,aAAaG,GAAa,CAAEpN,SAAU,IAC3C,EAAKhI,UAAS,SAAA6H,GAAS,MAAK,CAACgN,cAAehN,EAAUgN,iBACtDa,QAAQC,IAAIvD,OAxEG,EA4EnBwD,YAAc,SAACC,GACb,OAAOA,EAASxO,KAAI,SAAA6N,GAElB,IAAIG,EAAiB,EACrB,IAAMA,EAAiB,EAAKJ,aAAaC,EAAQpQ,KAAKuQ,gBAAkB,EAAI,UAE5E,IAAIrN,EAAW,EAAKiN,aAAaC,EAAQpQ,KACrC,EAAK8Q,YAAY,EAAKX,aAAaC,EAAQpQ,KAAKkD,UAAY,KAE5D8N,EAAeZ,EAAQI,QAAU,EAAKS,gBAAoBb,EAAQI,MAAQ,EAAKS,eAAiB,EAAKpX,MAAMqX,WAAc,EACzHvC,EAAY4B,EAAiBH,EAAQe,aACnCC,EAAazC,IAAaqC,GAAeZ,EAAQI,MAAQ,EAAI,EAAKS,eAAiB,EAAKpX,MAAMqX,SAAW,KAE/G,OAAO,kBAAC,GAAD,CACL1O,IAAK4N,EAAQpQ,IACbiJ,WAAYmH,EAAQnH,WACpBC,cAAekH,EAAQlH,cACvBF,MAAOoH,EAAQpH,MACf/I,YAAamQ,EAAQpD,OAAO/M,YAC5B4J,UAAWuG,EAAQpD,OAAOhN,IAC1BO,SAAU6P,EAAQpD,OAAOzM,SACzBqG,WAAY,EAAK/M,MAAM+M,WACvBkD,KAAMsG,EAAQnD,eACd+B,eAAgB,EAAKA,eAAe/G,KAApB,gBAA+BmI,EAAQI,MAAQ,EAAGJ,EAAQpQ,KAC1EA,IAAKoQ,EAAQpQ,IACb8F,KAAMsK,EAAQtK,KACdsJ,WAAY,EAAKiC,kBACjB5B,eAAiBuB,GAAerC,EAAf,gBAAmC,EAAK9U,MAAM6W,OAA9C,YAAwDN,EAAQpQ,KAAQ,KACzF2O,SAAUyC,EAAa,kBAAM,EAAKvX,MAAM6U,eAAe0B,EAAQpQ,IAAKuQ,EAAgBa,IAAc,MAC/FlO,OAzGU,EA8GnBmO,kBAAoB,SAACC,EAAWC,EAAQhI,GACtC,OAAQgI,GACN,IAAK,YACH,OAAI,EAAKC,aAAaF,GAAmB,EAAKE,aAAaF,GACpD,CAAEzC,aAAa,EAAO9I,MAAM,EAAMkJ,WAAY,IAEvD,IAAK,cACH,OAAO,EAAKuC,aAAaF,GAAa/H,EAExC,QACE,MAAO,CAAEsF,aAAa,EAAO9I,MAAM,EAAMkJ,WAAY,MAtHzD,EAAKwC,eAAe5X,EAAMkX,UACtBlX,EAAMkX,UAAU,EAAKd,kBAAkBpW,EAAMkX,UACjD,EAAKjW,MAAQ,CAAEiV,cAAc,GAJZ,E,2DAOJgB,GAEblV,KAAK2V,aAAe,GAKpB3V,KAAKsU,aAAe,GAGpBtU,KAAKwU,kBAAoB,GACzBxU,KAAKoV,cAAgBF,EAAS,GAAKA,EAAS,GAAGP,MAAQ,EACvD3U,KAAK6V,KAAOX,EAAS,GAAKA,EAAS,GAAGT,UAAYzU,KAAKhC,MAAM6W,S,4CAGzCrB,GAEpB,OAAIA,EAAUsC,SAAW9V,KAAKhC,MAAM8X,QAClC9V,KAAK4V,eAAepC,EAAU0B,UAC9BlV,KAAKoU,kBAAkBZ,EAAU0B,WAC1B,GAGL1B,EAAU0B,WAAalV,KAAKhC,MAAMkX,WACpClV,KAAKoU,kBAAkBZ,EAAU0B,WAC1B,K,+BA4FD,IAAD,OACP,OACE,yBAAKhX,UAAW8B,KAAKhC,MAAMC,QAAQ8X,gBAE/B/V,KAAKhC,MAAM8X,SAAW9V,KAAKhC,MAAM6W,OACjC,kBAAC,GAAD,CACE5C,eAAgBjS,KAAKhC,MAAMwJ,MAAQ,KAAOxH,KAAKhC,MAAM+M,WACrD4C,QAAS3N,KAAKhC,MAAM2P,QACpBuG,aAAclU,KAAKf,MAAMiV,aACzBf,eAAgBnT,KAAKmT,eAAe/G,KAAKpM,KAAM,EAAGA,KAAKhC,MAAM6W,UAE/D,yBAAK3W,UAAW8B,KAAKhC,MAAMC,QAAQgR,QACjC,kBAACmD,GAAD,CAAYrO,GAAI,SAAW/D,KAAKhC,MAAM6W,QAAtC,2BAGH7U,KAAKsU,aAAatU,KAAK6V,OAAS7V,KAAKiV,YAAYjV,KAAKsU,aAAatU,KAAK6V,MAAMxO,UAE9ErH,KAAK6V,OAAS7V,KAAKhC,MAAM6W,QAAU7U,KAAKsU,aAAatU,KAAK6V,OAAS7V,KAAKsU,aAAatU,KAAK6V,MAAMnB,eAAiB1U,KAAKhC,MAAMgY,mBAC3H,kBAAC5D,GAAD,CAAY5T,QAAS,kBAAM,EAAKR,MAAM6U,eAAe,EAAKgD,KAAM,EAAKvB,aAAa,EAAKuB,MAAMnB,eAAgB,KAA7G,kB,GA/IanU,aAwJRC,gBArKA,SAACzD,GAAD,MAAY,CACzBgZ,eAAe,aACbvU,QAASzE,EAAMM,QAAQ,GACvB0D,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,KACzC7M,EAAMa,YAAYC,KAAK,KAAO,CAC7B2D,QAASzE,EAAMM,QAAQ,OAG3B4R,OAAQ,CACNxJ,aAAc1I,EAAMM,QAAQ,OA4JjBmD,CAAmB2T,I,UCxK5BtX,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCkZ,SAAU,CACR3R,SAAU,WACVvD,gBAAiB,wBACjB4I,OAAQ,IACRxE,IAAK,EACLrE,aAAc,GACdqI,KAAM,EACN1H,MAAO,OACPJ,OAAQ,OACRM,WAAY,eACZuU,QAAS,GAEXC,KAAM,CACJD,QAAS,EACTE,cAAe,QAEjBC,cAAe,CACb/R,SAAU,QACV6E,KAAM,mBACNhE,IAAK,wBAIM,SAASmR,GAAT,GAAiC,IAATpM,EAAQ,EAARA,KAC/BjM,EAAUpB,KAEhB,OACE,yBAAKqB,UAAWD,EAAQgY,UAAY/L,EAAO,GAAKjM,EAAQkY,OACrDjM,GAAQ,kBAACqM,GAAA,EAAD,CAAkBrY,UAAWD,EAAQoY,iBCxBpD,IAaMG,G,4MACJvX,MAAQ,CACNwX,gBAAgB,EAChBpM,SAAS,EACTkE,KAAM,GACN2G,SAAU,GACVO,UAAW,EAAKzX,MAAM6B,MAAM8Q,OAAO8E,W,EAErCJ,SAAW,E,EACXqB,MAAQ,E,EAkDR7D,eAAiB,SAAC4C,EAAWkB,EAAYpB,EAAYqB,GACnD,EAAKC,YAAYpB,EAAWkB,EAAYpB,EAAYqB,GACnD/F,MAAK,SAAAC,GACJ,EAAKzR,SAAS,CAAE6V,SAAUpE,EAAIpD,KAAKwH,cAEpC1D,OAAM,SAAAC,GACLsD,QAAQC,IAAIvD,O,iEAtDGf,GAAY,IAAD,OAC5B,GAAIA,EAAU7Q,MAAM8Q,OAAO8E,YAAczV,KAAKhC,MAAM6B,MAAM8Q,OAAO8E,UAAW,CAC1EzV,KAAKX,SAAS,CAAEgL,SAAS,IACzB,IAAMyL,EAAS9V,KAAKhC,MAAM6B,MAAM8Q,OAAO8E,WAAazV,KAAKhC,MAAM6B,MAAM8Q,OAAOkE,OAC5E7U,KAAK6W,YAAYf,EAAQ,EAAG,IAAG9V,KAAKhC,MAAM6B,MAAM8Q,OAAO8E,WACtD5E,MAAK,SAAAC,GACJ,EAAKzR,SAAS,CACZ6V,SAAUpE,EAAIpD,KAAKwH,SACnBO,UAAW,EAAKzX,MAAM6B,MAAM8Q,OAAO8E,UACnCpL,SAAS,OAGZmH,OAAM,SAAAC,GAAQsD,QAAQC,IAAIvD,S,0CAIV,IAAD,OACZqF,GAAgB9W,KAAKhC,MAAM6B,MAAM8Q,OAAO8E,UAC9C/D,QAAQqF,IAAI,CACVzJ,aAAM,CACJC,OAAQ,MACRC,IAAK,UAAYxN,KAAKhC,MAAM6B,MAAM8Q,OAAOkE,OACzCpH,QAAS,CAAE,cAAiB,UAAYzN,KAAKhC,MAAMwJ,OACnDmJ,OAAQ,CAAEmG,eAAcJ,MAAO1W,KAAK0W,MAAO/B,MAAO3U,KAAKqV,YAEzDyB,EAAe,KAAO9W,KAAK6W,YAAY7W,KAAKhC,MAAM6B,MAAM8Q,OAAO8E,UAAW,EAAG,GAAG,KAEjF5E,MAAK,SAAAmG,GACJ,EAAK3X,SAAS,CACZoX,gBAAgB,EAChBlI,KAAMyI,EAAW,GAAGtJ,KAAKa,KACzB2G,SAAU8B,EAAWF,EAAe,EAAI,GAAGpJ,KAAKwH,cAGnD1D,OAAM,SAAAC,GACLsD,QAAQC,IAAIvD,Q,kCAIJgE,EAAWkB,EAAYpB,EAAYqB,GAC7C,OAAOtJ,aAAO,CACZC,OAAQ,MACRC,IAAK,YAAciI,EACnBhI,QAAS,CAAE,cAAiB,UAAYzN,KAAKhC,MAAMwJ,OACnDmJ,OAAQ,CAAEgG,aAAYD,MAAO1W,KAAK0W,MAAOnB,aAAYqB,aAAYjC,MAAO3U,KAAKqV,c,+BAe/E,IAAMpX,EAAU+B,KAAKhC,MAAMC,QACrBsQ,EAAOvO,KAAKf,MAAMsP,KACxB,OACEvO,KAAKf,MAAMwX,eAAiB,kBAACpF,EAAA,EAAD,CAAgBnT,UAAWD,EAAQoM,UAC/D,yBAAKnM,UAAWD,EAAQgZ,YACtB,kBAACX,GAAD,CAAcpM,KAAMlK,KAAKf,MAAMoL,UAC/B,kBAAC,GAAD,CACElG,IAAKoK,EAAKpK,IACV4G,WAAY/K,KAAKhC,MAAM+M,WACvB+C,QAAQ,EACRE,UAAWO,EAAK4C,OAAOhN,IACvBC,YAAamK,EAAK4C,OAAO/M,YACzBS,KAAM0J,EAAK4C,OAAOtM,KAClBH,SAAU6J,EAAK4C,OAAOzM,SACtBwJ,cAAeK,EAAKL,cACpBb,cAAekB,EAAKlB,cACpBD,WAAYmB,EAAKnB,WACjB/K,MAAOkM,EAAKlM,MACZ4H,KAAMsE,EAAKtE,KACXkD,MAAOoB,EAAKpB,MACZc,KAAMM,EAAK6C,eACXvI,WAAY0F,EAAK1F,WACjBC,QAASyF,EAAKzF,QACdqF,eAAe,IACjB,kBAAC,GAAD,CACE2H,OAAQ9V,KAAKf,MAAMwW,WAAalH,EAAKpK,IACrCwJ,QAAS3N,KAAKhC,MAAM2P,QACpBnG,MAAOxH,KAAKhC,MAAMwJ,MAClBuD,WAAY/K,KAAKhC,MAAM+M,WACvBiL,kBAAmBzH,EAAK+G,aACxBT,OAAQ7U,KAAKf,MAAMsP,KAAKpK,IACxBkR,SAAUrV,KAAKqV,SACfH,SAAUlV,KAAKf,MAAMiW,SACrBrC,eAAgB7S,KAAK6S,sB,GAvGNtS,aA8GVqR,gBAAkB9B,GAAa0G,KA3H/B,SAACzZ,GAAD,MAAY,CACzBsN,QAAS,CACPjN,UAAWL,EAAMM,QAAQ,IAE3B4Z,WAAY,CACV7Z,UAAWL,EAAMM,QAAQ,GACzBoI,aAAc1I,EAAMM,QAAQ,GAC5ByD,aAAc,GACdD,SAAU,SACVyD,SAAU,eAkHsDgJ,MC/H9DzQ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCma,YAAa,CACXja,QAAS,OACTU,SAAU,OACV8D,MAAO,OACP,MAAO,CACL6K,SAAU,EACV/J,eAAgB,OAChB+B,SAAU,YAEZ,WAAY,CACV7C,MAAO,OACPX,aAAc,GAEhB,SAAU,CACRnC,MAA8B,SAAvB5B,EAAM2D,QAAQC,KAAkB,UAAY,YAGvDwW,UAAW,CACT7S,SAAU,WACVC,OAAQ,EACRxD,gBAAiBhE,EAAM2D,QAAQwO,QAAQ6E,KACvC1S,OAAQ,EACRI,MAAO,OACP2V,UAAW,YACXzV,WAAY,oBAEd0V,OAAQ,CACN,QAAS,CACPD,UAAW,aAEb,SAAU,CACRzY,MAA8B,SAAvB5B,EAAM2D,QAAQC,KAAkB,QAAU,cAKxC,SAAS2W,GAAT,GAAoC,IAAbC,EAAY,EAAZA,SAC9BtZ,EAAUpB,KAChB,OACE,yBAAKqB,UAAWD,EAAQiZ,aACrBK,EAAS7Q,KAAI,SAAA8Q,GAAO,OACnB,kBAAC,IAAD,CACE7Q,IAAK6Q,EAAQnV,MACboV,gBAAiBxZ,EAAQoZ,OACzBtT,GAAIyT,EAAQzT,GACZ2T,OAAK,GAAC,kBAACzT,EAAA,EAAD,KAASuT,EAAQnV,OAAe,yBAAKnE,UAAWD,EAAQkZ,iB,iCCJzDQ,GAxCU,SAAE/K,GAAuB,IAC1CgL,EADyC,kDAE7C,WAAY5Z,GAAQ,IAAD,8BACjB,cAAMA,IAMR6Z,aAAe,WACb,IAAK,EAAK7Z,MAAMwJ,MAAO,OAAO,EAAKxJ,MAAM+M,aACzC,EAAK1L,UAAS,SAAA6H,GAAS,MAAK,CAAE4Q,UAAW5Q,EAAU4Q,aACnDxK,aAAM,CACJC,OAAQ,OACRC,IAAK,UAAY,EAAKxP,MAAM+Z,OAC5BtK,QAAS,CAAE,cAAiB,UAAY,EAAKzP,MAAMwJ,UAXrD,EAAKvI,MAAQ,CACX6Y,SAAU9Z,EAAM8Z,WAAY,GAHb,EAF0B,qDAoB3C,OACE,kBAAClL,EAAD,iBACM5M,KAAKhC,MADX,CAEEga,oBAAqBhY,KAAKhC,MAAM+Z,SAAW/X,KAAKhC,MAAMia,cACtDH,SAAU9X,KAAKf,MAAM6Y,SACrBD,aAAc7X,KAAK6X,oBAzBoB,GACpBtX,aAoC3B,OAAO+G,cAPiB,SAAArI,GACtB,MAAO,CACLuI,MAAOvI,EAAMsI,KAAKC,MAClByQ,cAAehZ,EAAMsI,KAAKhE,YAActE,EAAMsI,KAAKhE,YAAYY,IAAM,QAIlEmD,CAA4BsQ,ICnC/B/a,GAAYC,aAAW,SAACC,GAAD,oBAC3BsH,SAAU,CACRpH,QAAS,OACTC,WAAY,aACZ+F,WAAYlG,EAAMM,QAAQ,GAC1BE,YAAaR,EAAMM,QAAQ,IAE7BoH,MAAO,CACLH,SAAU,WACVa,KAAM,GACN9D,OAAQ,IACRI,MAAO,IACPX,aAAc,MACdvD,YAAaR,EAAMM,QAAQ,MAE7BqQ,KAAM,CACJ,MAAO,CACLjQ,OAAQ,QACRkB,MAAO5B,EAAM2D,QAAQgF,KAAKC,YAG9BuS,SAAU,CACRC,UAAW,SACXlV,WAAY,SAEblG,EAAMa,YAAYC,KAAK,MAAQ,CAC9BwG,SAAU,CACRqI,cAAe,SACfxP,WAAY,SACZuI,aAAc1I,EAAMM,QAAQ,IAE9B6a,SAAU,CACRza,OAAQ,QAEViQ,KAAM,CACJ7D,UAAW,UAEbpF,MAAO,CACLhH,OAAQ,EACRgI,aAAc1I,EAAMM,QAAQ,SAgDnByS,UAAc6H,IA3C7B,YAUkB,IAThBI,EASe,EATfA,OACAlT,EAQe,EARfA,KACAH,EAOe,EAPfA,SACAN,EAMe,EANfA,YACAiC,EAKe,EALfA,WACA+R,EAIe,EAJfA,aACAC,EAGe,EAHfA,YACAJ,EAEe,EAFfA,cACAH,EACe,EADfA,SACAD,EAAe,EAAfA,aAEM5Z,EAAUpB,KAEhB,OACE,oCACE,kBAACsJ,EAAA,EAAD,CAAYC,cAAeC,IAE3B,yBAAKnI,UAAWD,EAAQoG,UACtB,yBAAKnG,UAAWD,EAAQwG,MAAOxC,IAAKmC,EAAajC,IAAI,KACrD,yBAAKjE,UAAWD,EAAQyP,MACtB,uBAAG1L,MAAO,CAAElE,SAAU,UAAY+G,GAClC,2BAAI,IAAMH,GACV,uBAAG1C,MAAO,CAAEyD,aAAc,UAAY,UAAY6S,YAAYF,IAC9D,uBAAGpW,MAAO,CAAEyD,aAAc,QAAU4S,IAEpCJ,IAAkBF,EAClB,kBAAC,IAAD,CAAM7Z,UAAWD,EAAQia,SAAUnU,GAAG,aACpC,kBAACH,EAAA,EAAD,CAAaE,aAAW,UACpB,kBAAC,KAAD,QAIN,kBAACG,EAAA,EAAD,CAAQ/F,UAAWD,EAAQia,SACzB9Z,QAAQ,YAAYO,MAAOmZ,EAAW,UAAW,UAAWtZ,QAASqZ,GACpEC,EAAW,YAAc,gBClFhCjb,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCwb,SAAU,CACRtb,QAAS,OACTC,WAAY,SACZuE,MAAO,OACPD,QAASzE,EAAMM,QAAQ,GACvB8R,aAAc,cAAuC,SAAvBpS,EAAM2D,QAAQC,KAAkB,QAAU,YAE1E8D,MAAO,CACLpD,OAAQ,GACRI,MAAO,GACPX,aAAc,OAEhB0X,WAAY,CACVlM,SAAU,EACV7O,OAAQ,KAAOV,EAAMM,QAAQ,GAAK,UA4BvBsa,WAxBf,YAAyI,IAArHnJ,EAAoH,EAApHA,QAASnH,EAA2G,EAA3GA,SAAU0Q,EAAiG,EAAjGA,OAAQ3T,EAAyF,EAAzFA,YAAaS,EAA4E,EAA5EA,KAAMH,EAAsE,EAAtEA,SAAU2T,EAA4D,EAA5DA,YAAaP,EAA+C,EAA/CA,SAAUD,EAAqC,EAArCA,aAAcG,EAAuB,EAAvBA,oBACzG/Z,EAAUpB,KAChB,OACE,yBAAKqB,UAAWD,EAAQsa,SAAUvW,MAAOwM,EAAU,KAAO,CAAEW,aAAc,SACvE9H,EACD,kBAAC,IAAD,CAAMtD,GAAI,YAAcgU,GACtB,yBAAK7Z,UAAWD,EAAQwG,MAAOxC,IAAKmC,EAAajC,IAAI,MAEvD,yBAAKjE,UAAWD,EAAQua,YACtB,kBAAC5M,GAAA,EAAD,CAAY5J,MAAO,CAACwC,UAAW,cAAe7F,MAAM,eAClD,kBAAC,IAAD,CAAMqD,MAAO,CAACO,eAAgB,OAAQ5D,MAAO,WAAYoF,GAAI,YAAcgU,GACzE,gCAASlT,GADX,UAC8BH,IAGhC,kBAACkH,GAAA,EAAD,CAAY5J,MAAO,CAACwC,UAAW,cAAe7F,MAAM,iBAAiB0Z,IAErEL,GACA,kBAAC/T,EAAA,EAAD,CAAQ7F,QAAQ,YAAYO,MAAOmZ,EAAW,UAAW,UAAWtZ,QAASqZ,GAC1EC,EAAW,YAAc,cC7B9BW,G,4MACJxZ,MAAQ,CACNyZ,MAAO,GACPrO,SAAS,EACTiG,SAAS,EACTC,WAAY,G,EAiCdC,aAAe,WACb,EAAKnR,UAAS,SAAA6H,GAAS,kCAClBA,GADkB,IAErBqJ,WAAYrJ,EAAUqJ,WAAa,EACnClG,SAAS,OAEX,EAAKoG,e,kEAnCLzQ,KAAKyQ,gB,yCAGYC,GACb1Q,KAAKhC,MAAMwP,MAAQkD,EAAUlD,MAC/BxN,KAAKX,SAAS,CAAEqZ,MAAO,GAAIrO,SAAS,EAAMiG,SAAS,EAAMC,WAAY,IACrEvQ,KAAKyQ,iB,oCAIM,IAAD,OACZnD,aAAM,CACJC,OAAQ,MACRC,IAAKxN,KAAKhC,MAAMwP,IAChBC,QAAS,CAAEkL,cAAc,UAAD,OAAY3Y,KAAKhC,MAAMwJ,QAC/CmJ,OAAQ,CAAEC,KAAM5Q,KAAKf,MAAMsR,cAC1BM,MAAK,SAAAC,GACDA,GACL,EAAKzR,UAAS,SAAA6H,GACZ,OAAO,2BACFA,GADL,IAEEwR,MAAM,GAAD,oBAAMxR,EAAUwR,OAAhB,aAA0B5H,EAAIpD,KAAKgL,QACxCrO,SAAS,EACTiG,UAASQ,EAAIpD,KAAKqD,e,+BAehB,IAAD,SACuB/Q,KAAKhC,MAA5BC,EADA,EACAA,QAAS8M,EADT,EACSA,WAChB,OACE,yBAAK7M,UAAWD,EAAQya,OACrB1Y,KAAKf,MAAMyZ,MAAMhS,KAAI,SAACkS,EAAM1H,GAAP,OACpB,kBAAC,GAAD,CACEvK,IAAKiS,EAAKzU,IACV4T,OAAQa,EAAKzU,IACbqK,UAAW,EAAKvP,MAAMyZ,MAAMhZ,SAAWwR,EAAQ,GAC/CxM,SAAUkU,EAAKlU,SACfoT,SAAUc,EAAKd,SACf/M,WAAYA,EACZlG,KAAM+T,EAAK/T,KACXT,YAAawU,EAAKxU,YAClBiU,YAAaO,EAAKP,aAChB,EAAKpZ,MAAMyZ,MAAMhZ,SAAWwR,EAAQ,IAAO,EAAKjS,MAAMoL,SAAW,EAAKpL,MAAMqR,SAAW,kBAAC,GAAD,CAAUZ,YAAa,EAAKc,mBAIxHxQ,KAAKf,MAAMoL,SAAW,kBAACgH,EAAA,EAAD,W,GAlER9Q,aAwERuP,MAActP,aA/Ed,SAACzD,GAAD,MAAY,CACzB2b,MAAO,CACL3X,gBAAiBhE,EAAM2D,QAAQM,WAAWC,UA6EjBT,CAAmBiY,KChF1C5b,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC4R,OAAQ,CACNhQ,MAAO5B,EAAM2D,QAAQwO,QAAQzC,MAC7BlK,eAAgB,OAChB,UAAW,CACTnB,OAAQ,UACRmB,eAAgB,cAGpBkC,MAAO,CACL3D,aAAc,MACdW,MAAO,GACPJ,OAAQ,GACR9D,YAAaR,EAAMM,QAAQ,IAE7BoR,WAAY,CACVxR,QAAS,OACTC,WAAY,SACZY,SAAU,UAEZkO,KAAM,CACJvG,aAAc,UAEhBoT,iBAAkB,CAChBzb,UAAWL,EAAMM,QAAQ,GACzB4F,WAAYlG,EAAMM,QAAQ,GAC1BJ,QAAS,OACTC,WAAY,UAEd+R,OAAQ,CACN6E,SAAU,GACVzS,OAAQ,GACRpE,QAAS,OACTC,WAAY,SACZ2M,UAAW,OACXiP,WAAY,cAAgB/b,EAAM2D,QAAQgF,KAAKC,WAEjDoT,eAAgB,CACdhY,gBAAiBhE,EAAM2D,QAAQM,WAAWC,MAC1CO,QAAS,GACT2N,aAAc,cAAuC,SAAvBpS,EAAM2D,QAAQC,KAAkB,QAAU,gBAI7D,SAASqY,GAAT,GAkBX,IAjBFpE,EAiBC,EAjBDA,QACAqE,EAgBC,EAhBDA,WACAC,EAeC,EAfDA,eACAC,EAcC,EAdDA,wBACAC,EAaC,EAbDA,qBACAC,EAYC,EAZDA,WACAnL,EAWC,EAXDA,cACAoL,EAUC,EAVDA,UACA5U,EASC,EATDA,SACAuF,EAQC,EARDA,KACAgE,EAOC,EAPDA,KACAb,EAMC,EANDA,WACAC,EAKC,EALDA,cACAF,EAIC,EAJDA,MACAwH,EAGC,EAHDA,MACAvQ,EAEC,EAFDA,YACAiD,EACC,EADDA,SAGMpJ,EAAUpB,KAEhB,SAASuR,EAAcpQ,GACrB,OAAO,kBAAC,IAAD,CAAME,UAAWF,EAAME,WAAaD,EAAQoH,KAAMtB,GAAI,YAAcmV,GACxElb,EAAMqJ,UAMX,IAFA,IAAMkS,EAAU,GAERC,EAAI,EAAGA,GAAK7E,EAAQ,EAAI,EAAIA,GAAQ6E,IAC1CD,EAAQxZ,KACN,yBAAK4G,IAAK6S,EAAGtb,UAAWD,EAAQgR,UAMpC,OAFI0F,EAAQ,GAAG4E,EAAQzE,QAAQ,yBAAK5W,UAAWD,EAAQgR,OAAQtI,IAAK,EAAG3E,MAAO,CAAC8W,WAAY,SAA5D,WAG7B,yBAAK5a,UAAWD,EAAQ8a,gBACrB1R,EACD,yBAAKnJ,UAAWD,EAAQwQ,YACtB,kBAACL,EAAD,KAAe,yBAAKlQ,UAAWD,EAAQwG,MAAOxC,IAAKkX,EAAyBhX,IAAI,MAChF,yBAAKjE,UAAWD,EAAQyQ,MACtB,kBAAC9C,GAAA,EAAD,CAAY5J,MAAO,CAAEkB,WAAY,MAAO9F,WAAY,GAAKgB,QAAQ,SAC/D,kBAACgQ,EAAD,CAAelQ,UAAWD,EAAQ0Q,QAC/B,IAAMyK,GAFX,WAGwBE,EAHxB,WAGuC,kBAAC,KAAD,CAAuBxb,SAAS,QAAQI,UAAWD,EAAQ+N,OAHlG,KAG4GkC,KAIhH,kBAACtC,GAAA,EAAD,CAAY5J,MAAO,CAAEkB,WAAY,OAAS9E,QAAQ,MAChD,kBAAC,IAAD,CAAM2F,GAAE,gBAAW6Q,GAAW5S,MAAO,CAACO,eAAgB,OAAQ5D,MAAO,YAAc0a,IAErF,yBAAKnb,UAAWD,EAAQ4a,kBACrBU,EACD,kBAAC,IAAD,CAAMxV,GAAE,gBAAW6Q,EAAX,YAAsBqE,GAAcjX,MAAO,CAACO,eAAgB,OAAQ5D,MAAO,YACjF,kBAAC8T,GAAD,CACE/N,SAAUA,EACVpG,UAAU,EACV2L,KAAMA,EACNgE,KAAMA,EACNb,WAAYA,EACZC,cAAeA,EACfF,MAAOA,EACP/I,YAAaA,O,IC1GnBqV,G,4MACJxa,MAAQ,CACNiW,SAAU,GACV7K,SAAS,EACTiG,SAAS,EACTC,WAAY,G,EAkCdC,aAAe,WACb,EAAKnR,UAAS,SAAA6H,GAAS,kCAClBA,GADkB,IAErBqJ,WAAYrJ,EAAUqJ,WAAa,EACnClG,SAAS,OAEX,EAAKoG,e,kEApCLzQ,KAAKyQ,gB,yCAGYC,M,oCAOJ,IAAD,OACZpD,aAAM,CACJC,OAAQ,MACRC,IAAKxN,KAAKhC,MAAM2B,SAASC,SAASiO,QAAQ,UAAW,SACrDJ,QAAS,CAAE,cAAiB,UAAYzN,KAAKhC,MAAMwJ,OACnDmJ,OAAQ,CAAEC,KAAM5Q,KAAKf,MAAMsR,cAE5BM,MAAK,SAAAC,GACCA,GACL,EAAKzR,UAAS,SAAA6H,GACZ,OAAO,2BACFA,GADL,IAEEgO,SAAS,GAAD,oBAAMhO,EAAUgO,UAAhB,aAA6BpE,EAAIpD,KAAKwH,WAC9C7K,SAAS,EACTiG,UAASQ,EAAIpD,KAAKqD,e,+BAehB,IAAD,SACmC/Q,KAAKhC,MAAvC0G,EADD,EACCA,SAAUqT,EADX,EACWA,OAAQ3T,EADnB,EACmBA,YAC1B,OACE,oCACGpE,KAAKf,MAAMiW,SAASxO,KAAI,SAAC6N,EAASrD,GACjC,OAAO,kBAAC8H,GAAD,CACLrS,IAAK4N,EAAQpQ,IACb8U,WAAY1E,EAAQpQ,IACpByQ,QAASL,EAAQK,QAAQzQ,IACzB+U,eAAgB3E,EAAQK,QAAQzD,OAChCgI,wBAAyB5E,EAAQK,QAAQxQ,YACzCgV,qBAAsB7E,EAAQK,QAAQlQ,SACtC2U,WAAY9E,EAAQK,QAAQvS,MAC5B6L,cAAeqG,EAAQK,QAAQ1G,cAC/BoL,UAAW/E,EAAQK,QAAQxD,eAC3BnH,KAAMsK,EAAQtK,KACdgE,KAAMsG,EAAQnD,eACdhE,WAAYmH,EAAQnH,WACpBC,cAAekH,EAAQlH,cACvBF,MAAOoH,EAAQpH,MACfwH,MAAOJ,EAAQI,MACfjQ,SAAUA,EACVsJ,UAAW+J,EACX3T,YAAaA,GACP,EAAKnF,MAAMiW,SAASxV,SAAWwR,EAAQ,IAAO,EAAKjS,MAAMoL,SAAW,EAAKpL,MAAMqR,SAAW,kBAAC,GAAD,CAAUZ,YAAa,EAAKc,mBAG/HxQ,KAAKf,MAAMoL,SAAW,kBAACgH,EAAA,EAAD,W,GA3EL9Q,aAuFX+G,iBANS,SAAArI,GACtB,MAAO,CACLuI,MAAOvI,EAAMsI,KAAKC,SAIPF,CAA4BxF,YAAW2X,KC7FhD5c,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCqK,QAAS,CACPrG,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1C9I,aAAc,GACdD,SAAU,SACVzD,UAAWL,EAAMM,QAAQ,GACzBoI,aAAc1I,EAAMM,QAAQ,QAIjB,SAASqc,GAAT,GAAyC,IAAbrS,EAAY,EAAZA,SACnCpJ,EAAUpB,KAChB,OACE,yBAAKqB,UAAWD,EAAQmJ,SACrBC,G,aCbDxK,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC4c,KAAM,CACJ7Y,aAAc,GACdD,SAAU,SACV4E,aAAc1I,EAAMM,QAAQ,QAIjB,SAASkJ,GAAT,GAAyC,IAAzBlE,EAAwB,EAAxBA,MAAOgF,EAAiB,EAAjBA,SAAUuS,EAAO,EAAPA,IACxC3b,EAAUpB,KAEhB,OACE,oCACE,yBAAKqB,UAAWD,EAAQ0b,MACtB,kBAACE,GAAA,EAAD,CAASzb,QAAQ,MAAMiE,IACrBuX,GAAOvS,GAEVuS,GAAOvS,G,ICPRyS,G,4MACJ7a,MAAQ,CACNoL,SAAS,EACTlG,IAAK,KACLU,KAAM,KACNH,SAAU,KACV2T,YAAa,KACbjU,YAAa,KACbiC,WAAY,KACZ+R,aAAc,KACdN,SAAU,KACViC,eAAgB,EAChBC,gBAAiB,G,EAanBvJ,YAAc,WACZnD,aAAM,CACJC,OAAQ,MACRC,IAAK,UAAY,EAAKxP,MAAM6B,MAAM8Q,OAAOsJ,GACzCxM,QAAS,CAAE,cAAiB,UAAY,EAAKzP,MAAMwJ,SAEpDqJ,MAAK,SAAAC,GACCA,GACL,EAAKzR,SAAL,2BACKyR,EAAIpD,KAAKkL,MADd,IAEEvO,SAAS,S,kEAnBbrK,KAAKyQ,gB,yCAGYC,GACbA,EAAU7Q,MAAM8Q,OAAOsJ,KAAOja,KAAKhC,MAAM6B,MAAM8Q,OAAOsJ,KAC1Dja,KAAKX,SAAS,CAACgL,SAAS,IACxBrK,KAAKyQ,iB,+BAkBG,IAAD,OACC9Q,EAAaK,KAAKhC,MAAlB2B,SACF6N,EAAMxN,KAAKhC,MAAM6B,MAAM2N,IAEvB0M,EAASla,KAAKhC,MAAM2B,SAASC,SAASua,MAAM,KAC5C9X,EAAQ+X,aAAWF,EAAOA,EAAOxa,OAAS,IAEhD,OACEM,KAAKf,MAAMoL,QACX,kBAACgH,EAAA,EAAD,CAAgBrP,MAAO,CAAC5E,UAAW,MAEnC,oCACE,kBAACsc,GAAD,KACE,kBAAC,GAAD,CACE3B,OAAQ/X,KAAKf,MAAMkF,IACnB2T,SAAU9X,KAAKf,MAAM6Y,SACrBjT,KAAM7E,KAAKf,MAAM4F,KACjBH,SAAU1E,KAAKf,MAAMyF,SACrBN,YAAapE,KAAKf,MAAMmF,YACxBiC,WAAYrG,KAAKf,MAAMoH,WACvB+R,aAAcpY,KAAKf,MAAMmZ,aACzBC,YAAarY,KAAKf,MAAMoZ,cAE1B,kBAACf,GAAD,CAAaC,SAAU,CACnB,CAAElV,MAAO,QAAS0B,GAAI,SACtB,CAAE1B,MAAO,WAAY0B,GAAI,YACzB,CAAE1B,MAAOrC,KAAKf,MAAM8a,eAAiB,aAAchW,GAAI,aACvD,CAAE1B,MAAOrC,KAAKf,MAAM+a,gBAAkB,aAAcjW,GAAI,iBAI9D,kBAAC,GAAD,CAAM1B,MAAOA,EAAOuX,IAAK5Z,KAAKhC,MAAM2B,SAASC,SAASya,SAAS,UAC7D,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOnK,KAAI,UAAK1C,EAAL,UACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAU9M,IAAK7N,EAASC,SAASiO,QAAQ,UAAW,SAAUC,QAAQ,OACtF,kBAAC,IAAD,CAAOoC,KAAI,UAAK1C,EAAL,aACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAa5V,SAAU,EAAKzF,MAAMyF,SAAUqT,OAAQ,EAAK9Y,MAAMkF,IAAKC,YAAa,EAAKnF,MAAMmF,iBAC5G,kBAAC,IAAD,CAAO8L,KAAI,UAAK1C,EAAL,cACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAU9M,IAAK7N,EAASC,SAASiO,QAAQ,UAAW,cACpE,kBAAC,IAAD,CAAOqC,KAAI,UAAK1C,EAAL,cACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAU9M,IAAK7N,EAASC,SAASiO,QAAQ,UAAW,cACpE,kBAAC,IAAD,CAAU9J,GAAE,UAAKyJ,EAAL,mB,GAjFFjN,aAgGPqR,gBAAkBtK,cANT,SAAArI,GACtB,MAAO,CACLuI,MAAOvI,EAAMsI,KAAKC,SAIWF,CAA4BwS,IAAW,KAAMxM,M,mBCzExEiN,G,kDACJ,WAAYvc,GAAO,IAAD,8BAChB,cAAMA,IA6CRwc,oBAAsB,SAAC7T,EAAKiE,GAC1B,IAAI6P,EAAW,eAAK9T,EAAL,2BACV,EAAK1H,MAAMyb,SAAS/T,IADV,IAEbzH,MAAO0L,EAAMtL,OAAOJ,MACpBkL,SAAS,EACT8B,MAAOyO,YAAc/P,EAAMtL,OAAOJ,MAAOyH,MAGtC,EAAK3I,MAAM4c,WACH,oBAARjU,IACD8T,EAAY9T,GAAKuF,MAAS,EAAKjN,MAAMyb,SAASG,SAAS3b,QAAUub,EAAY9T,GAAKzH,OAC7E,EAAKD,MAAMyb,SAASG,SAASzQ,QAAU,uBAAyB,MAE5D,aAARzD,IACD8T,EAAYK,gBAAZ,2BACK,EAAK7b,MAAMyb,SAASI,iBADzB,IAEE5O,MAAQ,EAAKjN,MAAMyb,SAASI,gBAAgB5b,QAAUub,EAAY9T,GAAKzH,OAClEub,EAAY9T,GAAKyD,QAAU,uBAAyB,SAK/D,EAAK/K,SAAS,CAACqb,SAAS,2BAAK,EAAKzb,MAAMyb,UAAaD,MApErC,EAuElB5P,cAAgB,WACd,IAAI6C,EAAO,GACX,IAAK,IAAI/G,KAAO,EAAK1H,MAAMyb,SAGzB,GAFAhN,EAAK/G,GAAO,EAAK1H,MAAMyb,SAAS/T,GAAKzH,MAEjC,EAAKD,MAAMyb,SAAS/T,GAAKuF,QAAU,EAAKjN,MAAMyb,SAAS/T,GAAKyD,QAAS,cAEpEsD,EAAKoN,gBACZ,EAAK9c,MAAM+c,OAAQrN,EAAM,EAAK1P,MAAM4c,WA7EpC,EAAK3b,MAAQ,CAACyb,SAAU,EAAKM,gBAAgBhd,EAAM4c,WAFnC,E,4DAKFK,GACd,IAAIP,EAAW,GACXQ,EAAS,CACX,CAACrW,KAAM,QAAS0D,MAAO,SAAU5H,KAAM,QAASwa,IAAK,KACrD,CAACtW,KAAM,WAAY0D,MAAO,WAAY5H,KAAM,WAAYwa,IAAK,IAC7D,CAACtW,KAAM,OAAQ0D,MAAO,OAAQ5H,KAAM,OAAQwa,IAAK,IACjD,CAACtW,KAAM,WAAY0D,MAAO,WAAY5H,KAAM,WAAYwa,IAAK,KAC7D,CAACtW,KAAM,kBAAmB0D,MAAO,mBAAoB5H,KAAM,WAAYwa,IAAK,MAEzEF,IAAYC,EAAS,CAACA,EAAO,GAAIA,EAAO,KAC7C,cAAkBA,EAAlB,eAA0B,CAArB,IAAIvQ,EAAK,KACZ+P,EAAS/P,EAAM9F,MAAQ,CACrBlE,KAAMgK,EAAMhK,KACZ4H,MAAOoC,EAAMpC,MACb4S,IAAKxQ,EAAMwQ,IACXjc,MAAO,GACPgN,MAAO,KACP9B,SAAS,GAGb,OAAOsQ,I,4CAGalH,EAAWC,GAU/B,OATID,EAAUoH,WAAa5a,KAAKhC,MAAM4c,WAGpC5a,KAAKX,SAAS,CAACqb,SAAU1a,KAAKgb,gBAAgBxH,EAAUoH,YACvD5a,KAAKhC,MAAMod,OAAO1b,OAAS,GAAMM,KAAKhC,MAAMqd,eAC5Crb,KAAKhC,MAAM4c,UAAY5a,KAAKhC,MAAMsd,iBAAmBtb,KAAKhC,MAAMud,wBAGnEvb,KAAKhC,MAAM4c,UAAYpH,EAAU8H,iBAAmBtb,KAAKhC,MAAM8B,QAAQC,KAAK,UACpEC,KAAKhC,QAAUwV,GAAaxT,KAAKf,QAAUwU,I,6CAKnDzT,KAAKhC,MAAMwd,qB,+BAuCH,IAAD,OACDvd,EAAU+B,KAAKhC,MAAMC,QAE3B,OACE+B,KAAKhC,MAAMwF,gBAAkB,kBAAC,IAAD,CAAUO,GAAI/D,KAAKhC,MAAMyd,mBACtD,yBAAKvd,UAAWD,EAAQyd,OAEtB,yBAAKxd,UAAWD,EAAQ4E,aACtB,kBAAC,EAAD,OAGF,kBAAC+I,GAAA,EAAD,CAAY1N,UAAWD,EAAQ0d,OAAQvd,QAAQ,MAAM4B,KAAKhC,MAAM4c,SAAW,oBAAsB,iBAEhGpU,OAAOC,KAAKzG,KAAKf,MAAMyb,UAAUhU,KAAI,SAAAC,GACpC,IAAIiV,EAAU,EAAK3c,MAAMyb,SAAS/T,GAClC,OAAO,kBAACwB,GAAA,EAAD,CACH7J,SAAU,EAAKN,MAAMqM,QACrBjC,WAAY,CAACC,UAAWuT,EAAQT,KAChCxU,IAAKA,EACLzH,MAAO0c,EAAQ1c,MACfgN,QAAS0P,EAAQ1P,OAAS0P,EAAQxR,QAClCyR,WAAYD,EAAQxR,SAAWwR,EAAQ1P,MACvC/L,SAAU,EAAKqa,oBAAoBpO,KAAK,EAAMzF,GAC9C6B,WAAS,EACTD,MAAOqT,EAAQrT,MACf5H,KAAMib,EAAQjb,KACdmb,gBAAiB,CAAEC,QAAQ,GAC3B7d,UAAWD,EAAQ+d,YAGzB,kBAAC/X,EAAA,EAAD,CACE3F,SAAU0B,KAAKhC,MAAMqM,QACrBnM,UAAWD,EAAQ+d,OACnBxd,QAASwB,KAAK6K,cACdlM,MAAM,UACNP,QAAQ,YACRoK,WAAS,GAAExI,KAAKhC,MAAM4c,SAAW,WAAa,SAE/C5a,KAAKhC,MAAMod,OAAO1U,KAAI,SAAA+K,GAAG,OACxB,kBAACwK,GAAA,EAAD,CAAOtV,IAAK8K,EAAIyK,IAAKhe,UAAWD,EAAQ+d,OAAQG,SAAS,SAAS/B,aAAW3I,EAAIyK,SAElFlc,KAAKhC,MAAMsd,iBAAmB,kBAACW,GAAA,EAAD,CAAO/d,UAAWD,EAAQ+d,OAAQG,SAAS,QAAQnc,KAAKhC,MAAMsd,iBAC5Ftb,KAAKhC,MAAMqM,SAAW,kBAACgH,EAAA,EAAD,CAAgBnT,UAAWD,EAAQ+d,UACxDhc,KAAKhC,MAAM4c,UAAY,kBAAC,IAAD,CAAM7W,GAAG,YAAY7F,UAAWD,EAAQoH,MAAxC,6C,GA9Hd9E,aAwJJ+G,iBAnBS,SAAArI,GACtB,MAAO,CACHoL,QAASpL,EAAMsI,KAAK8C,QACpB+Q,OAAQnc,EAAMsI,KAAK6T,OACnB5X,gBAAsC,OAArBvE,EAAMsI,KAAKC,MAC5BiU,iBAAkBxc,EAAMsI,KAAKkU,iBAC7BH,gBAAiBrc,EAAMsI,KAAK+T,oBAIP,SAAArL,GACzB,MAAO,CACL8K,OAAQ,SAAErN,EAAMuN,GAAR,OAAwBhL,EAAUE,KAAczC,EAAMuN,KAC9DI,YAAa,kBAAMpL,EAAU,CAAEtP,KAAMyb,QACrCb,qBAAsB,kBAAMtL,EAAU,CAAEtP,KAAMyb,QAC9CZ,iBAAkB,kBAAMvL,EAAU,CAAEtP,KAAMyb,WAI/B9U,CAAgD9G,aAnLhD,SAACzD,GAAD,MAAY,CACzB2e,MAAO,CACL7R,UAAW,SACX9I,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1CpI,QAASzE,EAAMM,QAAQ,GACvB8D,SAAU,IACV1D,OAAQV,EAAMM,QAAQ,GAAK,UAC3ByD,aAAc,IAEhBuE,KAAM,CACJpI,QAAS,eACT0B,MAAO,UACPyC,OAAQ,UACRhE,UAAWL,EAAMM,QAAQ,MAE3B2e,OAAQ,CACN5e,UAAWL,EAAMM,QAAQ,IAE3Bse,OAAQ,CACNle,OAAQV,EAAMM,QAAQ,IAExBwF,YAAa,CACXxB,OAAQ,GACRyB,OAA+B,SAAvB/F,EAAM2D,QAAQC,KAAkB,eAAiB,OA4JEH,CAAmB+Z,KCvL5E8B,G,kLAEErc,KAAKhC,MAAMse,W,2CAIXtc,KAAKhC,MAAM8B,QAAQyc,W,+BAInB,OAAO,kBAAClL,EAAA,EAAD,CAAgBrP,MAAO,CAAC5E,UAAW,U,GAV7BmD,aAoBN+G,gBAAQ,MANI,SAAA2I,GACvB,MAAO,CACHqM,OAAQ,kBAAMrM,EAASE,YAIhB7I,CAAkC+U,ICf3CG,G,uKACM,IAAD,OACDhP,EAAMxN,KAAKhC,MAAM6B,MAAM2N,IACvB0M,EAASla,KAAKhC,MAAM2B,SAASC,SAASua,MAAM,KAC5C9X,EAAQ+X,aAAWF,EAAOA,EAAOxa,OAAS,IAChD,OACE,oCACE,kBAACga,GAAD,KACE,kBAACpC,GAAD,CACEC,SAAU,CACR,CAAElV,MAAO,QAAS0B,GAAI,QAAU/D,KAAKhC,MAAM2B,SAASM,QACpD,CAAEoC,MAAO,QAAS0B,GAAI,QAAU/D,KAAKhC,MAAM2B,SAASM,YAI1D,kBAAC,GAAD,CAAMoC,MAAOA,EAAOuX,IAAK5Z,KAAKhC,MAAM2B,SAASC,SAASya,SAAS,UAE3D,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOnK,KAAI,UAAK1C,EAAL,UACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAU9M,IAAK,SAAW,EAAKxP,MAAM2B,SAASM,YAC9D,kBAAC,IAAD,CAAOiQ,KAAI,UAAK1C,EAAL,UACT8M,OAAQ,kBAAM,kBAAC,GAAD,CAAU9M,IAAK,SAAW,EAAKxP,MAAM2B,SAASM,OAAQ6N,QAAQ,OAC9E,kBAAC,IAAD,CAAU/J,GAAE,UAAKyJ,EAAL,mB,GAtBLjN,aAgCNqR,gBAAiB4K,GAAQ,KAAMlP,MC/BxCmP,G,uKAEF,OACE,yBAAKve,UAAW8B,KAAKhC,MAAMC,QAAQye,UACjC,kBAAC,GAAD,CAAMra,MAAM,kBACV,kBAAC,GAAD,CAAUmL,IAAI,iB,GALDjN,aAYRqR,gBAAiB6K,IAlBjB,SAAC1f,GAAD,MAAY,CACzB2f,SAAU,CACRtf,UAAWL,EAAMM,QAAQ,OAgBqBiQ,MCT5CqP,GAAkBC,gBAAK,kBAAM,iCAE7BC,G,kDACJ,WAAY7e,GAAO,IAAD,8BAChB,cAAMA,IAKR8e,eAAiB,WACf,EAAKzd,UAAS,SAAA6H,GAAS,MAAK,CAC1B6V,MAAO7V,EAAU6V,UANnB,EAAK9d,MAAQ,CAAE8d,MAAM,GACrB,EAAK/e,MAAMgf,kBAHK,E,qDAahB,IAAMC,EAAaC,YAAe,CAChCxc,QAAS,CACPC,KAAM,QACNuO,QAAS,CACP6E,KAAMoJ,IAAO,MAEfxX,UAAW,CACToO,KAAMqJ,IAAM,MAEdpc,WAAY,CACVqc,QAAS,UACTC,KAAM,UACN1T,IAAK,UACL3I,MAAO,WAETyE,KAAM,CACJC,UAAW,cAKX4X,EAAYL,YAAe,CAC/Bxc,QAAS,CACPC,KAAM,OACNuO,QAAS,CACP6E,KAAMoJ,IAAO,MAEfxX,UAAW,CACToO,KAAMqJ,IAAM,MAEdpc,WAAY,CACVqc,QAAS,UACTC,KAAM,UACN1T,IAAK,UACL3I,MAAO,WAETyE,KAAM,CACJC,UAAW,cAKjB,OACE,kBAAC6X,EAAA,EAAD,CAAezgB,MAAOiD,KAAKf,MAAM8d,KAAOQ,EAAYN,GAClD,kBAACQ,EAAA,EAAD,MACA,kBAAC,GAAD,CAAQha,iBAAkBzD,KAAK8c,gBAC7B,kBAAC,WAAD,CAAUY,SAAU,kBAACrM,EAAA,EAAD,CAAgBrP,MAAO,CAAC5E,UAAW,OACrD,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO8S,KAAK,4BAA4ByN,UAAWnH,KAClDxW,KAAKhC,MAAMwF,iBAAmB,kBAAC,IAAD,CAAO0M,KAAK,YAAYyN,UAAWhB,KAClE,kBAAC,IAAD,CAAOzM,KAAK,SAASoK,OAAQ,SAACtc,GAAD,OAAW,kBAAC,GAAD,eAAM4c,UAAU,GAAW5c,OACnE,kBAAC,IAAD,CAAOkS,KAAK,YAAYoK,OAAQ,SAACtc,GAAD,OAAW,kBAAC,GAAD,eAAM4c,UAAU,GAAU5c,OACpEgC,KAAKhC,MAAMwF,iBAAmB,kBAAC,IAAD,CAAO0M,KAAK,UAAUyN,UAAWtB,KAChE,kBAAC,IAAD,CAAOnM,KAAK,UAAUyN,UAAWnB,KACjC,kBAAC,IAAD,CAAOtM,KAAK,YAAYyN,UAAWlB,KACnC,kBAAC,IAAD,CAAOvM,KAAK,QAAQyN,UAAWrM,KAC/B,kBAAC,IAAD,CAAOpB,KAAK,eAAeyN,UAAW7D,KACtC,kBAAC,IAAD,CAAU/V,GAAG,kB,GAvETxD,aA6FH+G,iBAZS,SAAArI,GACtB,MAAO,CACLuE,gBAAsC,OAArBvE,EAAMsI,KAAKC,UAIL,SAAAyI,GACzB,MAAO,CACL+M,gBAAiB,kBAAM/M,EAAUE,YAItB7I,CAAgDuV,IClG3Ce,QACW,cAA7BC,OAAOle,SAASme,UAEe,UAA7BD,OAAOle,SAASme,UAEhBD,OAAOle,SAASme,SAASje,MACvB,2D,uBCfAoU,GAAe,CACjBzM,MAAO,KACPjE,YAAa,GACb6X,OAAQ,GACR/Q,SAAS,EACTiR,gBAAiB,KACjBG,iBAAkB,KAmBPsC,GAhBC,WAAqC,IAAnC9e,EAAkC,uDAA1BgV,GAAc+J,EAAY,uCAChD,OAASA,EAAOrd,MACZ,KAAKyb,KAAwB,OAAO6B,YAAchf,EAAO,CAAEiN,MAAO,KAAM7B,SAAS,IACjF,KAAK+R,KAA0B,OAAO6B,YAAchf,EAAO,CAAEuI,MAAOwW,EAAOxW,MAAOjE,YAAaya,EAAOza,YAAa2I,MAAO,KAAM7B,SAAS,IACzI,KAAK+R,KAA8B,OAAO6B,YAAahf,EAAO,CAAEqc,gBAAiB0C,EAAO1C,gBAAiBjR,SAAS,IAClH,KAAK+R,KAAuB,OAAO6B,YAAchf,EAAO,CAAEmc,OAAQ4C,EAAO5C,OAAQ/Q,SAAS,IAC1F,KAAK+R,KAAyB,OAAO6B,YAAahf,EAAO,CAAEuI,MAAO,KAAMjE,YAAa,KACrF,KAAK6Y,KAAgC,OAAO6B,YAAahf,EAAO,CAAEmc,OAAQ,GAAIE,gBAAiB,KAAMG,iBAAkB,MACvH,KAAKW,KAA0B,OAAO6B,YAAahf,EAAO,CAAEmc,OAAQ,KACpE,KAAKgB,KAAoC,OAAO6B,YAAahf,EAAO,CAAEqc,gBAAiB,OACvF,KAAKc,KAA6B,OAAO,2BAAInd,GAAX,IAAkBsE,YAAa0a,YAAahf,EAAMsE,YAAa,CAAEa,YAAa4Z,EAAO5Z,YAAaiC,WAAY2X,EAAO3X,eACvJ,KAAK+V,KAAoC,OAAO6B,YAAahf,EAAO,CAAEwc,iBAAkBuC,EAAO9N,OAC/F,QAAS,OAAOjR,ICZlBif,GAAmBL,OAAOM,sCAAwCC,KAElEC,GAAcC,aAAgB,CAChC/W,KAAMgX,KAGJC,GAAQC,aAAYJ,GAAaH,GACnCQ,aAAgBC,QAGdC,GACF,kBAAC,KAAD,CAAUJ,MAAOA,IACb,kBAAC,IAAD,KACI,kBAAC,GAAD,QAKZK,IAASvE,OAAOsE,GAAKE,SAASC,eAAe,SFqGvC,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBrO,MAAK,SAAAsO,GACJA,EAAaC,gBAEd5N,OAAM,SAAAtF,GACL6I,QAAQ7I,MAAMA,EAAM5O,a,gCGzI5B,aAEM+hB,EAFN,OAEiB/R,EAAMzL,OAAO,CAC1Byd,QAAS,OACTC,QAAS,OAGEF,O,0RCPFG,EAAW,wBAEXlZ,EAAiBkZ,EAAW,6BAE5B1T,EAAsB0T,EAAW,sCAEjClH,EAAc,SAACmH,GACxB,OAAO,IAAIC,KAAKD,EAAWpU,QAAQsU,eAAe9R,QAAQ,SAAS,IAAIA,QAAQ,aAAc,OAIpFoQ,EAAe,SAAC2B,EAAWC,GACpC,IAAIC,EAA0B,GAC9B,IAAI,IAAInZ,KAAOkZ,OACoBE,IAA3BF,EAAkBlZ,KAAoBmZ,EAAwBnZ,GAAOkZ,EAAkBlZ,IAE/F,OAAO,2BACAiZ,GACAE,IAIEnF,EAAgB,SAAEzb,EAAOyB,GAClC,GAAc,KAAVzB,EAAc,MAAO,WACzB,OAAOyB,GACH,IAAK,QAED,MADgB,wIACDqf,KAAM9gB,GAAU,KAAO,iBAC1C,IAAK,WACD,OAAOA,EAAMW,MAAM,iBAAmB,gCAAkC,KAC5E,IAAK,OACD,OAAOX,EAAMW,MAAM,yBAA2B,iDAAmD,KACrG,QACI,OAAO,OAINyL,EAAmB,CAE5B,CAEEG,MAAO,yHACPC,SAAU,kCAGZ,CAEED,MAAO,mKACPC,SAAU,qC,gCChDhB,oVAAO,IAcMuU,EAAa,aACbC,EAAe,eACfC,EAAmB,mBACnBC,EAAY,YACZC,EAAc,cACdC,EAAe,eACfC,EAAqB,qBACrBC,EAAyB,yBACzBC,EAAkB,kBAClBC,EAAyB,0B,2ICnBhC7jB,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvC4jB,UAAW,CACT7f,aAAc,GACdD,SAAU,SACV4E,aAAc1I,EAAMM,QAAQ,GAC5BD,UAAWL,EAAMM,QAAQ,QAId,SAASujB,IACtB,IAAM3iB,EAAUpB,IAChB,OACE,yBAAKqB,UAAWD,EAAQ0iB,WACtB,kBAAC9G,EAAA,EAAD,CAASzb,QAAQ,MAAjB,kBC0DSwT,IAtEU,SAAChF,EAAkBiU,EAAYvT,GAEtD,IAiBMwT,EAnB0D,kDAoB9D,WAAY9iB,GAAQ,IAAD,8BACjB,cAAMA,IAqBR+iB,sBAAwB,WACtB,EAAK1hB,SAAS,CAAE2hB,OAAQ,QArBxB,EAAK/hB,MAAQ,CAAE+hB,OAAQ,MACvB,EAAKC,eAAiB3T,EAAM4T,aAAaC,QAAQC,KAAI,SAAAC,GAEnD,OADA,EAAKhiB,SAAS,CAAE2hB,OAAQ,OACjBK,KAET,EAAKC,eAAiBhU,EAAM4T,aAAaK,SAASH,KAAI,SAAAtQ,GAAG,OAAIA,KAAK,SAAA5E,GAChE,IACE,EAAK7M,SAAS,CAAE2hB,OAAQ9U,EAAMqV,SAAS7T,KAAK0N,OAAO,GAAGc,MACtD,SACA,EAAK7c,SAAS,CAAE2hB,OAAQ9U,EAAM5O,UAEhC,OAAOoU,QAAQC,OAAOzF,MAbP,EApB2C,mEAsC5DoB,EAAM4T,aAAaC,QAAQK,MAAMxhB,KAAKihB,gBACtC3T,EAAM4T,aAAaK,SAASC,MAAMxhB,KAAKshB,kBAvCqB,+BAgD5D,MACwB,uBAAtBthB,KAAKf,MAAM+hB,OACX,kBAACJ,EAAD,MACA,oCACE,kBAAC7Y,EAAA,EAAD,CACElC,OAAM7F,KAAKf,MAAM+hB,OACjBlb,QAAS9F,KAAK+gB,uBACd,kBAAC9Y,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACGlI,KAAKf,MAAM+hB,UAIlB,kBAACpU,EAAqB5M,KAAKhC,YA7D6B,GAmBxCuC,aAgDxB,OAAOC,aAjEQ,SAACzD,GACd,IAAI0kB,EAASZ,EAAaA,EAAW9jB,GAAS,GAC9C,OAAO,aACLmJ,MAAO,CACL5B,SAAU,WACVa,IAAK,MACLgE,KAAM,oBACN1H,MAAO,IACPigB,SAAU,aACV3gB,gBAAiBhE,EAAM2D,QAAQM,WAAWkF,MAC1CzD,UAAW1F,EAAM4kB,QAAQ,GACzBngB,QAASzE,EAAMM,QAAQ,EAAG,EAAG,KAE5BokB,KAoDAjhB,CAAmBsgB,K,8OCpEtBc,EAAa,CAAC,MAAO,OAAQ,WAAY,cAAe,cAQjDC,EAAc,SAACra,EAAOoR,GAC/B,MAAO,CACHjY,KAAMyb,IACN5U,QACAjE,YAAY,2BACLqV,GADI,IAEPxU,YAAawU,EAAKxU,YAClBiC,WAAYuS,EAAKvS,eAYhByb,EAAiB,SAAC1d,EAAaiC,GACxC,MAAO,CACH1F,KAAMyb,IACNhY,YAAaA,GAAgBob,IAAWpb,EACxCiC,WAAYA,GAAemZ,IAAWnZ,IAWjCiW,EAAS,WAIlB,MAHA,UAAIsF,EAAJ,CAAgB,QAAS,mBAAkBG,SAAQ,SAAApX,GAC/CqX,aAAaC,WAAWtX,MAErB,CACHhK,KAAMyb,MAID8F,EAAmB,SAACC,GAC7B,OAAO,SAAAlS,GACHmS,YAAW,WACPnS,EAASqM,OACO,IAAjB6F,KAIE5a,EAAO,SAAC8a,EAAUpH,GAE3B,OAAO,SAAAhL,GACHA,EA3DG,CACHtP,KAAMyb,MA2DN,IAAM5O,EAAM,KAAOyN,EAAa,WAAa,SAC7C3N,IAAMiB,KAAKf,EAAK6U,GACXxR,MAAK,SAAAC,GACF,GAAImK,EAAY,OAAOhL,EA7C5B,CACHtP,KAAMyb,IACNd,gBAAiB,qCA4CTrL,EAAS4R,EAAY/Q,EAAIpD,KAAKlG,MAAOsJ,EAAIpD,KAAKkL,OAC9C,IAAM0J,EAAiB,IAAI5C,MAAK,IAAIA,MAAO6C,UAAiC,IAArBzR,EAAIpD,KAAK8U,WAChER,aAAaS,QAAQ,iBAAkBH,GACvCN,aAAaS,QAAQ,QAAS3R,EAAIpD,KAAKlG,OACvCoa,EAAWG,SAAQ,SAAAW,GACfV,aAAaS,QAAQC,EAAW5R,EAAIpD,KAAKkL,KAAK8J,OAElDzS,EAASiS,EAAiBpR,EAAIpD,KAAK8U,eAEtChR,OAAM,SAAAC,GAzCK,IAAC2J,EA0CTnL,GA1CSmL,EA0CS3J,EAAI8P,SAAS7T,KAAK0N,OAzCzC,CACHza,KAAMyb,IACNhB,iBA6CKuH,EAAiB,WAC1B,OAAO,SAAA1S,GACH,IAAI1M,EAAc,GAClBqe,EAAWG,SAAQ,SAAAW,GAEf,GADAnf,EAAYmf,GAAaV,aAAaY,QAAQF,IACzCnf,EAAYmf,GAAY,OAAOzS,EAASqM,QAEjD,IAAM9U,EAAQwa,aAAaY,QAAQ,SAC7BN,EAAiB,IAAI5C,KAAKsC,aAAaY,QAAQ,oBAChDpb,IAAU8a,GAAkBA,GAAkB,IAAI5C,KACnDzP,EAASqM,MAETrM,EAAS4R,EAAYra,EAAOjE,IAC5B0M,EAASiS,GAAkBI,EAAeC,WAAY,IAAI7C,MAAO6C,WAAa,SAK7EvS,EAAsB,SAACE,GAChC,MAAO,CACHvP,KAAMyb,IACNlM,U,gCC5GR,8DAGMrT,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvC8lB,WAAY,CACVphB,MAAO,OACPyH,cAAe,YACf4Z,eAAgB,QAChBxe,SAAU,YAEZye,QAAS,CACPze,SAAU,WACVa,IAAK,EACLZ,OAAQ,EACRa,MAAO,EACP+D,KAAM,EACNlM,QAAS,OACTE,eAAgB,SAChBD,WAAY,cAID,SAASiJ,EAAWnI,GACjC,IAAMC,EAAUpB,IAChB,OACE,yBAAKqB,UAAWD,EAAQ4kB,WAAY7gB,MAAO,CAAEghB,gBAAiB,QAAUhlB,EAAMoI,cAAgB,OAC3FpI,EAAMqJ,SACL,yBAAKnJ,UAAWD,EAAQ8kB,SACrB/kB,EAAMqJ,UAEP,Q,gCC9BV,sEAIMxK,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCkmB,QAAS,CACPliB,gBAAiBhE,EAAM2D,QAAQM,WAAW4I,IAC1CpI,QAASzE,EAAMM,QAAQ,GAAK,MAAQN,EAAMM,QAAQ,GAAK,UAI5C,SAASwc,EAAQ7b,GAC9B,IAAMC,EAAUpB,IAEhB,OACE,yBAAKqB,UAAWD,EAAQglB,SACtB,kBAAC,IAAD,CAAYjhB,MAAO,CAAEvE,OAAQ,EAAGyF,WAAY,WAAa9E,QAASJ,EAAMI,SAAUJ,EAAMqJ,c","file":"static/js/main.8792465e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  bottomOptions: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'space-between',\r\n    marginTop: theme.spacing(0.5),\r\n  },\r\n  message: {\r\n    display: 'inline-block',\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  replyButton: {\r\n    margin: theme.spacing(0.5)\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'flex-end',  \r\n  },\r\n  [theme.breakpoints.down('xs')]: {\r\n    message: {\r\n      fontSize: '0.9em'\r\n    }\r\n  },\r\n}));\r\n\r\nexport default function BottomOptions(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.bottomOptions}>\r\n      <Typography className={classes.message + ' ' + props.messageClass} variant='body1' >{props.message}</Typography>\r\n      <div className={classes.buttons}>\r\n        {props.handleCanceled ?\r\n          <Button\r\n            disabled={props.mainButtonDisabled}\r\n            onClick={props.handleCanceled}\r\n            variant=\"contained\" disableElevation\r\n            className={classes.replyButton} >Cancel</Button>\r\n          : null}\r\n        <Button\r\n          disabled={props.mainButtonDisabled}\r\n          variant=\"contained\"\r\n          onClick={props.mainButtonClicked}\r\n          disableElevation color={props.mainButtonColor}\r\n          className={classes.replyButton}>{props.mainButtonText}</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n}","module.exports = \"data:image/png;base64,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\"","import React, { Component } from 'react';\r\nimport { darken, withStyles } from '@material-ui/core/styles';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport { withRouter } from 'react-router';\r\n\r\nconst styles = (theme) => {\r\n    const fontColor = theme.palette.type === 'dark' ? 'white' : 'black';\r\n    return {\r\n        search: {\r\n            paddingLeft: theme.spacing(1),\r\n            overflow: 'hidden',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            borderRadius: 17,\r\n            backgroundColor: theme.palette.background.front,\r\n            '&:hover': {\r\n                backgroundColor: darken(theme.palette.background.front, 0.1)\r\n            },\r\n            marginRight: 0,\r\n            maxWidth: 440\r\n        },\r\n        searchIcon: {\r\n            color: fontColor,\r\n            cursor: 'pointer',\r\n            marginRight: theme.spacing(1),\r\n            height: '100%',\r\n        },\r\n        input: {\r\n            backgroundColor: 'inherit',\r\n            border: 'none',\r\n            outline: 'none',\r\n            color: fontColor,\r\n            padding: theme.spacing(1, 0, 1, 1),\r\n            fontSize: '0.8rem',\r\n            width: '100%',\r\n            [theme.breakpoints.up(800)]: {\r\n                transition: theme.transitions.create('width'),\r\n                width: 164,\r\n                '&:focus': {\r\n                    width: 400\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nclass SearchBar extends Component {\r\n    state = {value: ''}\r\n\r\n    handleInput = (e) => {\r\n        this.setState({value: e.target.value});\r\n    }\r\n\r\n    handleKeyPress = (e) => {\r\n        if (e.charCode === 13) this.submitInput();\r\n    }\r\n\r\n    submitInput = () => {\r\n        if (this.state.value.length === 0) return;\r\n        if (this.props.location.pathname.match(/\\/search\\/(users|posts)/g)) {\r\n            this.props.history.push(this.props.location.pathname + '?search=' + this.state.value);\r\n        } else {\r\n            this.props.history.push('/search/users?search=' + this.state.value);\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const classes = this.props.classes;\r\n        return (\r\n            <div className={classes.search}>\r\n                <input\r\n                    placeholder=\"Search Plazon…\"\r\n                    value={this.state.value}\r\n                    onChange={this.handleInput}\r\n                    onKeyPress={this.handleKeyPress}\r\n                    className={classes.input} />\r\n\r\n                <SearchIcon onClick={this.submitInput}  className={classes.searchIcon} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(withRouter(SearchBar))","import React from 'react';\r\nimport logoUrl from '../assets/images/logo-small.png';\r\n\r\nconst Logo = () => (\r\n  <img style={{ height: '100%' }} src={logoUrl} alt='Plazon' />\r\n);\r\n\r\nexport default Logo;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport SearchBar from './SearchBar';\r\nimport Logo from '../../Logo';\r\nimport { Link } from 'react-router-dom';\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    menuButton: {\r\n        [`${theme.breakpoints.up('xs')} and (orientation: landscape)`]: {\r\n            marginRight: theme.spacing(2)\r\n        }\r\n    },\r\n    title: {\r\n        marginRight: theme.spacing(1),\r\n        height: 40,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        lineHeight: 0,\r\n        textDecoration: 'none',\r\n        color: 'inherit'\r\n    },\r\n    navbar: {\r\n        boxShadow: 'none',\r\n    },\r\n    toolbar: {\r\n        [theme.breakpoints.up('xs')]: {\r\n            minHeight: 48,\r\n        },\r\n        [theme.breakpoints.up('sm')]: {\r\n            minHeight: 60,\r\n        },\r\n    },\r\n    profilePic: {\r\n        height: 40,\r\n        width: 40,\r\n        borderRadius: '50%'\r\n    },\r\n    logoWrapper: {\r\n        filter: 'invert(100%)',\r\n        height: 30\r\n    },\r\n    titleText: {\r\n        fontFamily: 'Montserrat Alternates, sans-serif',\r\n        display: 'none',\r\n        margin: 0,\r\n        marginLeft: '-0.65em',\r\n        fontSize: '1.25rem',\r\n        fontWeight: 500,\r\n        [theme.breakpoints.up(500)]: {\r\n            display: 'block'\r\n        }\r\n    },\r\n    navItem: {\r\n        display: 'none',\r\n        [theme.breakpoints.up(500)]: {\r\n            display: 'block'\r\n        }\r\n    },\r\n    searchWrapper: {\r\n        margin: '0 auto'\r\n    }\r\n}));\r\n\r\nexport default function NavBar({ menuClicked, currentUser, isAuthenticated, switchedDarkMode }) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <AppBar className={classes.navbar}>\r\n            <Toolbar className={classes.toolbar}>\r\n                <IconButton\r\n                    onClick={menuClicked}\r\n                    edge=\"start\"\r\n                    className={classes.menuButton}\r\n                    color=\"inherit\"\r\n                    aria-label=\"menu\">\r\n                    <MenuIcon />\r\n                </IconButton>\r\n                <Link className={classes.title} to='/feed'>\r\n                    <div className={classes.logoWrapper}>\r\n                        <Logo />\r\n                    </div>\r\n                    <p className={classes.titleText}><span style={{visibility: 'hidden'}}>P</span>LAZON</p>\r\n                </Link>\r\n\r\n                <div className={classes.searchWrapper}>\r\n                    <SearchBar />\r\n                </div>\r\n                \r\n                {!isAuthenticated && <Button className={classes.navItem} color=\"inherit\">\r\n                    <Link style={{textDecoration: 'none', color: 'inherit'}} to='/login'>Login</Link></Button>}\r\n                \r\n                <IconButton className={classes.navItem} onClick={switchedDarkMode}>\r\n                    <Brightness4Icon style={{color: 'white'}} /></IconButton>\r\n                \r\n                {isAuthenticated && <Link to={'/settings'} className={classes.navItem} style={{lineHeight: 0}}>\r\n                    <IconButton><SettingsIcon style={{color: 'white'}} size='small' /></IconButton></Link>}\r\n                \r\n                {isAuthenticated && <Link to={`/profile/${currentUser._id}`} style={{ lineHeight: 0, marginLeft: 12}}\r\n                    className={classes.navItem}>\r\n                    <img className={classes.profilePic} src={currentUser.profile_pic} alt=''/>\r\n                </Link>}\r\n\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    userInfo: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        fontSize: '1em',\r\n        fontWeight: 500,\r\n        position: 'relative',\r\n        bottom: '20px',\r\n        marginLeft: theme.spacing(2.5),\r\n        '& p': {\r\n            wordBreak: 'break-word'\r\n        }\r\n    },\r\n    image: {\r\n        height: 60,\r\n        width: 60,\r\n        borderRadius: '50%',\r\n    },\r\n    username: {\r\n        margin: '0.5em 0',\r\n    },\r\n    nickname: {\r\n        fontSize: '0.8em',\r\n        margin: 0\r\n    }\r\n}));\r\n\r\nexport default function UserInfo(props) {\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.userInfo}>\r\n            <img className={classes.image} src={props.currentUser.profile_pic} alt='' />\r\n            <p className={classes.username} >{props.currentUser.name}</p>\r\n            <p className={classes.nickname}>{'@' + props.currentUser.username}</p>\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport UserInfo from './UserInfo';\r\nimport { Link } from 'react-router-dom';\r\nimport CoverPhoto from '../../CoverPhoto';\r\nimport { DEFAULT_BANNER } from '../../../shared/utility';\r\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\r\nimport { IconButton } from '@material-ui/core';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n        backgroundColor: theme.palette.background.front\r\n    },\r\n    drawerContainer: {\r\n        overflow: 'auto',\r\n    },\r\n    closeIcon: {\r\n        color: 'white',\r\n        position: 'absolute',\r\n        fontSize: 20,\r\n        margin: 0,\r\n        top: 5,\r\n        right: 7,\r\n        cursor: 'pointer'\r\n    },\r\n    link: {\r\n        textDecoration: 'none',\r\n        textTransform: 'capitalize',\r\n        color: 'inherit',\r\n        padding: theme.spacing(2) + 'px ' + theme.spacing(2.5) + 'px',\r\n        width: '100%',\r\n        height: '100%'\r\n    },\r\n    listItem: {\r\n        padding: 0\r\n    },\r\n    footer: {\r\n        marginTop: 'auto',\r\n        marginLeft: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n        color: theme.palette.text.secondary,\r\n        fontSize: '0.8rem',\r\n        '& a': {\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            color: 'inherit'\r\n        },\r\n        '& span': {\r\n            marginLeft: '0.1em'\r\n        }\r\n    },\r\n}));\r\n\r\nfunction SideDrawer({ isAuthenticated, currentUser, open, onClose, switchedDarkMode }) {\r\n    const classes = useStyles();\r\n\r\n    let links = {\r\n        'Feed': { to: '/feed' },\r\n        'Discover Users': { to: '/discover' }\r\n    };\r\n\r\n    if (isAuthenticated) {\r\n        links = {\r\n            ...links,\r\n            'My Profile': { to: `/profile/${currentUser._id}` },\r\n            'Settings': { to: '/settings' },\r\n            'Logout': { to: '/logout' }\r\n        };\r\n    } else {\r\n        links = {\r\n            ...links,\r\n            'Login': { to: '/login' },\r\n            'Register': { to: '/register' }            \r\n        };\r\n    }\r\n\r\n    return (\r\n        <Drawer\r\n            anchor='left'\r\n            open={open}\r\n            onClose={onClose}\r\n            className={classes.drawer}\r\n            classes={{\r\n                paper: classes.drawerPaper,\r\n            }} >\r\n                \r\n            <CoverPhoto backgroundUrl={(currentUser.banner_pic) || DEFAULT_BANNER} />\r\n            <div onClick={onClose} className={classes.closeIcon}>&#10006;</div>\r\n            {isAuthenticated && <UserInfo currentUser={currentUser} />}\r\n\r\n            <div className={classes.drawerContainer}>\r\n\r\n                <List style={{padding: 0}} onClick={onClose}>\r\n                    {Object.keys(links).map(key => (\r\n                        <ListItem key={key} button className={classes.listItem}>\r\n                            <Link className={classes.link} {...links[key]} >{key}</Link>\r\n                        </ListItem>\r\n                    ))}\r\n                </List>\r\n\r\n            </div>\r\n            \r\n            <div className={classes.footer}>\r\n                <IconButton onClick={switchedDarkMode}>\r\n                    <Brightness4Icon />\r\n                </IconButton>\r\n                <p>2020 Plazon</p>\r\n                <p>Created by: <strong>Tulio Vieira</strong></p>\r\n                <a href=\"https://github.com/tulio-vieira/\"><GitHubIcon style={{height: '0.8em'}}/><span>/tulio-vieira</span></a>\r\n            </div>\r\n        </Drawer>\r\n    );\r\n}\r\n\r\nexport default SideDrawer;","import React, { Component, Fragment } from 'react';\r\nimport NavBar from '../components/Navigation/NavBar/NavBar';\r\nimport SideDrawer from '../components/Navigation/SideDrawer/SideDrawer';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { connect } from 'react-redux';\r\n\r\nconst styles = (theme) => ({\r\n    wrapper: {\r\n        color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n        margin: '0 20%',\r\n        paddingTop: 60,\r\n        [theme.breakpoints.down(960)]: {\r\n            margin: '0 10%',\r\n        },\r\n        [theme.breakpoints.down(600)]: {\r\n            margin: '0 5%',\r\n            paddingTop: 56\r\n        },\r\n        [theme.breakpoints.down(350)]: {\r\n            margin: 0,\r\n        },\r\n    }\r\n});\r\n\r\nclass Layout extends Component {\r\n    state = { showSideDrawer: false };\r\n\r\n    sideDrawerToggleHandler = () => {\r\n        this.setState((prevState) => {\r\n            return { showSideDrawer: !prevState.showSideDrawer };\r\n        });\r\n    }\r\n\r\n    sideDrawerClosedHandler = () => {\r\n        this.setState({ showSideDrawer: false });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Fragment>\r\n                <NavBar\r\n                    switchedDarkMode={this.props.switchedDarkMode}\r\n                    menuClicked={this.sideDrawerToggleHandler}\r\n                    isAuthenticated={this.props.isAuthenticated}\r\n                    currentUser={this.props.currentUser} />\r\n                <SideDrawer\r\n                    switchedDarkMode={this.props.switchedDarkMode}\r\n                    isAuthenticated={this.props.isAuthenticated}\r\n                    currentUser={this.props.currentUser}\r\n                    open={this.state.showSideDrawer}\r\n                    onClose={this.sideDrawerClosedHandler} />\r\n                <main className={this.props.classes.wrapper}>\r\n                    {this.props.children}\r\n                </main>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isAuthenticated: state.auth.token !== null,\r\n        currentUser: state.auth.currentUser,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps)(withStyles(styles)(Layout));","import React, { useRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nexport default function EmbedContentDialog({ open, onClose, defaultValue, onSubmit }) {\r\n  const refInput = useRef();\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose}>\r\n      <DialogTitle>Embed Content</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>\r\n          Share image or video (youtube or vimeo) \r\n        </DialogContentText>\r\n        <TextField\r\n          inputProps={{maxLength: 1000}}\r\n          defaultValue={defaultValue}\r\n          autoFocus\r\n          margin=\"dense\"\r\n          label=\"Paste link here\"\r\n          type=\"text\"\r\n          fullWidth\r\n          onKeyPress={(e) => { if (e.charCode === 13) onSubmit(refInput.current.value) }}\r\n          inputRef={refInput}\r\n        />\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onClose} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={() => onSubmit(refInput.current.value)} color=\"primary\">\r\n          Ok\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = (maxWidth) => makeStyles((theme) => ({\r\n  embededContent: {\r\n    position: 'relative',\r\n    maxWidth: maxWidth,\r\n    margin: '0 auto',\r\n    overflow: 'hidden'\r\n  },\r\n  iframeContainer: {\r\n    position: 'relative',\r\n    width: '100%',\r\n    paddingBottom: '56.25%',\r\n    height: 0,\r\n    '& iframe': {\r\n      borderRadius: 10,\r\n      position: 'absolute',\r\n      top: 0,\r\n      left: 0,\r\n      width: '100%',\r\n      height: '100%'\r\n    }\r\n  },\r\n  image: {\r\n    objectFit: 'contain',\r\n    width: '100%',\r\n    maxHeight: maxWidth*0.6\r\n  }\r\n}));\r\n\r\nexport default function EmbededContent({ contentUrl, isVideo, children, isSmall }) {\r\n  const classes = useStyles(isSmall ? 500 : 800)();\r\n\r\n  return (\r\n    <div className={classes.embededContent}>\r\n\r\n      {children}\r\n\r\n      {isVideo ?\r\n          <div className={classes.iframeContainer}>\r\n            <iframe\r\n              width=\"560\"\r\n              height=\"315\"\r\n              title='video'\r\n              src={contentUrl} frameBorder=\"0\" \r\n              allow=\"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n              allowFullScreen></iframe>\r\n          </div>\r\n        :\r\n        <img className={classes.image} src={contentUrl} alt='Not found'/>\r\n      }\r\n      \r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport EmbededContent from '../Comments/EmbededContent';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  contentPreview: {\r\n    border: '1px solid ' + theme.palette.text.secondary,\r\n    padding: theme.spacing(2),\r\n    borderRadius: 16,\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  closeIconContainer: {\r\n    position: 'absolute',\r\n    padding: 6,\r\n    top: -6,\r\n    right: -6,\r\n    zIndex: 100,\r\n    cursor: 'pointer',\r\n    borderRadius: '50%',\r\n    backgroundColor: theme.palette.background.mid,\r\n    boxShadow: '0px 0px 2px 2px ' + theme.palette.background.mid\r\n  },\r\n  closeIcon: {\r\n    padding: 5,\r\n    color: 'white',\r\n    backgroundColor: 'red',\r\n    fontSize: 20,\r\n    width: 32,\r\n    height: 32,\r\n    textAlign: 'center',\r\n    lineHeight: '100%',\r\n    borderRadius: '50%'\r\n  }\r\n}));\r\n\r\nexport default function ContentPreview({ contentUrl, isVideo, onClear }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.contentPreview}>\r\n\r\n        <EmbededContent\r\n          isSmall={true}\r\n          contentUrl={contentUrl}\r\n          isVideo={isVideo} >\r\n\r\n          <div className={classes.closeIconContainer} onClick={onClear}>\r\n            <div className={classes.closeIcon}>&#10006;</div>\r\n          </div>\r\n\r\n        </EmbededContent>\r\n        \r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { IconButton, Input, Tooltip, Typography } from '@material-ui/core';\r\nimport BottomOptions from '../BottomOptions';\r\nimport { DEFAULT_PROFILE_PIC, VIDEO_VALIDATORS } from '../../shared/utility';\r\nimport CropOriginalIcon from '@material-ui/icons/CropOriginal';\r\nimport EmbedContentDialog from './EmbedContentDialog';\r\nimport ContentPreview from './ContentPreview';\r\n\r\nconst styles = (theme) => ({\r\n  createPost: {\r\n    backgroundColor: theme.palette.background.mid,\r\n    borderRadius: 16,\r\n    padding: theme.spacing(3),\r\n    paddingTop: theme.spacing(2),\r\n    margin: theme.spacing(2) + 'px 0',\r\n  },\r\n  wrapper: {\r\n    display: 'flex'\r\n  },\r\n  textArea: {\r\n    fontSize: '1rem',\r\n    width: '100%',\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.front,\r\n    color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n    borderRadius: '0 0 25px 25px',\r\n    border: 'none',\r\n    outline: 'none',\r\n    resize: 'none',\r\n    height: 150,\r\n    padding: theme.spacing(2),\r\n    fontFamily: 'inherit',\r\n  },\r\n  image: {\r\n    borderRadius: '50%',\r\n    width: 60,\r\n    height: 60\r\n  },\r\n  title: {\r\n    borderRadius: '25px 25px 25px 25px',\r\n    overflow: 'hidden',\r\n    backgroundColor: theme.palette.background.front,\r\n    padding: theme.spacing(2),\r\n    paddingBottom: theme.spacing(1),\r\n    fontSize: '1.1em',\r\n    zIndex: 10,\r\n  },\r\n  titleFocus: {\r\n    borderRadius: '25px 25px 0 0',\r\n  },\r\n  messageClass: {\r\n    color: theme.palette.success.light\r\n  },\r\n  container: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    marginRight: theme.spacing(2),\r\n    alignItems: 'center'\r\n  },\r\n  icon: {\r\n    marginTop: 50,\r\n    color: '#81c784'\r\n  },\r\n  [theme.breakpoints.down('xs')]: {\r\n    wrapper: {\r\n      flexDirection: 'column',\r\n      alignItems: 'center'\r\n    },\r\n    icon: {\r\n      margin: 0\r\n    },\r\n    image: {\r\n      margin: '0 auto'\r\n    },\r\n    container: {\r\n      flexDirection: 'row',\r\n      width: '100%',\r\n      alignItems: 'flex-end',\r\n      margin: theme.spacing(0,0,2,0)\r\n    }\r\n  }\r\n});\r\n\r\nclass CreatePost extends Component {\r\n  state = {\r\n    title: '',\r\n    body: '',\r\n    show: false,\r\n    showDialog: false,\r\n    touched: false,\r\n    loading: false,\r\n    urlSubmitted: null,\r\n    urlTransformed: null,\r\n    isVideo: false\r\n  };\r\n\r\n  handleFocusIn = () => {\r\n    this.setState({ show: true });\r\n  }\r\n\r\n  handleFocusOut = () => {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleText = (field, event) => {\r\n    this.setState({[field]: event.target.value, touched: true});\r\n  }\r\n\r\n  // add urlTransformed to this handler\r\n  submitHandler = async () => {\r\n    if (this.state.title === '') return this.setState({touched: true});\r\n    if (!this.props.isAuthenticated) return this.props.onAuthFail();\r\n    this.setState({ loading: true });\r\n    let newPost = {title: this.state.title, body: this.state.body};\r\n    if (this.state.urlTransformed) {\r\n      newPost.contentUrl = this.state.urlTransformed;\r\n      newPost.isVideo = this.state.isVideo\r\n    }\r\n    try {\r\n      await this.props.postSubmitted(newPost);\r\n      this.setState({ title: '', body: '', show: false, touched: false, loading: false });\r\n    } catch(err) {\r\n      this.setState({ loading: false });\r\n    }\r\n  }\r\n\r\n  handleDialog = () => {\r\n    this.setState(prevState => ({showDialog: !prevState.showDialog }))\r\n  }\r\n\r\n  handleLinkSubmitted = (urlSubmitted) => {\r\n    if (urlSubmitted.length === 0) return this.clearContentLink();\r\n    let urlTransformed = urlSubmitted.trim();\r\n    let isVideo = false;\r\n    for (let validator of VIDEO_VALIDATORS) {\r\n      const matchArr = urlTransformed.match(validator.regex);\r\n      if (!matchArr) continue;\r\n      urlTransformed = validator.embedUrl + matchArr[1];\r\n      isVideo = true;\r\n      break;\r\n    }\r\n    this.setState({ showDialog: false, urlSubmitted, urlTransformed, isVideo });\r\n  }\r\n\r\n  clearContentLink = () => {\r\n    this.setState({ showDialog: false, urlSubmitted: null, urlTransformed: null });\r\n  }\r\n\r\n  render() {\r\n    const classes = this.props.classes;\r\n    return (\r\n      <div className={classes.createPost}>\r\n        <Typography style={{ marginBottom: '0.7em', fontWeight: 'lighter' }} variant='h6'>What's on your mind?</Typography>\r\n        <div className={classes.wrapper}>\r\n          \r\n          <div className={classes.container}>\r\n            <img className={classes.image} src={this.props.profile_pic || DEFAULT_PROFILE_PIC} alt=\"\" />\r\n            {this.state.show && \r\n              <Tooltip title=\"Embed content\">\r\n                <IconButton className={classes.icon} onClick={this.handleDialog}>\r\n                  <CropOriginalIcon/>\r\n                </IconButton>\r\n              </Tooltip>\r\n            }\r\n          </div>\r\n\r\n          <div style={{ width: '100%' }}>\r\n            <Input\r\n              disabled={this.state.loading}\r\n              maxLength={100}\r\n              error={this.state.touched && this.state.title === ''}\r\n              onClick={this.handleFocusIn}\r\n              className={classes.title + ' ' + (this.state.show ? classes.titleFocus : '')}\r\n              fullWidth\r\n              placeholder='Title (required)'\r\n              onChange={this.handleText.bind(this, 'title')}\r\n              value={this.state.title} />\r\n            {this.state.show ?\r\n              <>\r\n                <textarea\r\n                  disabled={this.state.loading}\r\n                  maxLength={300}\r\n                  value={this.state.body}\r\n                  placeholder=\"Text (optional)\"\r\n                  onChange={this.handleText.bind(this, 'body')}\r\n                  className={classes.textArea} />\r\n                <BottomOptions\r\n                  mainButtonClicked={this.submitHandler}\r\n                  mainButtonDisabled={this.state.loading}\r\n                  handleCanceled={this.handleFocusOut}\r\n                  mainButtonColor='secondary'\r\n                  mainButtonText='Post'\r\n                  messageClass={classes.messageClass}\r\n                  message={(300 - this.state.body.length) + ' characters remaining'} />\r\n              </>\r\n              : null}\r\n          </div>\r\n        </div>\r\n\r\n        {this.state.show && this.state.urlTransformed && \r\n          <ContentPreview\r\n            contentUrl={this.state.urlTransformed}\r\n            isVideo={this.state.isVideo}\r\n            onClear={this.clearContentLink} />\r\n        }\r\n\r\n        <EmbedContentDialog\r\n          onClose={this.handleDialog}\r\n          onSubmit={this.handleLinkSubmitted}\r\n          defaultValue={this.state.urlSubmitted}\r\n          open={this.state.showDialog} />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(CreatePost);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from '../axios-instance';\r\n\r\n// meant to be used with withAuthGard\r\nconst withLikeSystem = ( WrappedComponent, routeToSubmitLike ) => {\r\n  class LikeSystem extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        like_count: props.like_count,\r\n        dislike_count: props.dislike_count,\r\n        liked: props.liked || 0\r\n      };\r\n    }\r\n  \r\n    likeHandler = (isLike) => {\r\n      if (!this.props.token) return this.props.onAuthFail();\r\n      this.submitLike(isLike);\r\n      let newState = {...this.state, liked: isLike ? 1 : -1};\r\n      if (newState.liked === this.state.liked) {\r\n        newState.liked === 1 ? newState.like_count-- : newState.dislike_count--;\r\n        newState.liked = 0;\r\n      } else if (this.state.liked === 0) {\r\n        newState.liked === 1 ? newState.like_count++ : newState.dislike_count++;\r\n      } else {\r\n        newState.like_count += newState.liked;\r\n        newState.dislike_count -= newState.liked;\r\n      }\r\n      this.setState(newState);\r\n    }\r\n\r\n    submitLike = (isLike) => {\r\n      axios({\r\n        method: 'POST',\r\n        url: routeToSubmitLike + '/' + this.props._id,\r\n        headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n        data: { isLike },\r\n      })\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <WrappedComponent\r\n          {...this.props}\r\n          liked={this.state.liked}\r\n          token={this.props.token}\r\n          userPic={this.props.userPic}\r\n          like_count={this.state.like_count}\r\n          dislike_count={this.state.dislike_count}\r\n          likeHandler={this.likeHandler} />\r\n      );\r\n    }\r\n  }\r\n\r\n  const mapStateToProps = state => {\r\n    return {\r\n      token: state.auth.token,\r\n      userPic: state.auth.currentUser.profile_pic\r\n    };\r\n  };\r\n  \r\n  return connect( mapStateToProps )( LikeSystem );\r\n}\r\n\r\nexport default withLikeSystem;","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\nimport ArrowUpwardRoundedIcon from '@material-ui/icons/ArrowUpwardRounded';\r\nimport ArrowDownwardRoundedIcon from '@material-ui/icons/ArrowDownwardRounded';\r\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { Link } from 'react-router-dom';\r\nimport withLikeSystem from '../../hoc/withLikeSystem';\r\nimport EmbededContent from '../../components/Comments/EmbededContent';\r\n\r\nconst styles = (theme) => ({\r\n  handle: {\r\n    color: theme.palette.primary.light,\r\n    '& a': {\r\n      color: 'inherit',\r\n      textDecoration: 'none',\r\n      '&:hover': {\r\n        textDecoration: 'underline'\r\n      }\r\n    }\r\n  },\r\n  image: {\r\n    borderRadius: '50%',\r\n    width: 60,\r\n    height: 60,\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  post: {\r\n    padding: theme.spacing(3),\r\n    paddingBottom: theme.spacing(1.5),\r\n    backgroundColor: theme.palette.background.front,\r\n    borderRadius: 16,\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2)\r\n  },\r\n  divider: {\r\n    borderBottom: theme.palette.text.secondary\r\n  },\r\n  authorInfo: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    fontSize: '0.9rem',\r\n    marginBottom: theme.spacing(1.5)\r\n  },\r\n  icon: {\r\n    marginBottom: '-0.3em'\r\n  },\r\n  iconButton: {\r\n    padding: 8,\r\n  },\r\n  title: {\r\n    marginBottom: theme.spacing(1)\r\n  },\r\n  spacer: {\r\n    padding: theme.spacing(1.5)\r\n  },\r\n  link: {\r\n    color: 'inherit',\r\n    textDecoration: 'none'\r\n  },\r\n  bodyLink: {\r\n    marginLeft: '1em',\r\n    color: '#216fdb',\r\n    textDecoration: 'none',\r\n    '&:hover': {\r\n      textDecoration: 'underline'\r\n    }\r\n  },\r\n  embededWrapper: {\r\n    margin: theme.spacing(2,0,2,0),\r\n    [theme.breakpoints.up('sm')]: {\r\n      backgroundColor: theme.palette.background.mid,\r\n      padding: theme.spacing(2),\r\n      borderRadius: 16,\r\n      marginTop: theme.spacing(1)\r\n    }\r\n  }\r\n});\r\n\r\nclass Post extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.body = props.body ? props.body.replace(/\\n\\n+/g, '\\n') : null;\r\n    if (!props.detail && this.body && this.body.length > 100) this.body = this.body.substring(0, 100) + ' ...';\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      classes,\r\n      body,\r\n      detail,\r\n      like_count,\r\n      dislike_count,\r\n      liked,\r\n      children,\r\n      _id,\r\n      author_id,\r\n      profile_pic,\r\n      date,\r\n      name,\r\n      username,\r\n      comment_count,\r\n      title,\r\n      linkToProfile,\r\n      contentUrl,\r\n      isVideo\r\n    } = this.props;\r\n\r\n    function LinkToProfile({children, noClass}) {\r\n      return linkToProfile ? <Link className={!noClass ? classes.link : ''} to={'/profile/' + author_id}>\r\n        {children}\r\n      </Link> :\r\n      children;\r\n    }\r\n\r\n    function LinkToPost({ children }) {\r\n      return detail ? children :\r\n      <Link style={{textDecoration: 'none', color: 'inherit'}} to={'/post/' + _id}>\r\n        {children}\r\n      </Link>\r\n    }\r\n\r\n    return (\r\n      <div className={classes.post + ' ' + (detail ? classes.divider : '')} style={detail ? {margin: 0, borderRadius: 0} : null}>\r\n        {children}\r\n        <div className={classes.authorInfo}>\r\n          <LinkToProfile><img className={classes.image} src={profile_pic} alt=\"\" /></LinkToProfile>\r\n          <div className={classes.info}>\r\n            <LinkToProfile><Typography style={{ fontWeight: '400' }} variant='body1'>{name}</Typography></LinkToProfile>\r\n          \r\n            <Typography style={{ fontWeight: '300' }} variant='body2'>\r\n              <span className={classes.handle}>\r\n                <LinkToProfile noClass >{'@' + username}</LinkToProfile>\r\n              </span>  ·  {date}  ·  <ChatBubbleOutlineIcon fontSize=\"small\" className={classes.icon}/>  {comment_count}\r\n            </Typography>\r\n          </div>\r\n        </div>\r\n\r\n        <Typography className={classes.title} variant='h5'>         \r\n          { detail ? title :\r\n          <Link to={'/post/' + _id} className={classes.link} >\r\n            {title}\r\n          </Link>}\r\n        </Typography>\r\n        \r\n        {contentUrl && <LinkToPost>\r\n          <div className={classes.embededWrapper}>\r\n            <EmbededContent\r\n              isSmall={!detail}\r\n              contentUrl={contentUrl}\r\n              isVideo={isVideo} />\r\n          </div>\r\n        </LinkToPost>}\r\n\r\n        <Typography paragraph style={{whiteSpace: 'pre-wrap'}}>\r\n          {this.body}\r\n          {!detail && body && body.length > 100 && <Link to={'/post/' + _id} className={classes.bodyLink} >\r\n            Read more\r\n          </Link>}\r\n        </Typography>\r\n\r\n        <Typography style={{ fontWeight: '300' }} variant='body2'>\r\n          <IconButton onClick={() => this.props.likeHandler(true)} style={{color: (liked === 1) && 'green'}} className={classes.iconButton} edge='start'><ArrowUpwardRoundedIcon /></IconButton>{'  ' + (like_count)}\r\n          <span className={classes.spacer} />\r\n          <IconButton onClick={() => this.props.likeHandler(false)} style={{color: (liked === -1) && 'red'}} className={classes.iconButton}><ArrowDownwardRoundedIcon /></IconButton>{'  ' + (dislike_count)}\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withLikeSystem( withStyles(styles)(Post), '/posts' );","import React, { Component } from 'react';\r\n\r\nclass Observer extends Component {\r\n  observer = new IntersectionObserver(entries => {\r\n    if (entries[0].isIntersecting) {\r\n      this.observer.unobserve(entries[0].target);\r\n      this.props.hasBeenSeen();\r\n    }\r\n  });\r\n\r\n  render() {\r\n    return (\r\n      <div ref={el => {if(el) this.observer.observe(el)}}/>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Observer;","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport * as actions from '../store/actions/index';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function withAuthGard ( WrappedComponent ) {\r\n  class AuthGard extends Component {\r\n    state = { open: false };\r\n\r\n    render() {\r\n      return (\r\n        <>\r\n          <Dialog\r\n            open={this.state.open}\r\n            onClose={() => this.setState({open: false})}>\r\n            <DialogTitle>You need to be logged in to do that!</DialogTitle>\r\n            <DialogActions>\r\n              <Link to='/register' style={{textDecoration: 'none'}}>\r\n                <Button onClick={() => this.props.setAuthRedirectPath(this.props.location.pathname)} color=\"primary\">\r\n                  Register\r\n                </Button>\r\n              </Link>\r\n              <Link to='/login' style={{textDecoration: 'none'}}>\r\n                <Button onClick={() => this.props.setAuthRedirectPath(this.props.location.pathname)} color=\"primary\" autoFocus>\r\n                  Login\r\n                </Button>\r\n              </Link>\r\n            </DialogActions>\r\n          </Dialog>\r\n          <WrappedComponent \r\n            {...this.props}\r\n            token={this.props.token}\r\n            userPic={this.props.userPic}\r\n            onAuthFail={() => this.setState({ open: true })}\r\n          />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n  \r\n  const mapStateToProps = state => {\r\n    return {\r\n      token: state.auth.token,\r\n      userPic: state.auth.currentUser.profile_pic\r\n    };\r\n  };\r\n  \r\n  const mapDispatchToProps = dispatch => {\r\n    return {\r\n      setAuthRedirectPath: (path) => dispatch( actions.setAuthRedirectPath(path) )\r\n    };\r\n  };\r\n\r\n  return connect( mapStateToProps, mapDispatchToProps )( withRouter( AuthGard ) );\r\n}","import React, { Component } from 'react';\r\nimport Post from './Post';\r\nimport axios from '../../axios-instance';\r\nimport { LinearProgress, withStyles } from '@material-ui/core';\r\nimport Observer from '../../components/Observer';\r\nimport withAuthGard from '../../hoc/withAuthGard';\r\n\r\nconst styles = (theme) => ({\r\n  loading: {\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n});\r\n\r\n// takes in url, detail and addedPosts (optional)\r\nclass PostList extends Component {\r\n  state = {\r\n    posts: [],\r\n    loading: true,\r\n    hasMore: true,\r\n    pageNumber: 1,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.makeRequest();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.url !== prevProps.url) {\r\n      this.setState({ posts: [], loading: true, hasMore: true, pageNumber: 1 });\r\n      this.makeRequest();\r\n    }\r\n  }\r\n\r\n  makeRequest() {\r\n    axios({\r\n      method: 'GET',\r\n      url: this.props.url,\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      params: { page: this.state.pageNumber },\r\n    })\r\n    .then(res => {\r\n      if (!res) return;\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          posts: [...prevState.posts, ...res.data.posts],\r\n          loading: false,\r\n          hasMore: res.data.next ? true : false\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleScroll = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      pageNumber: prevState.pageNumber + 1,\r\n      loading: true\r\n    }));\r\n    this.makeRequest();\r\n  }\r\n\r\n  render() {\r\n    const {classes, onAuthFail, postsAdded, linkToProfile } = this.props;\r\n    const posts = postsAdded ? postsAdded.concat(this.state.posts) : this.state.posts;\r\n    return (\r\n      <>\r\n        {posts.map((post, index) => {\r\n          return <Post\r\n              detail={false}\r\n              key={post._id}\r\n              author_id={post.author._id}\r\n              _id={post._id}\r\n              onAuthFail={onAuthFail}\r\n              profile_pic={post.author.profile_pic}\r\n              name={post.author.name}\r\n              username={post.author.username}\r\n              comment_count={post.comment_count}\r\n              dislike_count={post.dislike_count}\r\n              like_count={post.like_count}\r\n              liked={post.liked}\r\n              title={post.title}\r\n              body={post.body}\r\n              date={post.date_formatted}\r\n              linkToProfile={linkToProfile}\r\n              contentUrl={post.contentUrl}\r\n              isVideo={post.isVideo} >\r\n                {(posts.length === index + 1) && !this.state.loading && this.state.hasMore && <Observer hasBeenSeen={this.handleScroll}/>}\r\n            </Post>\r\n        })}\r\n        {this.state.loading && <LinearProgress className={classes.loading} />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuthGard( withStyles(styles)(PostList) );","import React, { Component } from 'react';\r\nimport CreatePost from '../components/CreatePost/CreatePost';\r\nimport axios from '../axios-instance';\r\nimport withErrorHandler from '../hoc/withErrorHandler';\r\nimport { connect } from 'react-redux';\r\nimport PostList from './PostList/PostList';\r\nimport withAuthGard from '../hoc/withAuthGard';\r\n\r\nclass Feed extends Component {\r\n  state = {\r\n    postsAdded: []\r\n  };\r\n\r\n  handlePostCreate = (newPost) => {\r\n    return axios({\r\n      method: 'POST',\r\n      url: '/posts',\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      data: newPost\r\n    })\r\n    .then(res => {\r\n      res.data.author = {\r\n        _id: res.data.author,\r\n        profile_pic: this.props.profile_pic,\r\n        name: this.props.name,\r\n        username: this.props.username\r\n      };\r\n      this.setState({postsAdded: [res.data, ...this.state.postsAdded]});\r\n    })\r\n    .catch(err => {\r\n      return Promise.reject(err);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <CreatePost\r\n          onAuthFail={this.props.onAuthFail}\r\n          postSubmitted={this.handlePostCreate}\r\n          isAuthenticated={this.props.token !== null}\r\n          profile_pic={this.props.profile_pic} />\r\n\r\n        <PostList \r\n          postsAdded={this.state.postsAdded}\r\n          url={'/posts'}\r\n          detail={false}\r\n          linkToProfile={true} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    profile_pic: state.auth.currentUser.profile_pic,\r\n    name: state.auth.currentUser.name,\r\n    username: state.auth.currentUser.username\r\n  };\r\n};\r\n\r\nexport default withErrorHandler( connect( mapStateToProps )( withAuthGard(Feed) ), null, axios);","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { DEFAULT_PROFILE_PIC } from '../../shared/utility';\r\nimport { Button, Input } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  image: {\r\n    height: 32,\r\n    width: 32,\r\n    borderRadius: '50%',\r\n    marginRight: theme.spacing(1),\r\n    [theme.breakpoints.down(350)]: {\r\n      marginTop: 5,\r\n      height: 20,\r\n      width: 20,\r\n      marginRight: theme.spacing(0.5)\r\n    }\r\n  },\r\n  reply: {\r\n    display: 'flex',\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n  replyButton: {\r\n    textTransform: 'capitalize',\r\n    marginTop: theme.spacing(0.6),\r\n    marginLeft: theme.spacing(0.6),\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    justifyContent: 'flex-end'\r\n  }\r\n}));\r\n\r\nexport default function CreateComment({ onChange, value, replyClicked, textBoxClosed, userPic, disabled, error, handleAuthFail }) {\r\n  \r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.reply}>\r\n      <img className={classes.image} src={userPic || DEFAULT_PROFILE_PIC} alt='' />\r\n      <div style={{ width: '100%' }}>\r\n        <Input\r\n          style={{fontSize: '1em'}}\r\n          error={error}\r\n          disabled={disabled}\r\n          maxLength={200}\r\n          onChange={onChange}\r\n          value={value}\r\n          fullWidth \r\n          placeholder='Add reply...'\r\n          multiline />\r\n        <div className={classes.buttons}>\r\n          {textBoxClosed &&\r\n            <Button\r\n              disabled={disabled}\r\n              onClick={textBoxClosed}\r\n              variant=\"contained\" disableElevation\r\n              className={classes.replyButton}\r\n              size='small' >Cancel</Button>\r\n          }\r\n          <Button\r\n            disabled={disabled}\r\n            onClick={handleAuthFail || replyClicked}\r\n            variant=\"contained\" disableElevation\r\n            color='secondary'\r\n            className={classes.replyButton}\r\n            size='small'>Reply</Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ArrowForwardIosRoundedIcon from '@material-ui/icons/ArrowForwardIosRounded';\r\nimport ArrowBackIosRoundedIcon from '@material-ui/icons/ArrowBackIosRounded';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  showMore: {\r\n    marginBottom: theme.spacing(1),\r\n    color: theme.palette.primary.light,\r\n    textDecoration: 'none',\r\n    '&:hover': {\r\n      textDecoration: 'underline'\r\n    },\r\n    cursor: 'pointer',\r\n    fontSize: '0.9em',\r\n  },\r\n}));\r\n\r\nexport default function LinkThread({ forward, children, to, onClick }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div style={{marginBottom: 8}}>\r\n      {onClick ? <span className={classes.showMore} onClick={onClick} >{children}</span> :\r\n      <Link to={to} className={classes.showMore} style={{display: 'flex', alignItems: 'center'}}>\r\n        {!forward && <ArrowBackIosRoundedIcon fontSize='small'/>}\r\n        <span>{children}</span>\r\n        {forward && <ArrowForwardIosRoundedIcon fontSize='small'/>}\r\n      </Link>}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button } from '@material-ui/core';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowUpwardRoundedIcon from '@material-ui/icons/ArrowUpwardRounded';\r\nimport ArrowDownwardRoundedIcon from '@material-ui/icons/ArrowDownwardRounded';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  commentData: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    marginBottom: theme.spacing(1.5)\r\n  },\r\n  image: {\r\n    marginTop: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    height: 32,\r\n    width: 32,\r\n    borderRadius: '50%',\r\n    [theme.breakpoints.down(350)]: {\r\n      height: 20,\r\n      width: 20\r\n    },\r\n  },\r\n  commentInfo: {\r\n    '& p': {\r\n      wordBreak: 'break-word'\r\n    }\r\n  },\r\n  username: {\r\n    margin: '0 0 0.1em 0',\r\n    fontSize: '0.9em',\r\n    color: theme.palette.text.secondary\r\n  },\r\n  rating: {\r\n    color: theme.palette.text.secondary,\r\n    margin: 0,\r\n    fontSize: '0.8em',\r\n    marginLeft: -theme.spacing(1),\r\n    marginTop: -theme.spacing(0.2),\r\n  },\r\n  link: {\r\n    textDecoration: 'none',\r\n    color: 'inherit',\r\n    '&:hover': {\r\n      textDecoration: 'underline'\r\n    }\r\n  }\r\n}));\r\n\r\nexport default function CommentData({\r\n  username,\r\n  body,\r\n  date,\r\n  like_count,\r\n  dislike_count,\r\n  liked,\r\n  likeHandler,\r\n  onReplyClicked,\r\n  author_id,\r\n  profile_pic,\r\n  disabled }) {\r\n  const classes = useStyles();\r\n\r\n  function OptionalLink({style, children, className}) {\r\n    return author_id ? <Link to={'/profile/' + author_id} style={style} className={className}>\r\n      {children}\r\n    </Link> : children;\r\n  }\r\n\r\n  return (\r\n    <div className={classes.commentData} style={disabled && {marginBottom: 0}}>\r\n      <OptionalLink style={{display: 'block', textDecoration: 'none'}}>\r\n        <img\r\n          className={classes.image}\r\n          src={profile_pic} alt='' />\r\n      </OptionalLink>\r\n      <div className={classes.commentInfo}>\r\n        <p className={classes.username}>\r\n          <OptionalLink className={classes.link}>{'@' + username}</OptionalLink>{'  ·  ' + date}\r\n        </p>\r\n        <p style={{margin: 0}} >{body}</p>\r\n        <div className={classes.rating}>\r\n          <IconButton disabled={disabled} size='small' color='inherit' onClick={() => likeHandler(true)} style={{color: (liked === 1) && 'green'}}><ArrowUpwardRoundedIcon fontSize='small' /></IconButton>{like_count}\r\n          <IconButton disabled={disabled} size='small' color='inherit' onClick={() => likeHandler(false)} style={{color: (liked === -1) && 'red'}}><ArrowDownwardRoundedIcon fontSize='small' /></IconButton>{dislike_count}\r\n          {onReplyClicked && \r\n            <Button\r\n              color=\"secondary\"\r\n              size='small'\r\n              style={{ textTransform: 'capitalize' }}\r\n              onClick={onReplyClicked}>Reply</Button>\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport { LinearProgress } from '@material-ui/core';\r\nimport CreateComment from './CreateComment';\r\nimport withLikeSystem from '../../hoc/withLikeSystem';\r\nimport LinkThread from './LinkThread';\r\nimport CommentData from './CommentData';\r\n\r\nconst styles = (theme) => ({\r\n  spacer: {\r\n    marginTop: -theme.spacing(3.5),\r\n    marginBottom: theme.spacing(2),\r\n    minWidth: 32,\r\n    [theme.breakpoints.down(350)]: {\r\n      minWidth: 20\r\n    },\r\n    '&:hover': {\r\n      '& div': {\r\n        backgroundColor: theme.palette.primary.main\r\n      }\r\n    }\r\n  },\r\n  verticalLine: {\r\n    backgroundColor: theme.palette.primary.light,\r\n    height: '100%',\r\n    margin: '0 auto',\r\n    width: 2\r\n  },\r\n  loading: {marginBottom: theme.spacing(1)}\r\n});\r\n\r\nclass Comment extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = this.props.handleData(this.props._id, 'willMount');\r\n    this.state.loading = false;\r\n    this.state.touched = false;\r\n    this.submitted = false;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      nextProps.children !== this.props.children ||\r\n      this.props.classes !== nextProps.classes ||\r\n      this.props.like_count !== nextProps.like_count ||\r\n      this.props.dislike_count !== nextProps.dislike_count ||\r\n      this.props.liked !== nextProps.liked ||\r\n      Object.keys(this.state).reduce((acc, key) => (acc || this.state[key] !== nextState[key]), false)\r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps){\r\n    if (prevProps.children !== this.props.children) {\r\n      if (this.submitted) {\r\n        this.setState({touched: false, showTextBox: false, newComment: '', loading: false});\r\n        this.submitted = false;\r\n      } else {\r\n        this.setState({loading: false});\r\n      }\r\n    }\r\n  }\r\n\r\n  handleLoadMore = () => {\r\n    this.setState({loading: true});\r\n    this.props.loadMore();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.handleData(this.props._id, 'willUnmount', this.state);\r\n  }\r\n\r\n  handleShowTextBox = () => {\r\n    this.setState(prevState => ({ showTextBox: !prevState.showTextBox }));\r\n  }\r\n\r\n  openShowMore = () => {\r\n    this.setState({show: true});\r\n  }\r\n\r\n  closeShowMore = () => {\r\n    this.setState({show: false});\r\n  }\r\n\r\n  postNewComment = () => {\r\n    if (this.state.newComment === '') return;\r\n    this.setState({loading: true});\r\n    this.submitted = true;\r\n    this.props.postNewComment(this.state.newComment);\r\n  }\r\n\r\n  commentControl = (e) => {\r\n    this.setState({ newComment: e.target.value, touched: true });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      profile_pic,\r\n      likeHandler,\r\n      like_count,\r\n      dislike_count,\r\n      liked,\r\n      author_id,\r\n      username,\r\n      date,\r\n      body,\r\n      classes,\r\n      loadMore,\r\n      continueThread } = this.props;\r\n\r\n    const children = this.props.children && this.props.children.length > 0 ? this.props.children : null;\r\n\r\n    return (\r\n      <div style={{ width: '100%' }}>\r\n \r\n        <CommentData\r\n          like_count={like_count}\r\n          dislike_count={dislike_count}\r\n          liked={liked}\r\n          likeHandler={likeHandler}\r\n          profile_pic={profile_pic}\r\n          author_id={author_id}\r\n          username={username}\r\n          body={body}\r\n          date={date}\r\n          onReplyClicked={this.handleShowTextBox} />\r\n\r\n        <div style={{ display: 'flex' }}>\r\n\r\n          <div onClick={this.state.show && children ? this.closeShowMore : null}\r\n            className={classes.spacer} style={(this.state.show && children) ? {cursor: 'pointer'} : null} >\r\n            { this.state.show && children && <div className={classes.verticalLine} /> }\r\n          </div>\r\n\r\n          <div style={{flexGrow: 1}}>\r\n\r\n            {this.state.showTextBox &&\r\n              <CreateComment\r\n                handleAuthFail={this.props.token ? null : this.props.onAuthFail}\r\n                userPic={this.props.userPic}\r\n                disabled={this.state.loading}\r\n                value={this.state.newComment}\r\n                error={this.state.touched && this.state.newComment === ''}\r\n                onChange={this.commentControl}\r\n                replyClicked={this.postNewComment}\r\n                textBoxClosed={this.handleShowTextBox} />\r\n            }\r\n\r\n            {children && !this.state.show && <LinkThread onClick={this.openShowMore} >Show More</LinkThread>}\r\n            {this.state.show ? children : null}\r\n            {continueThread && this.state.show && <LinkThread to={continueThread} forward >Continue Thread</LinkThread>}\r\n            {loadMore && this.state.show && <LinkThread onClick={this.handleLoadMore} >Load More</LinkThread>}\r\n            {this.state.loading && <LinearProgress className={classes.loading}/>}\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withLikeSystem( withStyles(styles)(Comment), '/comments' );\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport CreateComment from './CreateComment';\r\n\r\nexport default class StatefulCreateComment extends Component {\r\n  initialState = {\r\n    value: '',\r\n    loading: false,\r\n    touched: false\r\n  }\r\n  state = this.initialState;\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.renderSwitch !== this.props.renderSwitch) this.setState(this.initialState);\r\n  }\r\n\r\n  commentControl = (e) => {\r\n    this.setState({ value: e.target.value, touched: true });\r\n  }\r\n\r\n  postNewComment = () => {\r\n    if (this.state.value === '') return;\r\n    if (this.props.handleAuthFail) return this.props.handleAuthFail();\r\n    this.setState({ loading: true });\r\n    this.props.postNewComment(this.state.value)\r\n  }\r\n\r\n  render () {\r\n    return <CreateComment\r\n      userPic={this.props.userPic}\r\n      disabled={this.state.loading}\r\n      value={this.state.value}\r\n      error={this.state.touched && this.state.value === ''}\r\n      onChange={this.commentControl}\r\n      replyClicked={this.postNewComment} />\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport Comment from './Comment';\r\nimport StatefulCreateComment from './StatefulCreateComment';\r\nimport { withStyles } from '@material-ui/core';\r\nimport LinkThread from './LinkThread';\r\nimport axios from '../../axios-instance';\r\n\r\nconst styles = (theme) => ({\r\n  commentWrapper: {\r\n    padding: theme.spacing(3),\r\n    backgroundColor: theme.palette.background.mid,\r\n    [theme.breakpoints.down(400)]: {\r\n      padding: theme.spacing(1.5)\r\n    }\r\n  },\r\n  spacer: {\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n});\r\n\r\nclass Comments extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.initializeData(props.comments);\r\n    if (props.comments) this.updateCommentTree(props.comments);\r\n    this.state = { renderSwitch: false };\r\n  }\r\n\r\n  initializeData(comments) {\r\n    // holds data about local state of comments (is it showing its children? etc...)\r\n    this.commentsData = {};\r\n    // holds the structure of the comment tree in the following way:\r\n    // comment_tree = { <comment_id>: { children: [ <comment>, <comment> ] children_count: 2 }, <other_comment_id>: {...}, ... } \r\n    // children_count is necessary because the user can add comments and children_count will not change,\r\n    // and then we can fetch for more comments in the database using the right index based on children_count\r\n    this.comment_tree = {};\r\n    // holds the keys of the comments added. That way, when the servers retrieves the comments that were just added, \r\n    // they will not be added again to the comment tree\r\n    this.comment_ids_added = {};\r\n    this.startingDepth = comments[0] ? comments[0].depth : 0;\r\n    this.root = comments[0] ? comments[0].parent_id : this.props.postId;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    // has to do with continue thread\r\n    if (nextProps.rootId !== this.props.rootId) {\r\n      this.initializeData(nextProps.comments);\r\n      this.updateCommentTree(nextProps.comments);\r\n      return true;\r\n    }\r\n    // has to do with loadmore\r\n    if (nextProps.comments !== this.props.comments) {\r\n      this.updateCommentTree(nextProps.comments);\r\n      return true;\r\n    }\r\n    return true;\r\n  }\r\n \r\n  updateCommentTree = (comments_arr) => {\r\n    let comment_tree = this.comment_tree;\r\n    for (let comment of comments_arr) {\r\n      if (this.comment_ids_added[comment._id]) continue;\r\n      if (comment_tree[comment.parent_id]) {\r\n        comment_tree[comment.parent_id].children.push(comment);\r\n        comment_tree[comment.parent_id].children_count++;\r\n      } else {\r\n        comment_tree[comment.parent_id] = { children: [comment], children_count: 1 };\r\n      }\r\n    }\r\n  }\r\n\r\n  postNewComment = (depth, parent_id, body) => {\r\n    axios ({\r\n      method: 'POST',\r\n      url: '/comments',\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      data: {\r\n        post_id: this.props.postId,\r\n        parent_id,\r\n        body,\r\n        depth,\r\n      }\r\n    }).then(res => {\r\n      this.comment_ids_added[res.data._id] = true;\r\n      this.comment_tree[parent_id] ?\r\n      this.comment_tree[parent_id].children.unshift(res.data) :\r\n      this.comment_tree[parent_id] = { children: [res.data] };\r\n      this.setState(prevState => ({renderSwitch: !prevState.renderSwitch}));\r\n    }).catch(err => {\r\n      this.comment_tree[parent_id] ?\r\n      this.comment_tree[parent_id].children = [...this.comment_tree[parent_id].children] :\r\n      this.comment_tree[parent_id] = { children: [] };\r\n      this.setState(prevState => ({renderSwitch: !prevState.renderSwitch}));\r\n      console.log(err);\r\n    })\r\n  }\r\n  \r\n  mapComments = (comments) => {\r\n    return comments.map(comment => {\r\n      \r\n      let children_count = 0;\r\n      try { children_count = this.comment_tree[comment._id].children_count || 0 } catch {};\r\n\r\n      let children = this.comment_tree[comment._id]\r\n        ? this.mapComments(this.comment_tree[comment._id].children) : null;\r\n\r\n      let endOfThread = (comment.depth !== this.startingDepth) && ((comment.depth - this.startingDepth) % this.props.maxDepth) === 0;\r\n      let loadMore = (children_count < comment.num_children);\r\n      const startDepth = loadMore && !endOfThread ? (comment.depth + 1 - this.startingDepth) % this.props.maxDepth : null;\r\n\r\n      return <Comment\r\n        key={comment._id}\r\n        like_count={comment.like_count}\r\n        dislike_count={comment.dislike_count}\r\n        liked={comment.liked}\r\n        profile_pic={comment.author.profile_pic}\r\n        author_id={comment.author._id}\r\n        username={comment.author.username}\r\n        onAuthFail={this.props.onAuthFail}\r\n        date={comment.date_formatted}\r\n        postNewComment={this.postNewComment.bind(this, comment.depth + 1, comment._id)}\r\n        _id={comment._id}\r\n        body={comment.body}\r\n        handleData={this.handleCommentData}\r\n        continueThread={ endOfThread && loadMore ? `/post/${this.props.postId}/${comment._id}` : null }\r\n        loadMore={startDepth ? () => this.props.handleLoadMore(comment._id, children_count, startDepth) : null} >\r\n          {children}\r\n      </Comment>\r\n    });\r\n  }\r\n\r\n  handleCommentData = (commentId, status, data) => {\r\n    switch (status) {\r\n      case 'willMount':\r\n        if (this.commentsData[commentId]) return this.commentsData[commentId];\r\n        return { showTextBox: false, show: true, newComment: '' };\r\n\r\n      case 'willUnmount':\r\n        return this.commentsData[commentId] = data;\r\n\r\n      default:\r\n        return { showTextBox: false, show: true, newComment: '' };\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.classes.commentWrapper}>\r\n        {\r\n          this.props.rootId === this.props.postId ?\r\n          <StatefulCreateComment\r\n            handleAuthFail={this.props.token ? null : this.props.onAuthFail}\r\n            userPic={this.props.userPic}\r\n            renderSwitch={this.state.renderSwitch}\r\n            postNewComment={this.postNewComment.bind(this, 0, this.props.postId)} />\r\n          : \r\n          <div className={this.props.classes.spacer}>\r\n            <LinkThread to={'/post/' + this.props.postId}>Go back to main thread</LinkThread>\r\n          </div>\r\n        }\r\n        {this.comment_tree[this.root] && this.mapComments(this.comment_tree[this.root].children)}\r\n\r\n        {this.root === this.props.postId && this.comment_tree[this.root] && this.comment_tree[this.root].children_count < this.props.post_num_children &&\r\n          <LinkThread onClick={() => this.props.handleLoadMore(this.root, this.comment_tree[this.root].children_count, 0)} >\r\n              Load More\r\n          </LinkThread>}\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Comments);","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backDrop: {\r\n    position: 'absolute',\r\n    backgroundColor: 'rgba(68, 68, 68, 0.5)',\r\n    zIndex: 100,\r\n    top: 0,\r\n    borderRadius: 16,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    transition: 'opacity 0.5s',\r\n    opacity: 1\r\n  },\r\n  hide: {\r\n    opacity: 0,\r\n    pointerEvents: 'none'\r\n  },\r\n  loadingCircle: {\r\n    position: 'fixed',\r\n    left: 'calc(50% - 20px)',\r\n    top: 'calc(50% - 20px)',\r\n  }\r\n}));\r\n\r\nexport default function LoadingModal({ show }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.backDrop + (show ? '' : classes.hide)}>\r\n      {show && <CircularProgress className={classes.loadingCircle} />}\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport Post from './PostList/Post';\r\nimport Comments from '../components/Comments/Comments';\r\nimport axios from '../axios-instance';\r\nimport { LinearProgress } from '@material-ui/core';\r\nimport withErrorHandler from '../hoc/withErrorHandler';\r\nimport LoadingModal from '../components/UI/LoadingModal';\r\nimport withAuthGard from '../hoc/withAuthGard';\r\n\r\nconst styles = (theme) => ({\r\n  loading: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  postDetail: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n    borderRadius: 16,\r\n    overflow: 'hidden',\r\n    position: 'relative'\r\n  }\r\n});\r\n\r\nclass PostDetail extends Component {\r\n  state = {\r\n    initialLoading: true,\r\n    loading: false,\r\n    post: {},\r\n    comments: [],\r\n    commentId: this.props.match.params.commentId,\r\n  };\r\n  maxDepth = 4;\r\n  limit = 5;\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.match.params.commentId !== this.props.match.params.commentId) {\r\n      this.setState({ loading: true });\r\n      const rootId = this.props.match.params.commentId || this.props.match.params.postId;\r\n      this.getComments(rootId, 0, 0, this.props.match.params.commentId ? true : false)\r\n      .then(res => { \r\n        this.setState({\r\n          comments: res.data.comments,\r\n          commentId: this.props.match.params.commentId,\r\n          loading: false\r\n        });\r\n      })\r\n      .catch(err => {console.log(err)});\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const withComments = !this.props.match.params.commentId;\r\n    Promise.all([\r\n      axios({\r\n        method: 'GET',\r\n        url: '/posts/' + this.props.match.params.postId,\r\n        headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n        params: { withComments, limit: this.limit, depth: this.maxDepth }\r\n      }),\r\n      withComments ? null : this.getComments(this.props.match.params.commentId, 0, 0, true)\r\n    ])\r\n    .then(resultsArr => {\r\n      this.setState({\r\n        initialLoading: false,\r\n        post: resultsArr[0].data.post,\r\n        comments: resultsArr[withComments ? 0 : 1].data.comments\r\n      });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  getComments(commentId, startIndex, startDepth, withParent) {\r\n    return axios ({\r\n      method: 'GET',\r\n      url: 'comments/' + commentId,\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      params: { startIndex, limit: this.limit, startDepth, withParent, depth: this.maxDepth }\r\n    })\r\n  }\r\n\r\n  handleLoadMore = (commentId, startIndex, startDepth, withParent) => {\r\n    this.getComments(commentId, startIndex, startDepth, withParent)\r\n    .then(res => {\r\n      this.setState({ comments: res.data.comments });\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const classes = this.props.classes;\r\n    const post = this.state.post;\r\n    return (\r\n      this.state.initialLoading ? <LinearProgress className={classes.loading} /> :\r\n      <div className={classes.postDetail}>\r\n        <LoadingModal show={this.state.loading}/>\r\n        <Post\r\n          _id={post._id}\r\n          onAuthFail={this.props.onAuthFail}\r\n          detail={true}\r\n          author_id={post.author._id}\r\n          profile_pic={post.author.profile_pic}\r\n          name={post.author.name}\r\n          username={post.author.username}\r\n          comment_count={post.comment_count}\r\n          dislike_count={post.dislike_count}\r\n          like_count={post.like_count}\r\n          title={post.title}\r\n          body={post.body}\r\n          liked={post.liked}\r\n          date={post.date_formatted}\r\n          contentUrl={post.contentUrl}\r\n          isVideo={post.isVideo}\r\n          linkToProfile={true} />\r\n        <Comments\r\n          rootId={this.state.commentId || post._id}\r\n          userPic={this.props.userPic}\r\n          token={this.props.token}\r\n          onAuthFail={this.props.onAuthFail}\r\n          post_num_children={post.num_children}\r\n          postId={this.state.post._id}\r\n          maxDepth={this.maxDepth}\r\n          comments={this.state.comments}\r\n          handleLoadMore={this.handleLoadMore} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default withErrorHandler( withAuthGard(PostDetail) , styles, axios);","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Button } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  profileTabs: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    width: '100%',\r\n    '& a': {\r\n      flexGrow: 1,\r\n      textDecoration: 'none',\r\n      position: 'relative'\r\n    },\r\n    '& button': {\r\n      width: '100%',\r\n      borderRadius: 0\r\n    },\r\n    '& span': {\r\n      color: theme.palette.type === 'dark' ? '#cccccc' : '#5d5d5d',\r\n    }\r\n  },\r\n  underline: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    backgroundColor: theme.palette.primary.main,\r\n    height: 2,\r\n    width: '100%',\r\n    transform: 'scaleX(0)',\r\n    transition: 'all 150ms linear',\r\n  },\r\n  active: {\r\n    '& div': {\r\n      transform: 'scaleX(1)'\r\n    },\r\n    '& span': {\r\n      color: theme.palette.type === 'dark' ? 'white' : 'black',\r\n    }\r\n  }\r\n}));\r\n\r\nexport default function ProfileTabs({ navLinks }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.profileTabs}>\r\n      {navLinks.map(navLink =>\r\n        <NavLink\r\n          key={navLink.title}\r\n          activeClassName={classes.active}\r\n          to={navLink.to}\r\n          exact><Button>{navLink.title}</Button><div className={classes.underline} /></NavLink>\r\n      )}\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from '../axios-instance';\r\n\r\n// meant to be used with withAuthGard\r\n// input: onAuthFail, followed, userId (the id of the user being followed/unfollowed)\r\n// output: displayFollowButton, followed, submitFollow\r\nconst withFollowSystem = ( WrappedComponent ) => {\r\n  class FollowSystem extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        followed: props.followed || false\r\n      };\r\n    }\r\n  \r\n    submitFollow = () => {\r\n      if (!this.props.token) return this.props.onAuthFail();\r\n      this.setState(prevState => ({ followed: !prevState.followed }));\r\n      axios({\r\n        method: 'POST',\r\n        url: '/users/' + this.props.userId,\r\n        headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      })\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <WrappedComponent\r\n          {...this.props}\r\n          displayFollowButton={this.props.userId !== this.props.currentUserId}\r\n          followed={this.state.followed}\r\n          submitFollow={this.submitFollow} />\r\n      );\r\n    }\r\n  }\r\n\r\n  const mapStateToProps = state => {\r\n    return {\r\n      token: state.auth.token,\r\n      currentUserId: state.auth.currentUser ? state.auth.currentUser._id : null\r\n    };\r\n  };\r\n  \r\n  return connect( mapStateToProps )( FollowSystem );\r\n}\r\n\r\nexport default withFollowSystem;","import React from 'react';\r\nimport { Button, IconButton, makeStyles } from '@material-ui/core';\r\nimport SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';\r\nimport CoverPhoto from '../../components/CoverPhoto';\r\nimport { convertDate } from '../../shared/utility';\r\nimport { Link } from 'react-router-dom';\r\nimport withFollowSystem from '../../hoc/withFollowSystem';\r\nimport withAuthGard from '../../hoc/withAuthGard';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  userInfo: {\r\n    display: 'flex',\r\n    alignItems: 'flex-start',\r\n    marginLeft: theme.spacing(3),\r\n    marginRight: theme.spacing(3),\r\n  },\r\n  image: {\r\n    position: 'relative',\r\n    top: -20,\r\n    height: 105,\r\n    width: 105,\r\n    borderRadius: '50%',\r\n    marginRight: theme.spacing(1.5),\r\n  },\r\n  data: {\r\n    '& p': {\r\n      margin: '0.3em',\r\n      color: theme.palette.text.secondary\r\n    }\r\n  },\r\n  settings: {\r\n    alignSelf: 'center',\r\n    marginLeft: 'auto',\r\n  },\r\n  [theme.breakpoints.down('xs')]: {\r\n    userInfo: {\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      marginBottom: theme.spacing(1)\r\n    },\r\n    settings: {\r\n      margin: 'auto'\r\n    },\r\n    data: {\r\n      textAlign: 'center'\r\n    },\r\n    image: {\r\n      margin: 0,\r\n      marginBottom: theme.spacing(1)\r\n    }\r\n  }\r\n}));\r\n\r\nfunction ProfileDashboard({\r\n  userId,\r\n  name,\r\n  username,\r\n  profile_pic,\r\n  banner_pic,\r\n  date_created,\r\n  description,\r\n  currentUserId,\r\n  followed,\r\n  submitFollow}) {\r\n    \r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <CoverPhoto backgroundUrl={banner_pic} />\r\n\r\n      <div className={classes.userInfo}>\r\n        <img className={classes.image} src={profile_pic} alt='' />\r\n        <div className={classes.data}>\r\n          <p style={{ fontSize: '1.4em' }}>{name}</p>\r\n          <p>{'@' + username}</p>\r\n          <p style={{ marginBottom: '0.6em' }}>{'Joined ' + convertDate(date_created)}</p>\r\n          <p style={{ marginBottom: '1em' }}>{description}</p>\r\n        </div>\r\n        {(currentUserId === userId) ?\r\n          <Link className={classes.settings} to='/settings'>\r\n            <IconButton  aria-label=\"delete\">\r\n                <SettingsOutlinedIcon />\r\n            </IconButton>\r\n          </Link>\r\n          :\r\n          <Button className={classes.settings}\r\n            variant='contained' color={followed ? 'default': 'primary'} onClick={submitFollow} >\r\n            {followed ? 'Following' : 'Follow'}\r\n          </Button>\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default withAuthGard( withFollowSystem( ProfileDashboard ) );","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport withFollowSystem from '../../hoc/withFollowSystem';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  userCard: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    width: '100%',\r\n    padding: theme.spacing(3),\r\n    borderBottom: '1px solid ' + (theme.palette.type === 'dark' ? 'black' : '#c5c5c5')\r\n  },\r\n  image: {\r\n    height: 60,\r\n    width: 60,\r\n    borderRadius: '50%',\r\n  },\r\n  userDetail: {\r\n    flexGrow: 1,\r\n    margin: '0 ' + theme.spacing(2) + 'px',\r\n  }\r\n}));\r\n\r\nfunction UserCard({ divider, children, userId, profile_pic, name, username, description, followed, submitFollow, displayFollowButton }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.userCard} style={divider ? null : { borderBottom: 'none' }}>\r\n      {children}\r\n      <Link to={'/profile/' + userId}>\r\n        <img className={classes.image} src={profile_pic} alt='' />\r\n      </Link>\r\n      <div className={classes.userDetail}>\r\n        <Typography style={{wordBreak: 'break-word'}} color='textPrimary'>\r\n          <Link style={{textDecoration: 'none', color: 'inherit'}} to={'/profile/' + userId}>\r\n            <strong>{name}</strong> · @{username}\r\n          </Link>\r\n        </Typography>\r\n        <Typography style={{wordBreak: 'break-word'}} color='textSecondary'>{description}</Typography>\r\n      </div>\r\n      { displayFollowButton && \r\n        <Button variant='contained' color={followed ? 'default': 'primary'} onClick={submitFollow} >\r\n          {followed ? 'Following' : 'Follow'}\r\n        </Button> }\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default withFollowSystem( UserCard );\r\n","import React, { Component } from 'react';\r\nimport axios from '../../axios-instance';\r\nimport UserCard from './UserCard';\r\nimport { LinearProgress, withStyles } from '@material-ui/core';\r\nimport Observer from '../../components/Observer';\r\nimport withAuthGard from '../../hoc/withAuthGard';\r\n\r\nconst styles = (theme) => ({\r\n  users: {\r\n    backgroundColor: theme.palette.background.front,\r\n  }\r\n});\r\n\r\n// takes in an url to make request for the users, and a title as props\r\nclass UserList extends Component {\r\n  state = {\r\n    users: [],\r\n    loading: true,\r\n    hasMore: true,\r\n    pageNumber: 1,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.makeRequest();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.url !== prevProps.url) {\r\n      this.setState({ users: [], loading: true, hasMore: true, pageNumber: 1 });\r\n      this.makeRequest();\r\n    }\r\n  }\r\n\r\n  makeRequest() {\r\n    axios({\r\n      method: 'GET',\r\n      url: this.props.url,\r\n      headers: { Authorization: `Bearer ${this.props.token}` },\r\n      params: { page: this.state.pageNumber },\r\n    }).then(res => {\r\n      if (!res) return;\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          users: [...prevState.users, ...res.data.users],\r\n          loading: false,\r\n          hasMore: res.data.next ? true : false\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleScroll = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      pageNumber: prevState.pageNumber + 1,\r\n      loading: true\r\n    }));\r\n    this.makeRequest();\r\n  }\r\n\r\n  render() {\r\n    const {classes, onAuthFail} = this.props;\r\n    return (\r\n      <div className={classes.users}>\r\n        {this.state.users.map((user, index) => (\r\n          <UserCard\r\n            key={user._id}\r\n            userId={user._id}\r\n            divider={!(this.state.users.length === index + 1)}\r\n            username={user.username}\r\n            followed={user.followed}\r\n            onAuthFail={onAuthFail}\r\n            name={user.name}\r\n            profile_pic={user.profile_pic}\r\n            description={user.description} >\r\n            {(this.state.users.length === index + 1) && !this.state.loading && this.state.hasMore && <Observer hasBeenSeen={this.handleScroll}/>}\r\n          </UserCard>\r\n        ))}\r\n        \r\n        {this.state.loading && <LinearProgress />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuthGard( withStyles(styles)(UserList) );","import React from 'react';\r\nimport CommentData from '../../components/Comments/CommentData';\r\nimport { Link } from 'react-router-dom';\r\nimport { makeStyles, Typography } from '@material-ui/core';\r\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  handle: {\r\n    color: theme.palette.primary.light,\r\n    textDecoration: 'none',\r\n    '&:hover': {\r\n      cursor: 'pointer',\r\n      textDecoration: 'underline',\r\n    }\r\n  },\r\n  image: {\r\n    borderRadius: '50%',\r\n    width: 32,\r\n    height: 32,\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  authorInfo: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    fontSize: '0.9rem'\r\n  },\r\n  icon: {\r\n    marginBottom: '-0.3em'\r\n  },\r\n  commentContainer: {\r\n    marginTop: theme.spacing(1),\r\n    marginLeft: theme.spacing(1),\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  spacer: {\r\n    minWidth: 16,\r\n    height: 50,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    textAlign: 'left',\r\n    borderLeft: '2px dashed ' + theme.palette.text.secondary\r\n  },\r\n  commentListing: {\r\n    backgroundColor: theme.palette.background.front,\r\n    padding: 20,\r\n    borderBottom: '1px solid ' + (theme.palette.type === 'dark' ? 'black' : '#c5c5c5')\r\n  }\r\n}));\r\n\r\nexport default function CommentListing ({\r\n  post_id,\r\n  comment_id,\r\n  post_author_id,\r\n  post_author_profile_pic,\r\n  post_author_username,\r\n  post_title,\r\n  comment_count,\r\n  post_date,\r\n  username,\r\n  body,\r\n  date,\r\n  like_count,\r\n  dislike_count,\r\n  liked,\r\n  depth,\r\n  profile_pic,\r\n  children\r\n}) {\r\n\r\n  const classes = useStyles();\r\n\r\n  function LinkToProfile(props) {\r\n    return <Link className={props.className || classes.link} to={'/profile/' + post_author_id}>\r\n      {props.children}\r\n    </Link>;\r\n  }\r\n\r\n  const spacers = [];\r\n\r\n  for(let i = 0; i < (depth > 2 ? 2 : depth); i++) {\r\n    spacers.push(\r\n      <div key={i} className={classes.spacer} />\r\n    );\r\n  }\r\n\r\n  if (depth > 2) spacers.unshift(<div className={classes.spacer} key={5} style={{borderLeft: 'none'}} >&#8285;</div>);\r\n\r\n  return (\r\n    <div className={classes.commentListing}>\r\n      {children}\r\n      <div className={classes.authorInfo}>\r\n        <LinkToProfile><img className={classes.image} src={post_author_profile_pic} alt=\"\" /></LinkToProfile>\r\n        <div className={classes.info}>          \r\n          <Typography style={{ fontWeight: '300', marginTop: -7 }} variant='body2'>\r\n            <LinkToProfile className={classes.handle}>\r\n              {'@' + post_author_username}\r\n            </LinkToProfile>  ·  {post_date}  ·  <ChatBubbleOutlineIcon fontSize=\"small\" className={classes.icon}/>  {comment_count}\r\n          </Typography>\r\n        </div>\r\n      </div>\r\n      <Typography style={{ fontWeight: '400' }} variant='h6'>\r\n        <Link to={`/post/${post_id}`} style={{textDecoration: 'none', color: 'inherit'}} >{post_title}</Link>\r\n      </Typography>\r\n      <div className={classes.commentContainer}>\r\n        {spacers}\r\n        <Link to={`/post/${post_id}/${comment_id}`} style={{textDecoration: 'none', color: 'inherit'}} >\r\n          <CommentData\r\n            username={username}\r\n            disabled={true}\r\n            body={body}\r\n            date={date}\r\n            like_count={like_count}\r\n            dislike_count={dislike_count}\r\n            liked={liked}\r\n            profile_pic={profile_pic}/>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport axios from '../../axios-instance';\r\nimport { LinearProgress } from '@material-ui/core';\r\nimport Observer from '../../components/Observer';\r\nimport { connect } from 'react-redux';\r\nimport CommentListing from './CommentListing';\r\nimport { withRouter } from 'react-router';\r\n\r\n// takes in url, detail and addedPosts (optional)\r\nclass CommentList extends Component {\r\n  state = {\r\n    comments: [],\r\n    loading: true,\r\n    hasMore: true,\r\n    pageNumber: 1,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.makeRequest();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n/*     if (this.props.match.url !== prevProps.match.url) {\r\n      this.setState({ posts: [], loading: true, hasMore: true, pageNumber: 1 });\r\n      this.makeRequest();\r\n    } */\r\n  }\r\n\r\n  makeRequest() {\r\n    axios({\r\n      method: 'GET',\r\n      url: this.props.location.pathname.replace('profile', 'users'),\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n      params: { page: this.state.pageNumber },\r\n    })\r\n    .then(res => {\r\n      if (!res) return;\r\n      this.setState(prevState => {\r\n        return {\r\n          ...prevState,\r\n          comments: [...prevState.comments, ...res.data.comments],\r\n          loading: false,\r\n          hasMore: res.data.next ? true : false\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleScroll = () => {\r\n    this.setState(prevState => ({\r\n      ...prevState,\r\n      pageNumber: prevState.pageNumber + 1,\r\n      loading: true\r\n    }));\r\n    this.makeRequest();\r\n  }\r\n\r\n  render() {\r\n    const { username, userId, profile_pic } = this.props;\r\n    return (\r\n      <>\r\n        {this.state.comments.map((comment, index) => {\r\n          return <CommentListing\r\n            key={comment._id}\r\n            comment_id={comment._id}\r\n            post_id={comment.post_id._id}\r\n            post_author_id={comment.post_id.author}\r\n            post_author_profile_pic={comment.post_id.profile_pic}\r\n            post_author_username={comment.post_id.username}\r\n            post_title={comment.post_id.title}\r\n            comment_count={comment.post_id.comment_count}\r\n            post_date={comment.post_id.date_formatted}\r\n            body={comment.body}\r\n            date={comment.date_formatted}\r\n            like_count={comment.like_count}\r\n            dislike_count={comment.dislike_count}\r\n            liked={comment.liked}\r\n            depth={comment.depth}\r\n            username={username}\r\n            author_id={userId}\r\n            profile_pic={profile_pic} >\r\n                {(this.state.comments.length === index + 1) && !this.state.loading && this.state.hasMore && <Observer hasBeenSeen={this.handleScroll}/>}\r\n          </CommentListing>\r\n        })}\r\n        {this.state.loading && <LinearProgress />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    token: state.auth.token\r\n  };\r\n};\r\n\r\nexport default connect( mapStateToProps )( withRouter(CommentList) );","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  wrapper: {\r\n    backgroundColor: theme.palette.background.mid,\r\n    borderRadius: 10,\r\n    overflow: 'hidden',\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  }\r\n}));\r\n\r\nexport default function DashBoardWrapper({ children }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      {children}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Heading from './Heading';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  list: {\r\n    borderRadius: 10,\r\n    overflow: 'hidden',\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nexport default function List({ title, children, out }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.list}>\r\n        <Heading variant='h6'>{title}</Heading>\r\n        {!out && children}\r\n      </div>\r\n      {out && children}\r\n    </>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport ProfileTabs from './ProfileTabs';\r\nimport { capitalize, LinearProgress } from '@material-ui/core';\r\nimport withErrorHandler from '../../hoc/withErrorHandler';\r\nimport axios from '../../axios-instance';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\nimport ProfileDashboard from './ProfileDashboard';\r\nimport UserList from '../UserList/UserList';\r\nimport PostList from '../PostList/PostList';\r\nimport { connect } from 'react-redux';\r\nimport CommentList from '../CommentList/CommentList';\r\nimport DashBoardWrapper from '../../components/UI/DashBoardWrapper';\r\nimport List from '../../components/UI/List';\r\n\r\nclass Profile extends Component {\r\n  state = {\r\n    loading: true,\r\n    _id: null,\r\n    name: null,\r\n    username: null,\r\n    description: null,\r\n    profile_pic: null,\r\n    banner_pic: null,\r\n    date_created: null,\r\n    followed: null,\r\n    follower_count: 0,\r\n    following_count: 0\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.makeRequest();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.match.params.id === this.props.match.params.id) return;\r\n    this.setState({loading: true});\r\n    this.makeRequest();\r\n  }\r\n\r\n  makeRequest = () => {\r\n    axios({\r\n      method: 'GET',\r\n      url: '/users/' + this.props.match.params.id,\r\n      headers: { 'Authorization': 'Bearer ' + this.props.token },\r\n    })\r\n    .then(res => {\r\n      if (!res) return;\r\n      this.setState({\r\n        ...res.data.user,\r\n        loading: false\r\n      });\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const url = this.props.match.url;\r\n\r\n    const routes = this.props.location.pathname.split('/');\r\n    const title = capitalize(routes[routes.length - 1]);\r\n\r\n    return (\r\n      this.state.loading ? \r\n      <LinearProgress style={{marginTop: 24}}/>\r\n      :\r\n      <>\r\n        <DashBoardWrapper>\r\n          <ProfileDashboard\r\n            userId={this.state._id}\r\n            followed={this.state.followed}\r\n            name={this.state.name}\r\n            username={this.state.username}\r\n            profile_pic={this.state.profile_pic}\r\n            banner_pic={this.state.banner_pic}\r\n            date_created={this.state.date_created}\r\n            description={this.state.description} />\r\n\r\n          <ProfileTabs navLinks={[\r\n              { title: 'Posts', to: 'posts' },\r\n              { title: 'Comments', to: 'comments' },\r\n              { title: this.state.follower_count + ' Followers', to: 'followers' },\r\n              { title: this.state.following_count + ' Following', to: 'following' }\r\n            ]} />\r\n        </DashBoardWrapper>\r\n\r\n        <List title={title} out={this.props.location.pathname.includes('posts')}>\r\n          <Switch>\r\n            <Route path={`${url}/posts`}\r\n              render={() => <PostList url={location.pathname.replace('profile', 'users')} detail={true} />}/>\r\n            <Route path={`${url}/comments`} \r\n              render={() => <CommentList username={this.state.username} userId={this.state._id} profile_pic={this.state.profile_pic} />} />\r\n            <Route path={`${url}/following`}\r\n              render={() => <UserList url={location.pathname.replace('profile', 'users')} /> }/>\r\n            <Route path={`${url}/followers`}\r\n              render={() => <UserList url={location.pathname.replace('profile', 'users')} /> }/>\r\n            <Redirect to={`${url}/posts`} />\r\n          </Switch>\r\n        </List>\r\n        \r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    token: state.auth.token\r\n  };\r\n};\r\n\r\nexport default withErrorHandler( connect( mapStateToProps )( Profile ), null, axios);","import React, { Component } from 'react';\r\nimport { Button, capitalize, LinearProgress, TextField, Typography, withStyles } from '@material-ui/core';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport Logo from '../../components/Logo';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions/index';\r\nimport { checkValidity } from '../../shared/utility';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport * as actionTypes from '../../store/actions/actionTypes';\r\n\r\nconst styles = (theme) => ({\r\n  login: {\r\n    textAlign: 'center',\r\n    backgroundColor: theme.palette.background.mid,\r\n    padding: theme.spacing(3),\r\n    maxWidth: 600,\r\n    margin: theme.spacing(2) + 'px auto',\r\n    borderRadius: 10\r\n  },\r\n  link: {\r\n    display: 'inline-block',\r\n    color: '#1395ff',\r\n    cursor: 'pointer',\r\n    marginTop: theme.spacing(1.5)\r\n  },\r\n  spaced: {\r\n    marginTop: theme.spacing(2)\r\n  },\r\n  header: {\r\n    margin: theme.spacing(2)\r\n  },\r\n  logoWrapper: {\r\n    height: 50,\r\n    filter: theme.palette.type === 'dark' ? 'invert(100%)' : ''\r\n  }\r\n});\r\n\r\nclass Auth extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {controls: this.initializeState(props.register)};\r\n  }\r\n\r\n  initializeState(isRegister) {\r\n    let controls = {};\r\n    let fields = [\r\n      {name: 'email', label: 'E-mail', type: 'email', max: 200},\r\n      {name: 'username', label: 'Username', type: 'username', max: 50},\r\n      {name: 'name', label: 'Name', type: 'name', max: 50},\r\n      {name: 'password', label: 'Password', type: 'password', max: 200},\r\n      {name: 'confirmPassword', label: 'Confirm password', type: 'password', max: 200}\r\n    ];\r\n    if (!isRegister) fields = [fields[0], fields[3]];\r\n    for (let field of fields) {\r\n      controls[field.name] = {\r\n        type: field.type,\r\n        label: field.label,\r\n        max: field.max,\r\n        value: '',\r\n        error: null,\r\n        touched: false\r\n      }\r\n    }\r\n    return controls;\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.register !== this.props.register) {\r\n      // when the user switches between /login and /register, it is necessary to\r\n      // change the input fields, clear errors and clear the redirect message, if there is one\r\n      this.setState({controls: this.initializeState(nextProps.register)});\r\n      (this.props.errors.length > 0) && this.props.clearErrors();\r\n      !this.props.register && this.props.redirectMessage && this.props.clearRedirectMessage();\r\n    }\r\n    // if there is a register success, redirect to /login\r\n    this.props.register && nextProps.redirectMessage && this.props.history.push('/login');\r\n    return (this.props !== nextProps || this.state !== nextState);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // clear errors, redirectMessage and redirect path\r\n    this.props.clearAuthHelpers();\r\n  }\r\n\r\n  inputChangedHandler = (key, event) => {\r\n    let newControls = {[key]: {\r\n      ...this.state.controls[key],\r\n      value: event.target.value,\r\n      touched: true,\r\n      error: checkValidity(event.target.value, key)\r\n    }};\r\n\r\n    if ( this.props.register ) {\r\n      if(key === 'confirmPassword') {\r\n        newControls[key].error = (this.state.controls.password.value !== newControls[key].value)\r\n          && this.state.controls.password.touched ? 'Passwords must match' : null;\r\n      }\r\n      if(key === 'password') {\r\n        newControls.confirmPassword = {\r\n          ...this.state.controls.confirmPassword,\r\n          error: (this.state.controls.confirmPassword.value !== newControls[key].value)\r\n            && newControls[key].touched ? 'Passwords must match' : null\r\n        };\r\n      }\r\n    }\r\n\r\n    this.setState({controls: {...this.state.controls, ...newControls}});\r\n  }\r\n\r\n  submitHandler = () => {\r\n    let data = {};\r\n    for (let key in this.state.controls) {\r\n      data[key] = this.state.controls[key].value;\r\n      // Check if there are any errors\r\n      if (this.state.controls[key].error || !this.state.controls[key].touched) return;\r\n    }\r\n    delete data.confirmPassword;\r\n    this.props.onAuth( data, this.props.register );\r\n  }\r\n  \r\n  render() {\r\n    const classes = this.props.classes;\r\n   \r\n    return (\r\n      this.props.isAuthenticated ? <Redirect to={this.props.authRedirectPath} /> :\r\n      <div className={classes.login} >\r\n\r\n        <div className={classes.logoWrapper}>\r\n          <Logo />\r\n        </div>\r\n\r\n        <Typography className={classes.header} variant='h6'>{this.props.register ? 'Create an Account' : 'Log In Plazon'}</Typography>\r\n\r\n        {Object.keys(this.state.controls).map(key => {\r\n          let control = this.state.controls[key];\r\n          return <TextField\r\n              disabled={this.props.loading}\r\n              inputProps={{maxLength: control.max}}\r\n              key={key}\r\n              value={control.value}\r\n              error={!!control.error && control.touched}\r\n              helperText={control.touched && control.error}\r\n              onChange={this.inputChangedHandler.bind(this, key)}\r\n              fullWidth\r\n              label={control.label}\r\n              type={control.type}\r\n              InputLabelProps={{ shrink: true }}\r\n              className={classes.spaced} />\r\n          })}\r\n\r\n        <Button \r\n          disabled={this.props.loading}\r\n          className={classes.spaced}\r\n          onClick={this.submitHandler}\r\n          color='primary'\r\n          variant='contained'\r\n          fullWidth>{this.props.register ? 'Register' : 'Login'}</Button>\r\n\r\n        {this.props.errors.map(err => (\r\n          <Alert key={err.msg} className={classes.spaced} severity=\"error\">{capitalize(err.msg)}</Alert>\r\n        ))}\r\n        {this.props.redirectMessage && <Alert className={classes.spaced} severity=\"info\">{this.props.redirectMessage}</Alert>}\r\n        {this.props.loading && <LinearProgress className={classes.spaced} />}\r\n        {!this.props.register && <Link to='/register' className={classes.link}>Don't have an account? Register here</Link>}\r\n      \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n      loading: state.auth.loading,\r\n      errors: state.auth.errors,\r\n      isAuthenticated: state.auth.token !== null,\r\n      authRedirectPath: state.auth.authRedirectPath,\r\n      redirectMessage: state.auth.redirectMessage,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onAuth: ( data, isRegister ) => dispatch( actions.auth( data, isRegister ) ),\r\n    clearErrors: () => dispatch( { type: actionTypes.CLEAR_ERRORS } ),\r\n    clearRedirectMessage: () => dispatch( { type: actionTypes.CLEAR_REDIRECT_MESSAGE } ),\r\n    clearAuthHelpers: () => dispatch( { type: actionTypes.CLEAR_AUTH_HELPERS } )\r\n  };\r\n};\r\n\r\nexport default connect( mapStateToProps, mapDispatchToProps )( withStyles(styles)(Auth) );","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as actions from '../../store/actions/index';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\nclass Logout extends Component {\r\n    componentDidMount () {\r\n        this.props.logout();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.props.history.goBack();\r\n    }\r\n\r\n    render () {\r\n        return <LinearProgress style={{marginTop: 24}}/>;\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        logout: () => dispatch(actions.logout())\r\n    };\r\n};\r\n\r\nexport default connect(null, mapDispatchToProps)(Logout);","import React, { Component } from 'react';\r\nimport ProfileTabs from './Profile/ProfileTabs';\r\nimport DashBoardWrapper from '../components/UI/DashBoardWrapper';\r\nimport List from '../components/UI/List';\r\nimport { capitalize } from '@material-ui/core';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\nimport UserList from './UserList/UserList';\r\nimport PostList from './PostList/PostList';\r\nimport axios from '../axios-instance';\r\nimport withErrorHandler from '../hoc/withErrorHandler';\r\n\r\nclass Search extends Component {\r\n  render() {\r\n    const url = this.props.match.url;\r\n    const routes = this.props.location.pathname.split('/');\r\n    const title = capitalize(routes[routes.length - 1]);\r\n    return (\r\n      <>\r\n        <DashBoardWrapper>\r\n          <ProfileTabs\r\n            navLinks={[\r\n              { title: 'Users', to: 'users' + this.props.location.search },\r\n              { title: 'Posts', to: 'posts' + this.props.location.search }\r\n            ]} />\r\n        </DashBoardWrapper>\r\n        \r\n        <List title={title} out={this.props.location.pathname.includes('posts')}>\r\n          {\r\n            <Switch>\r\n              <Route path={`${url}/users`}\r\n                render={() => <UserList url={'/users' + this.props.location.search} />} />\r\n              <Route path={`${url}/posts`}\r\n                render={() => <PostList url={'/posts' + this.props.location.search} detail={true} />}/>\r\n              <Redirect to={`${url}/users`} />\r\n            </Switch>\r\n          }\r\n        </List>\r\n\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withErrorHandler(Search, null, axios);","import React, { Component } from 'react';\r\nimport List from '../components/UI/List';\r\nimport UserList from './UserList/UserList';\r\nimport axios from '../axios-instance';\r\nimport withErrorHandler from '../hoc/withErrorHandler';\r\n\r\nconst styles = (theme) => ({\r\n  discover: {\r\n    marginTop: theme.spacing(2)\r\n  }\r\n})\r\n\r\nclass Discover extends Component {\r\n  render() {\r\n    return (\r\n      <div className={this.props.classes.discover}>\r\n        <List title='Discover Users'>\r\n          <UserList url='/users' />\r\n        </List>\r\n      </div>   \r\n    );\r\n  }\r\n}\r\n\r\nexport default withErrorHandler(Discover, styles, axios);","import React, { Component, lazy, Suspense } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { createMuiTheme, CssBaseline, LinearProgress, ThemeProvider } from '@material-ui/core';\nimport purple from '@material-ui/core/colors/purple';\nimport green from '@material-ui/core/colors/green';\nimport Layout from './hoc/Layout';\nimport Feed from './containers/Feed';\nimport PostDetail from './containers/PostDetail';\nimport Profile from './containers/Profile/Profile';\nimport Auth from './containers/Auth/Auth';\nimport Logout from './containers/Auth/Logout';\nimport { connect } from 'react-redux';\nimport * as actions from './store/actions/index'\nimport Search from './containers/Search';\nimport Discover from './containers/Discover';\nconst AccountSettings = lazy(() => import('./containers/AccountSettings'));\n\nclass App extends Component {\n  constructor(props){\n    super(props)\n    this.state = { dark: true };\n    this.props.onTryAutoSignup();\n  }\n\n  switchDarkMode = () => {\n    this.setState(prevState => ({\n      dark: !prevState.dark\n    }));\n  }\n\n  render() {\n    const lightTheme = createMuiTheme({\n      palette: {\n        type: 'light',\n        primary: {\n          main: purple[500],\n        },\n        secondary: {\n          main: green[500],\n        },\n        background: {\n          default: '#dfdfdf',\n          back: '#dfdfdf',\n          mid: '#efefef',\n          front: '#f7f7f7'\n        },\n        text: {\n          secondary: '#2e2e2e'\n        }\n      },\n    });\n\n    const darkTheme = createMuiTheme({\n      palette: {\n        type: 'dark',\n        primary: {\n          main: purple[500],\n        },\n        secondary: {\n          main: green[500],\n        },\n        background: {\n          default: '#424242',\n          back: '#424242',\n          mid: '#2d2d2d',\n          front: '#232323'\n        },\n        text: {\n          secondary: '#cccccc'\n        }\n      },\n    });\n\n    return (\n      <ThemeProvider theme={this.state.dark ? darkTheme : lightTheme}>\n        <CssBaseline />\n        <Layout switchedDarkMode={this.switchDarkMode}>\n          <Suspense fallback={<LinearProgress style={{marginTop: 24}}/>}>\n            <Switch>\n              <Route path='/post/:postId/:commentId?' component={PostDetail} />\n              {this.props.isAuthenticated && <Route path='/settings' component={AccountSettings} />}\n              <Route path='/login' render={(props) => <Auth register={false} {...props} />} />\n              <Route path='/register' render={(props) => <Auth register={true} {...props} />} />\n              {this.props.isAuthenticated && <Route path='/logout' component={Logout} />}\n              <Route path='/search' component={Search} />\n              <Route path='/discover' component={Discover} />\n              <Route path='/feed' component={Feed} />\n              <Route path='/profile/:id' component={Profile} />\n              <Redirect to='/feed' />\n            </Switch>\n          </Suspense>\n        </Layout>\n      </ThemeProvider>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch( actions.authCheckState() )\n  };\n};\n\nexport default connect( mapStateToProps, mapDispatchToProps )( App );","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as actionTypes from '../actions/actionTypes';\r\nimport { updateObject } from '../../shared/utility';\r\n\r\nconst initialState = {\r\n    token: null,\r\n    currentUser: {},\r\n    errors: [],\r\n    loading: false,\r\n    redirectMessage: null,\r\n    authRedirectPath: '/'\r\n};\r\n\r\nconst reducer = ( state = initialState, action ) => {\r\n    switch ( action.type ) {\r\n        case actionTypes.AUTH_START: return updateObject( state, { error: null, loading: true } );\r\n        case actionTypes.AUTH_SUCCESS: return updateObject( state, { token: action.token, currentUser: action.currentUser, error: null, loading: false } );\r\n        case actionTypes.REGISTER_SUCCESS: return updateObject(state, { redirectMessage: action.redirectMessage, loading: false })\r\n        case actionTypes.AUTH_FAIL: return updateObject( state, { errors: action.errors, loading: false });\r\n        case actionTypes.AUTH_LOGOUT: return updateObject(state, { token: null, currentUser: {} });\r\n        case actionTypes.CLEAR_AUTH_HELPERS: return updateObject(state, { errors: [], redirectMessage: null, authRedirectPath: '/' });\r\n        case actionTypes.CLEAR_ERRORS: return updateObject(state, { errors: [] });\r\n        case actionTypes.CLEAR_REDIRECT_MESSAGE: return updateObject(state, { redirectMessage: null });\r\n        case actionTypes.UPDATE_PICTURES: return {...state, currentUser: updateObject(state.currentUser, { profile_pic: action.profile_pic, banner_pic: action.banner_pic }) };\r\n        case actionTypes.SET_AUTH_REDIRECT_PATH: return updateObject(state, { authRedirectPath: action.path });\r\n        default: return state;\r\n    }\r\n};\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux';\nimport thunk from 'redux-thunk';\nimport authReducer from './store/reducers/auth';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst rootReducer = combineReducers({\n    auth: authReducer\n});\n\nconst store = createStore(rootReducer, composeEnhancers(\n    applyMiddleware(thunk)\n));\n\nconst app = (\n    <Provider store={store}>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </Provider>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();","import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n    baseURL: '/api',\r\n    timeout: 15000\r\n});\r\n\r\nexport default instance;","export const BASE_URL = 'http://127.0.0.1:3100';\n\nexport const DEFAULT_BANNER = BASE_URL + '/images/default-banner.png';\n\nexport const DEFAULT_PROFILE_PIC = BASE_URL + '/images/default-profile-picture.jpg';\n\nexport const convertDate = (dateString) => {\n    return new Date(dateString.trim()).toDateString().replace(/^\\S+\\s/,'').replace(/ (?=\\d{4})/, ', ');\n}\n\n// UPDATE OBJECT NO UNDEFINED\nexport const updateObject = (oldObject, updatedProperties) => {\n    let updatedPropsNoUndefined = {};\n    for(let key in updatedProperties) {\n        if (updatedProperties[key] !== undefined) updatedPropsNoUndefined[key] = updatedProperties[key];\n    }\n    return {\n        ...oldObject,\n        ...updatedPropsNoUndefined\n    };\n};\n\nexport const checkValidity = ( value, type ) => {\n    if (value === '') return 'Required';\n    switch(type) {\n        case 'email':\n            const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n            return pattern.test( value ) ? null : 'Invalid e-mail'\n        case 'username':\n            return value.match(/[^a-zA-z0-9]/g) ? 'Alpha-numeric characters only' : null;\n        case 'name':\n            return value.match(/[ ]{2}|[^a-zA-z0-9 ]/g) ? 'Alpha-numeric characters or single spaces only' : null;\n        default:\n            return null;\n    }\n}\n\nexport const VIDEO_VALIDATORS = [\n    // youtube validator\n    {\n      // eslint-disable-next-line\n      regex: /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/i,\n      embedUrl: 'https://www.youtube.com/embed/'\n    },\n    // vimeo validator\n    {\n      // eslint-disable-next-line\n      regex: /^(?:https?:\\/\\/)?(?:www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/(?:[^\\/]*)\\/videos\\/|album\\/(?:\\d+)\\/video\\/|video\\/|)(\\d+)(?:[a-zA-Z0-9_\\-]+)?/i,\n      embedUrl: 'https://player.vimeo.com/video/'\n    }\n  ];","export const ADD_INGREDIENT = 'ADD_INGREDIENT';\r\nexport const REMOVE_INGREDIENT = 'REMOVE_INGREDIENT';\r\nexport const SET_INGREDIENTS = 'SET_INGREDIENTS';\r\nexport const FETCH_INGREDIENTS_FAILED = 'FETCH_INGREDIENTS_FAILED';\r\n\r\nexport const PURCHASE_BURGER_START = 'PURCHASE_BURGER_START';\r\nexport const PURCHASE_BURGER_SUCCESS = 'PURCHASE_BURGER_SUCCESS';\r\nexport const PURCHASE_BURGER_FAIL = 'PURCHASE_BURGER_FAIL';\r\nexport const PURCHASE_INIT = 'PURCHASE_INIT';\r\n\r\nexport const FETCH_ORDERS_START = 'FETCH_ORDERS_START';\r\nexport const FETCH_ORDERS_SUCCESS = 'FETCH_ORDERS_SUCCESS';\r\nexport const FETCH_ORDERS_FAIL = 'FETCH_ORDERS_FAIL';\r\n\r\nexport const AUTH_START = 'AUTH_START';\r\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\r\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nexport const AUTH_FAIL = 'AUTH_FAIL';\r\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\r\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\r\nexport const CLEAR_AUTH_HELPERS = 'CLEAR_AUTH_HELPERS';\r\nexport const CLEAR_REDIRECT_MESSAGE = 'CLEAR_REDIRECT_MESSAGE';\r\nexport const UPDATE_PICTURES = 'UPDATE_PICTURES';\r\nexport const SET_AUTH_REDIRECT_PATH = 'SET_AUTH_REDIRECT_PATH';","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Heading from './UI/Heading';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  errorPage: {\r\n    borderRadius: 16,\r\n    overflow: 'hidden',\r\n    marginBottom: theme.spacing(3),\r\n    marginTop: theme.spacing(3)\r\n  }\r\n}));\r\n\r\nexport default function ErrorPage() {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.errorPage}>\r\n      <Heading variant='h5'>404 Not found</Heading>\r\n    </div>\r\n  );\r\n}","import React, { Component } from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Dialog, DialogContent, DialogContentText } from '@material-ui/core';\r\nimport ErrorPage from '../components/ErrorPage';\r\n\r\nconst withErrorHandler = (WrappedComponent, compStyles, axios) => {\r\n\r\n  const styles = (theme) => {\r\n    let styles = compStyles ? compStyles(theme) : {};\r\n    return {\r\n      paper: {\r\n        position: 'absolute',\r\n        top: '30%',\r\n        left: 'calc(50% - 200px)',\r\n        width: 400,\r\n        wordWrap: 'break-word',\r\n        backgroundColor: theme.palette.background.paper,\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n      },\r\n      ...styles\r\n    }\r\n  };\r\n\r\n  class WithError extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { errMsg: null };\r\n      this.reqInterceptor = axios.interceptors.request.use(req => {\r\n        this.setState({ errMsg: null });\r\n        return req;\r\n      });\r\n      this.resInterceptor = axios.interceptors.response.use(res => res, error => {\r\n        try {\r\n          this.setState({ errMsg: error.response.data.errors[0].msg });\r\n        } catch {\r\n          this.setState({ errMsg: error.message });\r\n        }\r\n        return Promise.reject(error);\r\n      });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      axios.interceptors.request.eject(this.reqInterceptor);\r\n      axios.interceptors.response.eject(this.resInterceptor);\r\n    }\r\n\r\n    errorConfirmedHandler = () => {\r\n      this.setState({ errMsg: null });\r\n    }\r\n\r\n    render() {\r\n\r\n      return (\r\n        this.state.errMsg === 'DOCUMENT_NOT_FOUND' ?\r\n        <ErrorPage /> :\r\n        <>\r\n          <Dialog\r\n            open={this.state.errMsg ? true : false}\r\n            onClose={this.errorConfirmedHandler}>\r\n            <DialogContent>\r\n              <DialogContentText>\r\n                {this.state.errMsg}\r\n              </DialogContentText>\r\n            </DialogContent>\r\n          </Dialog>\r\n          <WrappedComponent {...this.props} />\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withStyles(styles)(WithError)\r\n}\r\n\r\nexport default withErrorHandler;","import axios from '../../axios-instance';\r\nimport { BASE_URL } from '../../shared/utility';\r\nimport * as actionTypes from './actionTypes';\r\n\r\nconst userFields = ['_id', 'name', 'username', 'profile_pic', 'banner_pic'];\r\n\r\nexport const authStart = () => {\r\n    return {\r\n        type: actionTypes.AUTH_START\r\n    };\r\n};\r\n\r\nexport const authSuccess = (token, user) => {\r\n    return {\r\n        type: actionTypes.AUTH_SUCCESS,\r\n        token,\r\n        currentUser: {\r\n            ...user,\r\n            profile_pic: user.profile_pic,\r\n            banner_pic: user.banner_pic\r\n        }\r\n    };\r\n}\r\n;\r\nconst registerSuccess = () => {\r\n    return {\r\n        type: actionTypes.REGISTER_SUCCESS,\r\n        redirectMessage: 'Account successfully registered!'\r\n    };\r\n};\r\n\r\nexport const updatePictures = (profile_pic, banner_pic) => {\r\n    return {\r\n        type: actionTypes.UPDATE_PICTURES,\r\n        profile_pic: profile_pic && (BASE_URL + profile_pic),\r\n        banner_pic: banner_pic && (BASE_URL + banner_pic)\r\n    };\r\n}\r\n\r\nexport const authFail = (errors) => {\r\n    return {\r\n        type: actionTypes.AUTH_FAIL,\r\n        errors\r\n    };\r\n};\r\n\r\nexport const logout = () => {\r\n    [...userFields, 'token', 'expirationDate'].forEach(field => {\r\n        localStorage.removeItem(field);\r\n    });\r\n    return {\r\n        type: actionTypes.AUTH_LOGOUT\r\n    };\r\n};\r\n\r\nexport const checkAuthTimeout = (expirationTime) => {\r\n    return dispatch => {\r\n        setTimeout(() => {\r\n            dispatch(logout());\r\n        }, expirationTime * 1000);\r\n    };\r\n};\r\n\r\nexport const auth = (authData, isRegister) => {\r\n    \r\n    return dispatch => {\r\n        dispatch(authStart());\r\n        const url = '/' + (isRegister ? 'register' : 'login');\r\n        axios.post(url, authData)\r\n            .then(res => {\r\n                if (isRegister) return dispatch(registerSuccess());\r\n                dispatch(authSuccess(res.data.token, res.data.user));\r\n                const expirationDate = new Date(new Date().getTime() + res.data.expiresIn * 1000);\r\n                localStorage.setItem('expirationDate', expirationDate);\r\n                localStorage.setItem('token', res.data.token);\r\n                userFields.forEach(userField => {\r\n                    localStorage.setItem(userField, res.data.user[userField]);\r\n                });\r\n                dispatch(checkAuthTimeout(res.data.expiresIn));\r\n            })\r\n            .catch(err => {\r\n                dispatch(authFail(err.response.data.errors));\r\n            });\r\n    };\r\n};\r\n\r\n// fix this\r\nexport const authCheckState = () => {\r\n    return dispatch => {\r\n        let currentUser = {};\r\n        userFields.forEach(userField => {\r\n            currentUser[userField] = localStorage.getItem(userField);\r\n            if (!currentUser[userField]) return dispatch(logout());\r\n        });\r\n        const token = localStorage.getItem('token');\r\n        const expirationDate = new Date(localStorage.getItem('expirationDate'));\r\n        if (!token || !expirationDate || expirationDate <= new Date()) {\r\n            dispatch(logout());\r\n        } else {\r\n            dispatch(authSuccess(token, currentUser));\r\n            dispatch(checkAuthTimeout((expirationDate.getTime() - new Date().getTime()) / 1000 )); \r\n        }\r\n    };\r\n};\r\n\r\nexport const setAuthRedirectPath = (path) => {\r\n    return {\r\n        type: actionTypes.SET_AUTH_REDIRECT_PATH,\r\n        path\r\n    };\r\n};","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  coverPhoto: {\r\n    width: '100%',\r\n    paddingBottom: '33.33333%',\r\n    backgroundSize: 'cover',\r\n    position: 'relative',\r\n  },\r\n  content: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    right: 0,\r\n    left: 0,\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  }\r\n}));\r\n\r\nexport default function CoverPhoto(props) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.coverPhoto} style={{ backgroundImage: 'url(\"' + props.backgroundUrl + '\")' }}>\r\n      {props.children ?\r\n        <div className={classes.content}>\r\n          {props.children}\r\n        </div>\r\n        : null}\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  heading: {\r\n    backgroundColor: theme.palette.background.mid,\r\n    padding: theme.spacing(2) + 'px ' + theme.spacing(3) + 'px',\r\n  },\r\n}));\r\n\r\nexport default function Heading(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.heading}>\r\n      <Typography style={{ margin: 0, fontWeight: 'lighter' }} variant={props.variant}>{props.children}</Typography>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}