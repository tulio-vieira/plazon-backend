(this["webpackJsonpplazon-app"]=this["webpackJsonpplazon-app"]||[]).push([[0],{104:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(14),r=a(0),o=a.n(r),i=a(95),s=a(134),c=a(83),l=Object(i.a)((function(e){return Object(n.a)({bottomOptions:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:e.spacing(.5)},message:{display:"inline-block",marginRight:e.spacing(1)},replyButton:{margin:e.spacing(.5)},buttons:{display:"flex",flexWrap:"wrap",justifyContent:"flex-end"}},e.breakpoints.down("xs"),{message:{fontSize:"0.9em"}})}));function u(e){var t=l();return o.a.createElement("div",{className:t.bottomOptions},o.a.createElement(c.a,{className:t.message+" "+e.messageClass,variant:"body1"},e.message),o.a.createElement("div",{className:t.buttons},e.handleCanceled?o.a.createElement(s.a,{disabled:e.mainButtonDisabled,onClick:e.handleCanceled,variant:"contained",disableElevation:!0,className:t.replyButton},"Cancel"):null,o.a.createElement(s.a,{disabled:e.mainButtonDisabled,variant:"contained",onClick:e.mainButtonClicked,disableElevation:!0,color:e.mainButtonColor,className:t.replyButton},e.mainButtonText)))}},117:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABLCAQAAABuUpmrAAAF3UlEQVR4Ae2YA5Ts3BaEq2rvpHv427Zt27Zt27Zt27Zt29a17VxnTo/epKdv5qlq9UJw+ls5Wwn+rwbVoB6FYqGuUBenjtrq4J4xK9QU4zo55kJmOXwGf9A/8PfG2sqyj/db/rzfYxfY3lrRpo3kaLMMvqR6M6mgR7Efv+at2k4zRvS2QdiSDCAq6GH8hmdrYZd1CETov3mB5gT8X0MgmZTmN9xZBbUKMbe+Vh/1bqd7qY8GaaSS5mwD/WqfztECSIRYPrcv6UtYO+1L+xq+vZ9iD9tPNtSSRh6lZ20eogqTXPUg3DWzttJd6trkibxtCwhELpoZBo9sSV3NHkxK/LpmFwrITQYzrc5XObIE40FNLuQoA6FpeRWHBBAjeFokIVcJVqXTODjA6MG1CEOuckQFns3hAcaLmlzIWYLqeGdJQd+DcFRIEWLaNFpe29q+toc20gJWDRRRqmoQmotfBBhva0pVJuw80gq6TF+q34RKOUyd9YL2s+kERygHwF2CAB3CrQhvLwCg+XQDe6bLhvH/oTanE6EEq+eLTDDxqrtj9xZzu95386P8yLG2FbxZWkcsbc5vmbToPjohKnrJlgDckcPSK37TnGoxoVZh//TCh+lsBjSS9gxqYfMeohPcrDQ8p+eX6fnh3JqYvwWItTA4bcJPwpvdiG2CbWjZvbUJEQdBDPDqoMFfABTKgagFocX4U6Nx7k8+xit4g97RACWBX/XJrSRHuGNQxJ/y2MqBMHhR9zD9GybsqrM0XxwJ9YjqbXN9HEAMso1UuiFLslcK8bmmVHaIIgStr/4BwndapyhPEQUtoE8anpIuBAohxEz8aezKHPv7Q7OXAWFwV1j5/tbqpfOBg+AewSN/0iML7tdk/Dg9110LlwEhaC7+ni4yUkcDhlIRXLphcNabUXUUhGZUw7cbApdLMjsEwS2DRvS1zaTmKs3kOkdv6i8NUaIXooKHL1q1fCe9vxeXyAxRC4AnB5txFRChqWIUqBrNpfV1jDYKrzFoqqCDdNH8ygoRA+ANAcRexDRZu+k8/Ce9/yfNlBlCcPG+hoqnTYhsIrhB0MTetBrLDiHx/oaZQBtng4gB8OygYt54FLys7bglqJO7MOtmTMkPgvv3BibPClEEwLODmDgbiDKMPwS3DjajixYRUE6KaheOSpd5xWoty3OYfOw8kfpxL1iZEIuzezAzrE7UtHkI4sEcFkyZOwFV5UAIVstXmaS+x4pqY0hqJf4Z3PmuphaQDSIIzcODpQZpD8DRugoAtCA/DAce7kqUCQEImoPfBcv9qXVbx3AAWozvMgn8qGoFlAthAHh0ydvl79rWXC2v502m0V+1JFEsHwIQNDVfKlm0r67WApGs6ZsXNR+vYJ9GV+8UpHZ5EAUIWl6/KVHCdLjRH7pS6/qMcaGW1ahnHPv0trYu128apSTwYB1rbkD5EMG79pbqoqSRB+kHPa/beZ1u13P6TgObXDHQTg5bezsgAALU1vyLSSZ304EWG1AZCMAwGbQa3+eoNn9g/UjrxjKgchBADEIz63x2aQNCV12kWYgIqCBE+EFoKV2t31v6dKiR+lPXaZnwXayCEEEims1t+9i99rX1tCE20pIxv6HW076xB2x/m9ctXKSiEKFmhCEyn9YWs/VsO9/VtrP1bXGfNnbDdAhVPkTe+j/EvxmEVuegdB5+SpGQuwiuwH5pkXnVqqxDnsRC7JZCfK1p1SEQ0wUjSG8tJ+Qug8d8kknq45B/bEYAeHwA8aF1xIYQWo69gg+jhwGW/4ZYFZ8oGWSXI+K8N4TQ5hwYYLynBXLHMFg1H2IS+H2tEEE5pym0FH8vwfhLx9gMNXlmigPQ7uqvJPAIfWFn+ho+a1QfyfPB8MhOtMFNh3b9pg9sfeUVoHGRJwRf/APr+DzbesRd+GszECfkmid14GK8lwM6EAJwCFaljfgQu3FUzhChpgKhghbTobpPn+hPdbPdiA7R5DBEZlPYHLaAVRv+2zTLGHe0RgMNjeKi6W/StQAAAABJRU5ErkJggg=="},149:function(e,t,a){e.exports=a(179)},154:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),s=(a(154),a(7)),c=a(8),l=a(10),u=a(9),d=a(12),m=a(131),p=a(231),h=a(232),g=a(229),f=a(92),b=a.n(f),v=a(93),k=a.n(v),E=a(14),y=a(95),w=a(216),O=a(217),j=a(134),_=a(218),C=a(118),x=a.n(C),S=a(24),N=a(4),A=a(113),D=a.n(A),I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:""},e.handleInput=function(t){e.setState({value:t.target.value})},e.handleKeyPress=function(t){13===t.charCode&&e.submitInput()},e.submitInput=function(){0!==e.state.value.length&&(e.props.location.pathname.match(/\/search\/(users|posts)/g)?e.props.history.push(e.props.location.pathname+"?search="+e.state.value):e.props.history.push("/search/users?search="+e.state.value))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.search},r.a.createElement("input",{placeholder:"Search Plazon\u2026",value:this.state.value,onChange:this.handleInput,onKeyPress:this.handleKeyPress,className:e.input}),r.a.createElement(D.a,{onClick:this.submitInput,className:e.searchIcon}))}}]),a}(n.Component),T=Object(N.a)((function(e){var t="dark"===e.palette.type?"white":"black";return{search:{paddingLeft:e.spacing(1),overflow:"hidden",display:"flex",alignItems:"center",borderRadius:17,backgroundColor:e.palette.background.front,"&:hover":{backgroundColor:Object(S.a)(e.palette.background.front,.1)},marginRight:0,maxWidth:440},searchIcon:{color:t,cursor:"pointer",marginRight:e.spacing(1),height:"100%"},input:Object(E.a)({backgroundColor:"inherit",border:"none",outline:"none",color:t,padding:e.spacing(1,0,1,1),fontSize:"0.8rem",width:"100%"},e.breakpoints.up(800),{transition:e.transitions.create("width"),width:164,"&:focus":{width:400}})}}))(Object(d.g)(I)),R=a(117),B=a.n(R),P=function(){return r.a.createElement("img",{style:{height:"100%"},src:B.a,alt:"Plazon"})},U=a(15),M=a(74),z=a.n(M),L=a(119),F=a.n(L),H=Object(y.a)((function(e){var t;return{menuButton:Object(E.a)({},"".concat(e.breakpoints.up("xs")," and (orientation: landscape)"),{marginRight:e.spacing(2)}),title:{marginRight:e.spacing(1),height:40,display:"flex",alignItems:"center",lineHeight:0,textDecoration:"none",color:"inherit"},navbar:{boxShadow:"none"},toolbar:(t={},Object(E.a)(t,e.breakpoints.up("xs"),{minHeight:48}),Object(E.a)(t,e.breakpoints.up("sm"),{minHeight:60}),t),profilePic:{height:40,width:40,borderRadius:"50%"},logoWrapper:{filter:"invert(100%)",height:30},titleText:Object(E.a)({fontFamily:"Montserrat Alternates, sans-serif",display:"none",margin:0,marginLeft:"-0.65em",fontSize:"1.25rem",fontWeight:500},e.breakpoints.up(500),{display:"block"}),navItem:Object(E.a)({display:"none"},e.breakpoints.up(500),{display:"block"}),searchWrapper:{margin:"0 auto"}}}));function q(e){var t=e.menuClicked,a=e.currentUser,n=e.isAuthenticated,o=e.switchedDarkMode,i=H();return r.a.createElement(w.a,{className:i.navbar},r.a.createElement(O.a,{className:i.toolbar},r.a.createElement(_.a,{onClick:t,edge:"start",className:i.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(x.a,null)),r.a.createElement(U.b,{className:i.title,to:"/feed"},r.a.createElement("div",{className:i.logoWrapper},r.a.createElement(P,null)),r.a.createElement("p",{className:i.titleText},r.a.createElement("span",{style:{visibility:"hidden"}},"P"),"LAZON")),r.a.createElement("div",{className:i.searchWrapper},r.a.createElement(T,null)),!n&&r.a.createElement(j.a,{className:i.navItem,color:"inherit"},r.a.createElement(U.b,{style:{textDecoration:"none",color:"inherit"},to:"/login"},"Login")),r.a.createElement(_.a,{className:i.navItem,onClick:o},r.a.createElement(z.a,{style:{color:"white"}})),n&&r.a.createElement(U.b,{to:"/settings",className:i.navItem,style:{lineHeight:0}},r.a.createElement(_.a,null,r.a.createElement(F.a,{style:{color:"white"},size:"small"}))),n&&r.a.createElement(U.b,{to:"/profile/".concat(a._id),style:{lineHeight:0,marginLeft:12},className:i.navItem},r.a.createElement("img",{className:i.profilePic,src:a.profile_pic,alt:""}))))}var W=a(11),V=a(236),G=a(220),X=a(221),Q=Object(y.a)((function(e){return{userInfo:{color:"dark"===e.palette.type?"white":"black",fontSize:"1em",fontWeight:500,position:"relative",bottom:"20px",marginLeft:e.spacing(2.5),"& p":{wordBreak:"break-word"}},image:{height:60,width:60,borderRadius:"50%"},username:{margin:"0.5em 0"},nickname:{fontSize:"0.8em",margin:0}}}));function Z(e){var t=Q();return r.a.createElement("div",{className:t.userInfo},r.a.createElement("img",{className:t.image,src:e.currentUser.profile_pic,alt:""}),r.a.createElement("p",{className:t.username},e.currentUser.name),r.a.createElement("p",{className:t.nickname},"@"+e.currentUser.username))}var K=a(65),Y=a(23),J=a(120),$=a.n(J),ee=Object(y.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:e.palette.background.front},drawerContainer:{overflow:"auto"},closeIcon:{color:"white",position:"absolute",fontSize:20,margin:0,top:5,right:7,cursor:"pointer"},link:{textDecoration:"none",textTransform:"capitalize",color:"inherit",padding:e.spacing(2)+"px "+e.spacing(2.5)+"px",width:"100%",height:"100%"},listItem:{padding:0},footer:{marginTop:"auto",marginLeft:e.spacing(2),marginBottom:e.spacing(2),color:e.palette.text.secondary,fontSize:"0.8rem","& a":{display:"flex",alignItems:"center",color:"inherit"},"& span":{marginLeft:"0.1em"}}}}));var te=function(e){var t=e.isAuthenticated,a=e.currentUser,n=e.open,o=e.onClose,i=e.switchedDarkMode,s=ee(),c={Feed:{to:"/feed"},"Discover Users":{to:"/discover"}};return c=t?Object(W.a)(Object(W.a)({},c),{},{"My Profile":{to:"/profile/".concat(a._id)},Settings:{to:"/settings"},Logout:{to:"/logout"}}):Object(W.a)(Object(W.a)({},c),{},{Login:{to:"/login"},Register:{to:"/register"}}),r.a.createElement(V.a,{anchor:"left",open:n,onClose:o,className:s.drawer,classes:{paper:s.drawerPaper}},r.a.createElement(K.a,{backgroundUrl:a.banner_pic||Y.a}),r.a.createElement("div",{onClick:o,className:s.closeIcon},"\u2716"),t&&r.a.createElement(Z,{currentUser:a}),r.a.createElement("div",{className:s.drawerContainer},r.a.createElement(G.a,{style:{padding:0},onClick:o},Object.keys(c).map((function(e){return r.a.createElement(X.a,{key:e,button:!0,className:s.listItem},r.a.createElement(U.b,Object.assign({className:s.link},c[e]),e))})))),r.a.createElement("div",{className:s.footer},r.a.createElement(_.a,{onClick:i},r.a.createElement(z.a,null)),r.a.createElement("p",null,"2020 Plazon"),r.a.createElement("p",null,"Created by: ",r.a.createElement("strong",null,"Tulio Vieira")),r.a.createElement("a",{href:"https://github.com/tulio-vieira/"},r.a.createElement($.a,{style:{height:"0.8em"}}),r.a.createElement("span",null,"/tulio-vieira"))))},ae=a(180),ne=a(21),re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showSideDrawer:!1},e.sideDrawerToggleHandler=function(){e.setState((function(e){return{showSideDrawer:!e.showSideDrawer}}))},e.sideDrawerClosedHandler=function(){e.setState({showSideDrawer:!1})},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(q,{switchedDarkMode:this.props.switchedDarkMode,menuClicked:this.sideDrawerToggleHandler,isAuthenticated:this.props.isAuthenticated,currentUser:this.props.currentUser}),r.a.createElement(te,{switchedDarkMode:this.props.switchedDarkMode,isAuthenticated:this.props.isAuthenticated,currentUser:this.props.currentUser,open:this.state.showSideDrawer,onClose:this.sideDrawerClosedHandler}),r.a.createElement("main",{className:this.props.classes.wrapper},this.props.children))}}]),a}(n.Component),oe=Object(ne.b)((function(e){return{isAuthenticated:null!==e.auth.token,currentUser:e.auth.currentUser}}))(Object(ae.a)((function(e){var t;return{wrapper:(t={color:"dark"===e.palette.type?"white":"black",margin:"0 20%",paddingTop:60},Object(E.a)(t,e.breakpoints.down(960),{margin:"0 10%"}),Object(E.a)(t,e.breakpoints.down(600),{margin:"0 5%",paddingTop:56}),Object(E.a)(t,e.breakpoints.down(350),{margin:0}),t)}}))(re)),ie=a(33),se=a(78),ce=a(91),le=a.n(ce),ue=a(122),de=a(83),me=a(235),pe=a(226),he=a(104),ge=a(125),fe=a.n(ge),be=a(233),ve=a(222),ke=a(228),Ee=a(224),ye=a(225),we=a(223);function Oe(e){var t=e.open,a=e.onClose,o=e.defaultValue,i=e.onSubmit,s=Object(n.useRef)();return r.a.createElement(ve.a,{open:t,onClose:a},r.a.createElement(we.a,null,"Embed Content"),r.a.createElement(Ee.a,null,r.a.createElement(ye.a,null,"Share image or video (youtube or vimeo)"),r.a.createElement(be.a,{inputProps:{maxLength:1e3},defaultValue:o,autoFocus:!0,margin:"dense",label:"Paste link here",type:"text",fullWidth:!0,onKeyPress:function(e){13===e.charCode&&i(s.current.value)},inputRef:s})),r.a.createElement(ke.a,null,r.a.createElement(j.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(j.a,{onClick:function(){return i(s.current.value)},color:"primary"},"Ok")))}function je(e){var t,a=e.contentUrl,n=e.isVideo,o=e.children,i=e.isSmall,s=(t=i?500:800,Object(y.a)((function(e){return{embededContent:{position:"relative",maxWidth:t,margin:"0 auto",overflow:"hidden"},iframeContainer:{position:"relative",width:"100%",paddingBottom:"56.25%",height:0,"& iframe":{borderRadius:10,position:"absolute",top:0,left:0,width:"100%",height:"100%"}},image:{objectFit:"contain",width:"100%",maxHeight:.6*t}}})))();return r.a.createElement("div",{className:s.embededContent},o,n?r.a.createElement("div",{className:s.iframeContainer},r.a.createElement("iframe",{width:"560",height:"315",title:"video",src:a,frameBorder:"0",allow:"accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})):r.a.createElement("img",{className:s.image,src:a,alt:"Not found"}))}var _e=Object(y.a)((function(e){return{contentPreview:{border:"1px solid "+e.palette.text.secondary,padding:e.spacing(2),borderRadius:16,marginTop:e.spacing(1)},closeIconContainer:{position:"absolute",padding:6,top:-6,right:-6,zIndex:100,cursor:"pointer",borderRadius:"50%",backgroundColor:e.palette.background.mid,boxShadow:"0px 0px 2px 2px "+e.palette.background.mid},closeIcon:{padding:5,color:"white",backgroundColor:"red",fontSize:20,width:32,height:32,textAlign:"center",lineHeight:"100%",borderRadius:"50%"}}}));function Ce(e){var t=e.contentUrl,a=e.isVideo,n=e.onClear,o=_e();return r.a.createElement("div",{className:o.contentPreview},r.a.createElement(je,{isSmall:!0,contentUrl:t,isVideo:a},r.a.createElement("div",{className:o.closeIconContainer,onClick:n},r.a.createElement("div",{className:o.closeIcon},"\u2716"))))}var xe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",body:"",show:!1,showDialog:!1,touched:!1,loading:!1,urlSubmitted:null,urlTransformed:null,isVideo:!1},e.handleFocusIn=function(){e.setState({show:!0})},e.handleFocusOut=function(){e.setState({show:!1})},e.handleText=function(t,a){var n;e.setState((n={},Object(E.a)(n,t,a.target.value),Object(E.a)(n,"touched",!0),n))},e.submitHandler=Object(ue.a)(le.a.mark((function t(){var a;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.title){t.next=2;break}return t.abrupt("return",e.setState({touched:!0}));case 2:if(e.props.isAuthenticated){t.next=4;break}return t.abrupt("return",e.props.onAuthFail());case 4:return e.setState({loading:!0}),a={title:e.state.title,body:e.state.body},e.state.urlTransformed&&(a.contentUrl=e.state.urlTransformed,a.isVideo=e.state.isVideo),t.prev=7,t.next=10,e.props.postSubmitted(a);case 10:e.setState({title:"",body:"",show:!1,touched:!1,loading:!1}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),e.setState({loading:!1});case 16:case"end":return t.stop()}}),t,null,[[7,13]])}))),e.handleDialog=function(){e.setState((function(e){return{showDialog:!e.showDialog}}))},e.handleLinkSubmitted=function(t){if(0===t.length)return e.clearContentLink();var a,n=t.trim(),r=!1,o=Object(se.a)(Y.c);try{for(o.s();!(a=o.n()).done;){var i=a.value,s=n.match(i.regex);if(s){n=i.embedUrl+s[1],r=!0;break}}}catch(c){o.e(c)}finally{o.f()}e.setState({showDialog:!1,urlSubmitted:t,urlTransformed:n,isVideo:r})},e.clearContentLink=function(){e.setState({showDialog:!1,urlSubmitted:null,urlTransformed:null})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.createPost},r.a.createElement(de.a,{style:{marginBottom:"0.7em",fontWeight:"lighter"},variant:"h6"},"What's on your mind?"),r.a.createElement("div",{className:e.wrapper},r.a.createElement("div",{className:e.container},r.a.createElement("img",{className:e.image,src:this.props.profile_pic||Y.b,alt:""}),this.state.show&&r.a.createElement(me.a,{title:"Embed content"},r.a.createElement(_.a,{className:e.icon,onClick:this.handleDialog},r.a.createElement(fe.a,null)))),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(pe.a,{disabled:this.state.loading,maxLength:100,error:this.state.touched&&""===this.state.title,onClick:this.handleFocusIn,className:e.title+" "+(this.state.show?e.titleFocus:""),fullWidth:!0,placeholder:"Title (required)",onChange:this.handleText.bind(this,"title"),value:this.state.title}),this.state.show?r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{disabled:this.state.loading,maxLength:300,value:this.state.body,placeholder:"Text (optional)",onChange:this.handleText.bind(this,"body"),className:e.textArea}),r.a.createElement(he.a,{mainButtonClicked:this.submitHandler,mainButtonDisabled:this.state.loading,handleCanceled:this.handleFocusOut,mainButtonColor:"secondary",mainButtonText:"Post",messageClass:e.messageClass,message:300-this.state.body.length+" characters remaining"})):null)),this.state.show&&this.state.urlTransformed&&r.a.createElement(Ce,{contentUrl:this.state.urlTransformed,isVideo:this.state.isVideo,onClear:this.clearContentLink}),r.a.createElement(Oe,{onClose:this.handleDialog,onSubmit:this.handleLinkSubmitted,defaultValue:this.state.urlSubmitted,open:this.state.showDialog}))}}]),a}(n.Component),Se=Object(ae.a)((function(e){return Object(E.a)({createPost:{backgroundColor:e.palette.background.mid,borderRadius:16,padding:e.spacing(3),paddingTop:e.spacing(2),margin:e.spacing(2)+"px 0"},wrapper:{display:"flex"},textArea:{fontSize:"1rem",width:"100%",flexGrow:1,backgroundColor:e.palette.background.front,color:"dark"===e.palette.type?"white":"black",borderRadius:"0 0 25px 25px",border:"none",outline:"none",resize:"none",height:150,padding:e.spacing(2),fontFamily:"inherit"},image:{borderRadius:"50%",width:60,height:60},title:{borderRadius:"25px 25px 25px 25px",overflow:"hidden",backgroundColor:e.palette.background.front,padding:e.spacing(2),paddingBottom:e.spacing(1),fontSize:"1.1em",zIndex:10},titleFocus:{borderRadius:"25px 25px 0 0"},messageClass:{color:e.palette.success.light},container:{display:"flex",flexDirection:"column",marginRight:e.spacing(2),alignItems:"center"},icon:{marginTop:50,color:"#81c784"}},e.breakpoints.down("xs"),{wrapper:{flexDirection:"column",alignItems:"center"},icon:{margin:0},image:{margin:"0 auto"},container:{flexDirection:"row",width:"100%",alignItems:"flex-end",margin:e.spacing(0,0,2,0)}})}))(xe),Ne=a(18),Ae=a(40),De=a(81),Ie=a.n(De),Te=a(82),Re=a.n(Te),Be=a(80),Pe=a.n(Be),Ue=function(e,t){var a=function(a){Object(l.a)(o,a);var n=Object(u.a)(o);function o(e){var a;return Object(s.a)(this,o),(a=n.call(this,e)).likeHandler=function(e){if(!a.props.token)return a.props.onAuthFail();a.submitLike(e);var t=Object(W.a)(Object(W.a)({},a.state),{},{liked:e?1:-1});t.liked===a.state.liked?(1===t.liked?t.like_count--:t.dislike_count--,t.liked=0):0===a.state.liked?1===t.liked?t.like_count++:t.dislike_count++:(t.like_count+=t.liked,t.dislike_count-=t.liked),a.setState(t)},a.submitLike=function(e){Object(Ne.a)({method:"POST",url:t+"/"+a.props._id,headers:{Authorization:"Bearer "+a.props.token},data:{isLike:e}})},a.state={like_count:e.like_count,dislike_count:e.dislike_count,liked:e.liked||0},a}return Object(c.a)(o,[{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{liked:this.state.liked,token:this.props.token,userPic:this.props.userPic,like_count:this.state.like_count,dislike_count:this.state.dislike_count,likeHandler:this.likeHandler}))}}]),o}(n.Component);return Object(ne.b)((function(e){return{token:e.auth.token,userPic:e.auth.currentUser.profile_pic}}))(a)},Me=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).body=e.body?e.body.replace(/\n\n+/g,"\n"):null,!e.detail&&n.body&&n.body.length>100&&(n.body=n.body.substring(0,100)+" ..."),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.body,o=t.detail,i=t.like_count,s=t.dislike_count,c=t.liked,l=t.children,u=t._id,d=t.author_id,m=t.profile_pic,p=t.date,h=t.name,g=t.username,f=t.comment_count,b=t.title,v=t.linkToProfile,k=t.contentUrl,E=t.isVideo;function y(e){var t=e.children,n=e.noClass;return v?r.a.createElement(U.b,{className:n?"":a.link,to:"/profile/"+d},t):t}function w(e){var t=e.children;return o?t:r.a.createElement(U.b,{style:{textDecoration:"none",color:"inherit"},to:"/post/"+u},t)}return r.a.createElement("div",{className:a.post+" "+(o?a.divider:""),style:o?{margin:0,borderRadius:0}:null},l,r.a.createElement("div",{className:a.authorInfo},r.a.createElement(y,null,r.a.createElement("img",{className:a.image,src:m,alt:""})),r.a.createElement("div",{className:a.info},r.a.createElement(y,null,r.a.createElement(de.a,{style:{fontWeight:"400"},variant:"body1"},h)),r.a.createElement(de.a,{style:{fontWeight:"300"},variant:"body2"},r.a.createElement("span",{className:a.handle},r.a.createElement(y,{noClass:!0},"@"+g)),"  \xb7  ",p,"  \xb7  ",r.a.createElement(Pe.a,{fontSize:"small",className:a.icon}),"  ",f))),r.a.createElement(de.a,{className:a.title,variant:"h5"},o?b:r.a.createElement(U.b,{to:"/post/"+u,className:a.link},b)),k&&r.a.createElement(w,null,r.a.createElement("div",{className:a.embededWrapper},r.a.createElement(je,{isSmall:!o,contentUrl:k,isVideo:E}))),r.a.createElement(de.a,{paragraph:!0,style:{whiteSpace:"pre-wrap"}},this.body,!o&&n&&n.length>100&&r.a.createElement(U.b,{to:"/post/"+u,className:a.bodyLink},"Read more")),r.a.createElement(de.a,{style:{fontWeight:"300"},variant:"body2"},r.a.createElement(_.a,{onClick:function(){return e.props.likeHandler(!0)},style:{color:1===c&&"green"},className:a.iconButton,edge:"start"},r.a.createElement(Ie.a,null)),"  "+i,r.a.createElement("span",{className:a.spacer}),r.a.createElement(_.a,{onClick:function(){return e.props.likeHandler(!1)},style:{color:-1===c&&"red"},className:a.iconButton},r.a.createElement(Re.a,null)),"  "+s))}}]),a}(n.Component),ze=Ue(Object(N.a)((function(e){return{handle:{color:e.palette.primary.light,"& a":{color:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}}},image:{borderRadius:"50%",width:60,height:60,marginRight:e.spacing(2)},post:{padding:e.spacing(3),paddingBottom:e.spacing(1.5),backgroundColor:e.palette.background.front,borderRadius:16,marginTop:e.spacing(2),marginBottom:e.spacing(2)},divider:{borderBottom:e.palette.text.secondary},authorInfo:{display:"flex",alignItems:"center",fontSize:"0.9rem",marginBottom:e.spacing(1.5)},icon:{marginBottom:"-0.3em"},iconButton:{padding:8},title:{marginBottom:e.spacing(1)},spacer:{padding:e.spacing(1.5)},link:{color:"inherit",textDecoration:"none"},bodyLink:{marginLeft:"1em",color:"#216fdb",textDecoration:"none","&:hover":{textDecoration:"underline"}},embededWrapper:Object(E.a)({margin:e.spacing(2,0,2,0)},e.breakpoints.up("sm"),{backgroundColor:e.palette.background.mid,padding:e.spacing(2),borderRadius:16,marginTop:e.spacing(1)})}}))(Me),"/posts"),Le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).observer=new IntersectionObserver((function(t){t[0].isIntersecting&&(e.observer.unobserve(t[0].target),e.props.hasBeenSeen())})),e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){t&&e.observer.observe(t)}})}}]),a}(n.Component),Fe=a(45);function He(e){var t=function(t){Object(l.a)(n,t);var a=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={open:!1},e}return Object(c.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{open:this.state.open,onClose:function(){return t.setState({open:!1})}},r.a.createElement(we.a,null,"You need to be logged in to do that!"),r.a.createElement(ke.a,null,r.a.createElement(U.b,{to:"/register",style:{textDecoration:"none"}},r.a.createElement(j.a,{onClick:function(){return t.props.setAuthRedirectPath(t.props.location.pathname)},color:"primary"},"Register")),r.a.createElement(U.b,{to:"/login",style:{textDecoration:"none"}},r.a.createElement(j.a,{onClick:function(){return t.props.setAuthRedirectPath(t.props.location.pathname)},color:"primary",autoFocus:!0},"Login")))),r.a.createElement(e,Object.assign({},this.props,{token:this.props.token,userPic:this.props.userPic,onAuthFail:function(){return t.setState({open:!0})}})))}}]),n}(n.Component);return Object(ne.b)((function(e){return{token:e.auth.token,userPic:e.auth.currentUser.profile_pic}}),(function(e){return{setAuthRedirectPath:function(t){return e(Fe.d(t))}}}))(Object(d.g)(t))}var qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={posts:[],loading:!0,hasMore:!0,pageNumber:1},e.handleScroll=function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{pageNumber:e.pageNumber+1,loading:!0})})),e.makeRequest()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){this.props.url!==e.url&&(this.setState({posts:[],loading:!0,hasMore:!0,pageNumber:1}),this.makeRequest())}},{key:"makeRequest",value:function(){var e=this;Object(Ne.a)({method:"GET",url:this.props.url,headers:{Authorization:"Bearer "+this.props.token},params:{page:this.state.pageNumber}}).then((function(t){t&&e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{posts:[].concat(Object(ie.a)(e.posts),Object(ie.a)(t.data.posts)),loading:!1,hasMore:!!t.data.next})}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onAuthFail,o=t.postsAdded,i=t.linkToProfile,s=o?o.concat(this.state.posts):this.state.posts;return r.a.createElement(r.a.Fragment,null,s.map((function(t,a){return r.a.createElement(ze,{detail:!1,key:t._id,author_id:t.author._id,_id:t._id,onAuthFail:n,profile_pic:t.author.profile_pic,name:t.author.name,username:t.author.username,comment_count:t.comment_count,dislike_count:t.dislike_count,like_count:t.like_count,liked:t.liked,title:t.title,body:t.body,date:t.date_formatted,linkToProfile:i,contentUrl:t.contentUrl,isVideo:t.isVideo},s.length===a+1&&!e.state.loading&&e.state.hasMore&&r.a.createElement(Le,{hasBeenSeen:e.handleScroll}))})),this.state.loading&&r.a.createElement(g.a,{className:a.loading}))}}]),a}(n.Component),We=He(Object(N.a)((function(e){return{loading:{marginBottom:e.spacing(2)}}}))(qe)),Ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={postsAdded:[]},e.handlePostCreate=function(t){return Object(Ne.a)({method:"POST",url:"/posts",headers:{Authorization:"Bearer "+e.props.token},data:t}).then((function(t){t.data.author={_id:t.data.author,profile_pic:e.props.profile_pic,name:e.props.name,username:e.props.username},e.setState({postsAdded:[t.data].concat(Object(ie.a)(e.state.postsAdded))})})).catch((function(e){return Promise.reject(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,{onAuthFail:this.props.onAuthFail,postSubmitted:this.handlePostCreate,isAuthenticated:null!==this.props.token,profile_pic:this.props.profile_pic}),r.a.createElement(We,{postsAdded:this.state.postsAdded,url:"/posts",detail:!1,linkToProfile:!0}))}}]),a}(n.Component),Ge=Object(Ae.a)(Object(ne.b)((function(e){return{profile_pic:e.auth.currentUser.profile_pic,name:e.auth.currentUser.name,username:e.auth.currentUser.username}}))(He(Ve)),null,Ne.a),Xe=a(67),Qe=Object(y.a)((function(e){return{image:Object(E.a)({height:32,width:32,borderRadius:"50%",marginRight:e.spacing(1)},e.breakpoints.down(350),{marginTop:5,height:20,width:20,marginRight:e.spacing(.5)}),reply:{display:"flex",marginBottom:e.spacing(1)},replyButton:{textTransform:"capitalize",marginTop:e.spacing(.6),marginLeft:e.spacing(.6)},buttons:{display:"flex",justifyContent:"flex-end"}}}));function Ze(e){var t=e.onChange,a=e.value,n=e.replyClicked,o=e.textBoxClosed,i=e.userPic,s=e.disabled,c=e.error,l=e.handleAuthFail,u=Qe();return r.a.createElement("div",{className:u.reply},r.a.createElement("img",{className:u.image,src:i||Y.b,alt:""}),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(pe.a,{style:{fontSize:"1em"},error:c,disabled:s,maxLength:200,onChange:t,value:a,fullWidth:!0,placeholder:"Add reply...",multiline:!0}),r.a.createElement("div",{className:u.buttons},o&&r.a.createElement(j.a,{disabled:s,onClick:o,variant:"contained",disableElevation:!0,className:u.replyButton,size:"small"},"Cancel"),r.a.createElement(j.a,{disabled:s,onClick:l||n,variant:"contained",disableElevation:!0,color:"secondary",className:u.replyButton,size:"small"},"Reply"))))}var Ke=a(128),Ye=a.n(Ke),Je=a(127),$e=a.n(Je),et=Object(y.a)((function(e){return{showMore:{marginBottom:e.spacing(1),color:e.palette.primary.light,textDecoration:"none","&:hover":{textDecoration:"underline"},cursor:"pointer",fontSize:"0.9em"}}}));function tt(e){var t=e.forward,a=e.children,n=e.to,o=e.onClick,i=et();return r.a.createElement("div",{style:{marginBottom:8}},o?r.a.createElement("span",{className:i.showMore,onClick:o},a):r.a.createElement(U.b,{to:n,className:i.showMore,style:{display:"flex",alignItems:"center"}},!t&&r.a.createElement($e.a,{fontSize:"small"}),r.a.createElement("span",null,a),t&&r.a.createElement(Ye.a,{fontSize:"small"})))}var at=Object(y.a)((function(e){return{commentData:{display:"flex",alignItems:"flex-start",marginBottom:e.spacing(1.5)},image:Object(E.a)({marginTop:e.spacing(1),marginRight:e.spacing(1),height:32,width:32,borderRadius:"50%"},e.breakpoints.down(350),{height:20,width:20}),commentInfo:{"& p":{wordBreak:"break-word"}},username:{margin:"0 0 0.1em 0",fontSize:"0.9em",color:e.palette.text.secondary},rating:{color:e.palette.text.secondary,margin:0,fontSize:"0.8em",marginLeft:-e.spacing(1),marginTop:-e.spacing(.2)},link:{textDecoration:"none",color:"inherit","&:hover":{textDecoration:"underline"}}}}));function nt(e){var t=e.username,a=e.body,n=e.date,o=e.like_count,i=e.dislike_count,s=e.liked,c=e.likeHandler,l=e.onReplyClicked,u=e.author_id,d=e.profile_pic,m=e.disabled,p=at();function h(e){var t=e.style,a=e.children,n=e.className;return u?r.a.createElement(U.b,{to:"/profile/"+u,style:t,className:n},a):a}return r.a.createElement("div",{className:p.commentData,style:m&&{marginBottom:0}},r.a.createElement(h,{style:{display:"block",textDecoration:"none"}},r.a.createElement("img",{className:p.image,src:d,alt:""})),r.a.createElement("div",{className:p.commentInfo},r.a.createElement("p",{className:p.username},r.a.createElement(h,{className:p.link},"@"+t),"  \xb7  "+n),r.a.createElement("p",{style:{margin:0}},a),r.a.createElement("div",{className:p.rating},r.a.createElement(_.a,{disabled:m,size:"small",color:"inherit",onClick:function(){return c(!0)},style:{color:1===s&&"green"}},r.a.createElement(Ie.a,{fontSize:"small"})),o,r.a.createElement(_.a,{disabled:m,size:"small",color:"inherit",onClick:function(){return c(!1)},style:{color:-1===s&&"red"}},r.a.createElement(Re.a,{fontSize:"small"})),i,l&&r.a.createElement(j.a,{color:"secondary",size:"small",style:{textTransform:"capitalize"},onClick:l},"Reply"))))}var rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleLoadMore=function(){n.setState({loading:!0}),n.props.loadMore()},n.handleShowTextBox=function(){n.setState((function(e){return{showTextBox:!e.showTextBox}}))},n.openShowMore=function(){n.setState({show:!0})},n.closeShowMore=function(){n.setState({show:!1})},n.postNewComment=function(){""!==n.state.newComment&&(n.setState({loading:!0}),n.submitted=!0,n.props.postNewComment(n.state.newComment))},n.commentControl=function(e){n.setState({newComment:e.target.value,touched:!0})},n.state=n.props.handleData(n.props._id,"willMount"),n.state.loading=!1,n.state.touched=!1,n.submitted=!1,n}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a=this;return e.children!==this.props.children||this.props.classes!==e.classes||this.props.like_count!==e.like_count||this.props.dislike_count!==e.dislike_count||this.props.liked!==e.liked||Object.keys(this.state).reduce((function(e,n){return e||a.state[n]!==t[n]}),!1)}},{key:"componentDidUpdate",value:function(e){e.children!==this.props.children&&(this.submitted?(this.setState({touched:!1,showTextBox:!1,newComment:"",loading:!1}),this.submitted=!1):this.setState({loading:!1}))}},{key:"componentWillUnmount",value:function(){this.props.handleData(this.props._id,"willUnmount",this.state)}},{key:"render",value:function(){var e=this.props,t=e.profile_pic,a=e.likeHandler,n=e.like_count,o=e.dislike_count,i=e.liked,s=e.author_id,c=e.username,l=e.date,u=e.body,d=e.classes,m=e.loadMore,p=e.continueThread,h=this.props.children&&this.props.children.length>0?this.props.children:null;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(nt,{like_count:n,dislike_count:o,liked:i,likeHandler:a,profile_pic:t,author_id:s,username:c,body:u,date:l,onReplyClicked:this.handleShowTextBox}),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{onClick:this.state.show&&h?this.closeShowMore:null,className:d.spacer,style:this.state.show&&h?{cursor:"pointer"}:null},this.state.show&&h&&r.a.createElement("div",{className:d.verticalLine})),r.a.createElement("div",{style:{flexGrow:1}},this.state.showTextBox&&r.a.createElement(Ze,{handleAuthFail:this.props.token?null:this.props.onAuthFail,userPic:this.props.userPic,disabled:this.state.loading,value:this.state.newComment,error:this.state.touched&&""===this.state.newComment,onChange:this.commentControl,replyClicked:this.postNewComment,textBoxClosed:this.handleShowTextBox}),h&&!this.state.show&&r.a.createElement(tt,{onClick:this.openShowMore},"Show More"),this.state.show?h:null,p&&this.state.show&&r.a.createElement(tt,{to:p,forward:!0},"Continue Thread"),m&&this.state.show&&r.a.createElement(tt,{onClick:this.handleLoadMore},"Load More"),this.state.loading&&r.a.createElement(g.a,{className:d.loading}))))}}]),a}(n.Component),ot=Ue(Object(ae.a)((function(e){var t;return{spacer:(t={marginTop:-e.spacing(3.5),marginBottom:e.spacing(2),minWidth:32},Object(E.a)(t,e.breakpoints.down(350),{minWidth:20}),Object(E.a)(t,"&:hover",{"& div":{backgroundColor:e.palette.primary.main}}),t),verticalLine:{backgroundColor:e.palette.primary.light,height:"100%",margin:"0 auto",width:2},loading:{marginBottom:e.spacing(1)}}}))(rt),"/comments"),it=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).initialState={value:"",loading:!1,touched:!1},e.state=e.initialState,e.commentControl=function(t){e.setState({value:t.target.value,touched:!0})},e.postNewComment=function(){if(""!==e.state.value){if(e.props.handleAuthFail)return e.props.handleAuthFail();e.setState({loading:!0}),e.props.postNewComment(e.state.value)}},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){e.renderSwitch!==this.props.renderSwitch&&this.setState(this.initialState)}},{key:"render",value:function(){return r.a.createElement(Ze,{userPic:this.props.userPic,disabled:this.state.loading,value:this.state.value,error:this.state.touched&&""===this.state.value,onChange:this.commentControl,replyClicked:this.postNewComment})}}]),a}(n.Component),st=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).updateCommentTree=function(e){var t,a=n.comment_tree,r=Object(se.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.comment_ids_added[o._id]||(a[o.parent_id]?(a[o.parent_id].children.push(o),a[o.parent_id].children_count++):a[o.parent_id]={children:[o],children_count:1})}}catch(i){r.e(i)}finally{r.f()}},n.postNewComment=function(e,t,a){Object(Ne.a)({method:"POST",url:"/comments",headers:{Authorization:"Bearer "+n.props.token},data:{post_id:n.props.postId,parent_id:t,body:a,depth:e}}).then((function(e){n.comment_ids_added[e.data._id]=!0,n.comment_tree[t]?n.comment_tree[t].children.unshift(e.data):n.comment_tree[t]={children:[e.data]},n.setState((function(e){return{renderSwitch:!e.renderSwitch}}))})).catch((function(e){n.comment_tree[t]?n.comment_tree[t].children=Object(ie.a)(n.comment_tree[t].children):n.comment_tree[t]={children:[]},n.setState((function(e){return{renderSwitch:!e.renderSwitch}})),console.log(e)}))},n.mapComments=function(e){return e.map((function(e){var t=0;try{t=n.comment_tree[e._id].children_count||0}catch(c){}var a=n.comment_tree[e._id]?n.mapComments(n.comment_tree[e._id].children):null,o=e.depth!==n.startingDepth&&(e.depth-n.startingDepth)%n.props.maxDepth===0,i=t<e.num_children,s=i&&!o?(e.depth+1-n.startingDepth)%n.props.maxDepth:null;return r.a.createElement(ot,{key:e._id,like_count:e.like_count,dislike_count:e.dislike_count,liked:e.liked,profile_pic:e.author.profile_pic,author_id:e.author._id,username:e.author.username,onAuthFail:n.props.onAuthFail,date:e.date_formatted,postNewComment:n.postNewComment.bind(Object(Xe.a)(n),e.depth+1,e._id),_id:e._id,body:e.body,handleData:n.handleCommentData,continueThread:o&&i?"/post/".concat(n.props.postId,"/").concat(e._id):null,loadMore:s?function(){return n.props.handleLoadMore(e._id,t,s)}:null},a)}))},n.handleCommentData=function(e,t,a){switch(t){case"willMount":return n.commentsData[e]?n.commentsData[e]:{showTextBox:!1,show:!0,newComment:""};case"willUnmount":return n.commentsData[e]=a;default:return{showTextBox:!1,show:!0,newComment:""}}},n.initializeData(e.comments),e.comments&&n.updateCommentTree(e.comments),n.state={renderSwitch:!1},n}return Object(c.a)(a,[{key:"initializeData",value:function(e){this.commentsData={},this.comment_tree={},this.comment_ids_added={},this.startingDepth=e[0]?e[0].depth:0,this.root=e[0]?e[0].parent_id:this.props.postId}},{key:"shouldComponentUpdate",value:function(e){return e.rootId!==this.props.rootId?(this.initializeData(e.comments),this.updateCommentTree(e.comments),!0):e.comments===this.props.comments||(this.updateCommentTree(e.comments),!0)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.classes.commentWrapper},this.props.rootId===this.props.postId?r.a.createElement(it,{handleAuthFail:this.props.token?null:this.props.onAuthFail,userPic:this.props.userPic,renderSwitch:this.state.renderSwitch,postNewComment:this.postNewComment.bind(this,0,this.props.postId)}):r.a.createElement("div",{className:this.props.classes.spacer},r.a.createElement(tt,{to:"/post/"+this.props.postId},"Go back to main thread")),this.comment_tree[this.root]&&this.mapComments(this.comment_tree[this.root].children),this.root===this.props.postId&&this.comment_tree[this.root]&&this.comment_tree[this.root].children_count<this.props.post_num_children&&r.a.createElement(tt,{onClick:function(){return e.props.handleLoadMore(e.root,e.comment_tree[e.root].children_count,0)}},"Load More"))}}]),a}(n.Component),ct=Object(N.a)((function(e){return{commentWrapper:Object(E.a)({padding:e.spacing(3),backgroundColor:e.palette.background.mid},e.breakpoints.down(400),{padding:e.spacing(1.5)}),spacer:{marginBottom:e.spacing(2)}}}))(st),lt=a(230),ut=Object(y.a)((function(e){return{backDrop:{position:"absolute",backgroundColor:"rgba(68, 68, 68, 0.5)",zIndex:100,top:0,borderRadius:16,left:0,width:"100%",height:"100%",transition:"opacity 0.5s",opacity:1},hide:{opacity:0,pointerEvents:"none"},loadingCircle:{position:"fixed",left:"calc(50% - 20px)",top:"calc(50% - 20px)"}}}));function dt(e){var t=e.show,a=ut();return r.a.createElement("div",{className:a.backDrop+(t?"":a.hide)},t&&r.a.createElement(lt.a,{className:a.loadingCircle}))}var mt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={initialLoading:!0,loading:!1,post:{},comments:[],commentId:e.props.match.params.commentId},e.maxDepth=4,e.limit=5,e.handleLoadMore=function(t,a,n,r){e.getComments(t,a,n,r).then((function(t){e.setState({comments:t.data.comments})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.match.params.commentId!==this.props.match.params.commentId){this.setState({loading:!0});var a=this.props.match.params.commentId||this.props.match.params.postId;this.getComments(a,0,0,!!this.props.match.params.commentId).then((function(e){t.setState({comments:e.data.comments,commentId:t.props.match.params.commentId,loading:!1})})).catch((function(e){console.log(e)}))}}},{key:"componentDidMount",value:function(){var e=this,t=!this.props.match.params.commentId;Promise.all([Object(Ne.a)({method:"GET",url:"/posts/"+this.props.match.params.postId,headers:{Authorization:"Bearer "+this.props.token},params:{withComments:t,limit:this.limit,depth:this.maxDepth}}),t?null:this.getComments(this.props.match.params.commentId,0,0,!0)]).then((function(a){e.setState({initialLoading:!1,post:a[0].data.post,comments:a[t?0:1].data.comments})})).catch((function(e){console.log(e)}))}},{key:"getComments",value:function(e,t,a,n){return Object(Ne.a)({method:"GET",url:"comments/"+e,headers:{Authorization:"Bearer "+this.props.token},params:{startIndex:t,limit:this.limit,startDepth:a,withParent:n,depth:this.maxDepth}})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.post;return this.state.initialLoading?r.a.createElement(g.a,{className:e.loading}):r.a.createElement("div",{className:e.postDetail},r.a.createElement(dt,{show:this.state.loading}),r.a.createElement(ze,{_id:t._id,onAuthFail:this.props.onAuthFail,detail:!0,author_id:t.author._id,profile_pic:t.author.profile_pic,name:t.author.name,username:t.author.username,comment_count:t.comment_count,dislike_count:t.dislike_count,like_count:t.like_count,title:t.title,body:t.body,liked:t.liked,date:t.date_formatted,contentUrl:t.contentUrl,isVideo:t.isVideo,linkToProfile:!0}),r.a.createElement(ct,{rootId:this.state.commentId||t._id,userPic:this.props.userPic,token:this.props.token,onAuthFail:this.props.onAuthFail,post_num_children:t.num_children,postId:this.state.post._id,maxDepth:this.maxDepth,comments:this.state.comments,handleLoadMore:this.handleLoadMore}))}}]),a}(n.Component),pt=Object(Ae.a)(He(mt),(function(e){return{loading:{marginTop:e.spacing(2)},postDetail:{marginTop:e.spacing(2),marginBottom:e.spacing(2),borderRadius:16,overflow:"hidden",position:"relative"}}}),Ne.a),ht=Object(y.a)((function(e){return{profileTabs:{display:"flex",flexWrap:"wrap",width:"100%","& a":{flexGrow:1,textDecoration:"none",position:"relative"},"& button":{width:"100%",borderRadius:0},"& span":{color:"dark"===e.palette.type?"#cccccc":"#5d5d5d"}},underline:{position:"absolute",bottom:0,backgroundColor:e.palette.primary.main,height:2,width:"100%",transform:"scaleX(0)",transition:"all 150ms linear"},active:{"& div":{transform:"scaleX(1)"},"& span":{color:"dark"===e.palette.type?"white":"black"}}}}));function gt(e){var t=e.navLinks,a=ht();return r.a.createElement("div",{className:a.profileTabs},t.map((function(e){return r.a.createElement(U.c,{key:e.title,activeClassName:a.active,to:e.to,exact:!0},r.a.createElement(j.a,null,e.title),r.a.createElement("div",{className:a.underline}))})))}var ft=a(6),bt=a(129),vt=a.n(bt),kt=function(e){var t=function(t){Object(l.a)(n,t);var a=Object(u.a)(n);function n(e){var t;return Object(s.a)(this,n),(t=a.call(this,e)).submitFollow=function(){if(!t.props.token)return t.props.onAuthFail();t.setState((function(e){return{followed:!e.followed}})),Object(Ne.a)({method:"POST",url:"/users/"+t.props.userId,headers:{Authorization:"Bearer "+t.props.token}})},t.state={followed:e.followed||!1},t}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{displayFollowButton:this.props.userId!==this.props.currentUserId,followed:this.state.followed,submitFollow:this.submitFollow}))}}]),n}(n.Component);return Object(ne.b)((function(e){return{token:e.auth.token,currentUserId:e.auth.currentUser?e.auth.currentUser._id:null}}))(t)},Et=Object(y.a)((function(e){return Object(E.a)({userInfo:{display:"flex",alignItems:"flex-start",marginLeft:e.spacing(3),marginRight:e.spacing(3)},image:{position:"relative",top:-20,height:105,width:105,borderRadius:"50%",marginRight:e.spacing(1.5)},data:{"& p":{margin:"0.3em",color:e.palette.text.secondary}},settings:{alignSelf:"center",marginLeft:"auto"}},e.breakpoints.down("xs"),{userInfo:{flexDirection:"column",alignItems:"center",marginBottom:e.spacing(1)},settings:{margin:"auto"},data:{textAlign:"center"},image:{margin:0,marginBottom:e.spacing(1)}})}));var yt=He(kt((function(e){var t=e.userId,a=e.name,n=e.username,o=e.profile_pic,i=e.banner_pic,s=e.date_created,c=e.description,l=e.currentUserId,u=e.followed,d=e.submitFollow,m=Et();return r.a.createElement(r.a.Fragment,null,r.a.createElement(K.a,{backgroundUrl:i}),r.a.createElement("div",{className:m.userInfo},r.a.createElement("img",{className:m.image,src:o,alt:""}),r.a.createElement("div",{className:m.data},r.a.createElement("p",{style:{fontSize:"1.4em"}},a),r.a.createElement("p",null,"@"+n),r.a.createElement("p",{style:{marginBottom:"0.6em"}},"Joined "+Object(Y.e)(s)),r.a.createElement("p",{style:{marginBottom:"1em"}},c)),l===t?r.a.createElement(U.b,{className:m.settings,to:"/settings"},r.a.createElement(_.a,{"aria-label":"delete"},r.a.createElement(vt.a,null))):r.a.createElement(j.a,{className:m.settings,variant:"contained",color:u?"default":"primary",onClick:d},u?"Following":"Follow")))}))),wt=Object(y.a)((function(e){return{userCard:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(3),borderBottom:"1px solid "+("dark"===e.palette.type?"black":"#c5c5c5")},image:{height:60,width:60,borderRadius:"50%"},userDetail:{flexGrow:1,margin:"0 "+e.spacing(2)+"px"}}}));var Ot=kt((function(e){var t=e.divider,a=e.children,n=e.userId,o=e.profile_pic,i=e.name,s=e.username,c=e.description,l=e.followed,u=e.submitFollow,d=e.displayFollowButton,m=wt();return r.a.createElement("div",{className:m.userCard,style:t?null:{borderBottom:"none"}},a,r.a.createElement(U.b,{to:"/profile/"+n},r.a.createElement("img",{className:m.image,src:o,alt:""})),r.a.createElement("div",{className:m.userDetail},r.a.createElement(de.a,{style:{wordBreak:"break-word"},color:"textPrimary"},r.a.createElement(U.b,{style:{textDecoration:"none",color:"inherit"},to:"/profile/"+n},r.a.createElement("strong",null,i)," \xb7 @",s)),r.a.createElement(de.a,{style:{wordBreak:"break-word"},color:"textSecondary"},c)),d&&r.a.createElement(j.a,{variant:"contained",color:l?"default":"primary",onClick:u},l?"Following":"Follow"))})),jt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={users:[],loading:!0,hasMore:!0,pageNumber:1},e.handleScroll=function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{pageNumber:e.pageNumber+1,loading:!0})})),e.makeRequest()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){this.props.url!==e.url&&(this.setState({users:[],loading:!0,hasMore:!0,pageNumber:1}),this.makeRequest())}},{key:"makeRequest",value:function(){var e=this;Object(Ne.a)({method:"GET",url:this.props.url,headers:{Authorization:"Bearer ".concat(this.props.token)},params:{page:this.state.pageNumber}}).then((function(t){t&&e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{users:[].concat(Object(ie.a)(e.users),Object(ie.a)(t.data.users)),loading:!1,hasMore:!!t.data.next})}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onAuthFail;return r.a.createElement("div",{className:a.users},this.state.users.map((function(t,a){return r.a.createElement(Ot,{key:t._id,userId:t._id,divider:!(e.state.users.length===a+1),username:t.username,followed:t.followed,onAuthFail:n,name:t.name,profile_pic:t.profile_pic,description:t.description},e.state.users.length===a+1&&!e.state.loading&&e.state.hasMore&&r.a.createElement(Le,{hasBeenSeen:e.handleScroll}))})),this.state.loading&&r.a.createElement(g.a,null))}}]),a}(n.Component),_t=He(Object(N.a)((function(e){return{users:{backgroundColor:e.palette.background.front}}}))(jt)),Ct=Object(y.a)((function(e){return{handle:{color:e.palette.primary.light,textDecoration:"none","&:hover":{cursor:"pointer",textDecoration:"underline"}},image:{borderRadius:"50%",width:32,height:32,marginRight:e.spacing(2)},authorInfo:{display:"flex",alignItems:"center",fontSize:"0.9rem"},icon:{marginBottom:"-0.3em"},commentContainer:{marginTop:e.spacing(1),marginLeft:e.spacing(1),display:"flex",alignItems:"center"},spacer:{minWidth:16,height:50,display:"flex",alignItems:"center",textAlign:"left",borderLeft:"2px dashed "+e.palette.text.secondary},commentListing:{backgroundColor:e.palette.background.front,padding:20,borderBottom:"1px solid "+("dark"===e.palette.type?"black":"#c5c5c5")}}}));function xt(e){var t=e.post_id,a=e.comment_id,n=e.post_author_id,o=e.post_author_profile_pic,i=e.post_author_username,s=e.post_title,c=e.comment_count,l=e.post_date,u=e.username,d=e.body,m=e.date,p=e.like_count,h=e.dislike_count,g=e.liked,f=e.depth,b=e.profile_pic,v=e.children,k=Ct();function E(e){return r.a.createElement(U.b,{className:e.className||k.link,to:"/profile/"+n},e.children)}for(var y=[],w=0;w<(f>2?2:f);w++)y.push(r.a.createElement("div",{key:w,className:k.spacer}));return f>2&&y.unshift(r.a.createElement("div",{className:k.spacer,key:5,style:{borderLeft:"none"}},"\u205d")),r.a.createElement("div",{className:k.commentListing},v,r.a.createElement("div",{className:k.authorInfo},r.a.createElement(E,null,r.a.createElement("img",{className:k.image,src:o,alt:""})),r.a.createElement("div",{className:k.info},r.a.createElement(de.a,{style:{fontWeight:"300",marginTop:-7},variant:"body2"},r.a.createElement(E,{className:k.handle},"@"+i),"  \xb7  ",l,"  \xb7  ",r.a.createElement(Pe.a,{fontSize:"small",className:k.icon}),"  ",c))),r.a.createElement(de.a,{style:{fontWeight:"400"},variant:"h6"},r.a.createElement(U.b,{to:"/post/".concat(t),style:{textDecoration:"none",color:"inherit"}},s)),r.a.createElement("div",{className:k.commentContainer},y,r.a.createElement(U.b,{to:"/post/".concat(t,"/").concat(a),style:{textDecoration:"none",color:"inherit"}},r.a.createElement(nt,{username:u,disabled:!0,body:d,date:m,like_count:p,dislike_count:h,liked:g,profile_pic:b}))))}var St=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={comments:[],loading:!0,hasMore:!0,pageNumber:1},e.handleScroll=function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{pageNumber:e.pageNumber+1,loading:!0})})),e.makeRequest()},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){}},{key:"makeRequest",value:function(){var e=this;Object(Ne.a)({method:"GET",url:this.props.location.pathname.replace("profile","users"),headers:{Authorization:"Bearer "+this.props.token},params:{page:this.state.pageNumber}}).then((function(t){t&&e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{comments:[].concat(Object(ie.a)(e.comments),Object(ie.a)(t.data.comments)),loading:!1,hasMore:!!t.data.next})}))}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.username,n=t.userId,o=t.profile_pic;return r.a.createElement(r.a.Fragment,null,this.state.comments.map((function(t,i){return r.a.createElement(xt,{key:t._id,comment_id:t._id,post_id:t.post_id._id,post_author_id:t.post_id.author,post_author_profile_pic:t.post_id.profile_pic,post_author_username:t.post_id.username,post_title:t.post_id.title,comment_count:t.post_id.comment_count,post_date:t.post_id.date_formatted,body:t.body,date:t.date_formatted,like_count:t.like_count,dislike_count:t.dislike_count,liked:t.liked,depth:t.depth,username:a,author_id:n,profile_pic:o},e.state.comments.length===i+1&&!e.state.loading&&e.state.hasMore&&r.a.createElement(Le,{hasBeenSeen:e.handleScroll}))})),this.state.loading&&r.a.createElement(g.a,null))}}]),a}(n.Component),Nt=Object(ne.b)((function(e){return{token:e.auth.token}}))(Object(d.g)(St)),At=Object(y.a)((function(e){return{wrapper:{backgroundColor:e.palette.background.mid,borderRadius:10,overflow:"hidden",marginTop:e.spacing(2),marginBottom:e.spacing(2)}}}));function Dt(e){var t=e.children,a=At();return r.a.createElement("div",{className:a.wrapper},t)}var It=a(66),Tt=Object(y.a)((function(e){return{list:{borderRadius:10,overflow:"hidden",marginBottom:e.spacing(2)}}}));function Rt(e){var t=e.title,a=e.children,n=e.out,o=Tt();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:o.list},r.a.createElement(It.a,{variant:"h6"},t),!n&&a),n&&a)}var Bt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,_id:null,name:null,username:null,description:null,profile_pic:null,banner_pic:null,date_created:null,followed:null,follower_count:0,following_count:0},e.makeRequest=function(){Object(Ne.a)({method:"GET",url:"/users/"+e.props.match.params.id,headers:{Authorization:"Bearer "+e.props.token}}).then((function(t){t&&e.setState(Object(W.a)(Object(W.a)({},t.data.user),{},{loading:!1}))}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.makeRequest()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&(this.setState({loading:!0}),this.makeRequest())}},{key:"render",value:function(){var e=this,t=this.props.location,a=this.props.match.url,n=this.props.location.pathname.split("/"),o=Object(ft.a)(n[n.length-1]);return this.state.loading?r.a.createElement(g.a,{style:{marginTop:24}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,null,r.a.createElement(yt,{userId:this.state._id,followed:this.state.followed,name:this.state.name,username:this.state.username,profile_pic:this.state.profile_pic,banner_pic:this.state.banner_pic,date_created:this.state.date_created,description:this.state.description}),r.a.createElement(gt,{navLinks:[{title:"Posts",to:"posts"},{title:"Comments",to:"comments"},{title:this.state.follower_count+" Followers",to:"followers"},{title:this.state.following_count+" Following",to:"following"}]})),r.a.createElement(Rt,{title:o,out:this.props.location.pathname.includes("posts")},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"".concat(a,"/posts"),render:function(){return r.a.createElement(We,{url:t.pathname.replace("profile","users"),detail:!0})}}),r.a.createElement(d.b,{path:"".concat(a,"/comments"),render:function(){return r.a.createElement(Nt,{username:e.state.username,userId:e.state._id,profile_pic:e.state.profile_pic})}}),r.a.createElement(d.b,{path:"".concat(a,"/following"),render:function(){return r.a.createElement(_t,{url:t.pathname.replace("profile","users")})}}),r.a.createElement(d.b,{path:"".concat(a,"/followers"),render:function(){return r.a.createElement(_t,{url:t.pathname.replace("profile","users")})}}),r.a.createElement(d.a,{to:"".concat(a,"/posts")}))))}}]),a}(n.Component),Pt=Object(Ae.a)(Object(ne.b)((function(e){return{token:e.auth.token}}))(Bt),null,Ne.a),Ut=a(234),Mt=a(20),zt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).inputChangedHandler=function(e,t){var a=Object(E.a)({},e,Object(W.a)(Object(W.a)({},n.state.controls[e]),{},{value:t.target.value,touched:!0,error:Object(Y.d)(t.target.value,e)}));n.props.register&&("confirmPassword"===e&&(a[e].error=n.state.controls.password.value!==a[e].value&&n.state.controls.password.touched?"Passwords must match":null),"password"===e&&(a.confirmPassword=Object(W.a)(Object(W.a)({},n.state.controls.confirmPassword),{},{error:n.state.controls.confirmPassword.value!==a[e].value&&a[e].touched?"Passwords must match":null}))),n.setState({controls:Object(W.a)(Object(W.a)({},n.state.controls),a)})},n.submitHandler=function(){var e={};for(var t in n.state.controls)if(e[t]=n.state.controls[t].value,n.state.controls[t].error||!n.state.controls[t].touched)return;delete e.confirmPassword,n.props.onAuth(e,n.props.register)},n.state={controls:n.initializeState(e.register)},n}return Object(c.a)(a,[{key:"initializeState",value:function(e){var t={},a=[{name:"email",label:"E-mail",type:"email",max:200},{name:"username",label:"Username",type:"username",max:50},{name:"name",label:"Name",type:"name",max:50},{name:"password",label:"Password",type:"password",max:200},{name:"confirmPassword",label:"Confirm password",type:"password",max:200}];e||(a=[a[0],a[3]]);for(var n=0,r=a;n<r.length;n++){var o=r[n];t[o.name]={type:o.type,label:o.label,max:o.max,value:"",error:null,touched:!1}}return t}},{key:"shouldComponentUpdate",value:function(e,t){return e.register!==this.props.register&&(this.setState({controls:this.initializeState(e.register)}),this.props.errors.length>0&&this.props.clearErrors(),!this.props.register&&this.props.redirectMessage&&this.props.clearRedirectMessage()),this.props.register&&e.redirectMessage&&this.props.history.push("/login"),this.props!==e||this.state!==t}},{key:"componentWillUnmount",value:function(){this.props.clearAuthHelpers()}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.isAuthenticated?r.a.createElement(d.a,{to:this.props.authRedirectPath}):r.a.createElement("div",{className:t.login},r.a.createElement("div",{className:t.logoWrapper},r.a.createElement(P,null)),r.a.createElement(de.a,{className:t.header,variant:"h6"},this.props.register?"Create an Account":"Log In Plazon"),Object.keys(this.state.controls).map((function(a){var n=e.state.controls[a];return r.a.createElement(be.a,{disabled:e.props.loading,inputProps:{maxLength:n.max},key:a,value:n.value,error:!!n.error&&n.touched,helperText:n.touched&&n.error,onChange:e.inputChangedHandler.bind(e,a),fullWidth:!0,label:n.label,type:n.type,InputLabelProps:{shrink:!0},className:t.spaced})})),r.a.createElement(j.a,{disabled:this.props.loading,className:t.spaced,onClick:this.submitHandler,color:"primary",variant:"contained",fullWidth:!0},this.props.register?"Register":"Login"),this.props.errors.map((function(e){return r.a.createElement(Ut.a,{key:e.msg,className:t.spaced,severity:"error"},Object(ft.a)(e.msg))})),this.props.redirectMessage&&r.a.createElement(Ut.a,{className:t.spaced,severity:"info"},this.props.redirectMessage),this.props.loading&&r.a.createElement(g.a,{className:t.spaced}),!this.props.register&&r.a.createElement(U.b,{to:"/register",className:t.link},"Don't have an account? Register here"))}}]),a}(n.Component),Lt=Object(ne.b)((function(e){return{loading:e.auth.loading,errors:e.auth.errors,isAuthenticated:null!==e.auth.token,authRedirectPath:e.auth.authRedirectPath,redirectMessage:e.auth.redirectMessage}}),(function(e){return{onAuth:function(t,a){return e(Fe.a(t,a))},clearErrors:function(){return e({type:Mt.f})},clearRedirectMessage:function(){return e({type:Mt.g})},clearAuthHelpers:function(){return e({type:Mt.e})}}}))(Object(N.a)((function(e){return{login:{textAlign:"center",backgroundColor:e.palette.background.mid,padding:e.spacing(3),maxWidth:600,margin:e.spacing(2)+"px auto",borderRadius:10},link:{display:"inline-block",color:"#1395ff",cursor:"pointer",marginTop:e.spacing(1.5)},spaced:{marginTop:e.spacing(2)},header:{margin:e.spacing(2)},logoWrapper:{height:50,filter:"dark"===e.palette.type?"invert(100%)":""}}}))(zt)),Ft=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"componentDidUpdate",value:function(){this.props.history.goBack()}},{key:"render",value:function(){return r.a.createElement(g.a,{style:{marginTop:24}})}}]),a}(n.Component),Ht=Object(ne.b)(null,(function(e){return{logout:function(){return e(Fe.c())}}}))(Ft),qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props.match.url,a=this.props.location.pathname.split("/"),n=Object(ft.a)(a[a.length-1]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Dt,null,r.a.createElement(gt,{navLinks:[{title:"Users",to:"users"+this.props.location.search},{title:"Posts",to:"posts"+this.props.location.search}]})),r.a.createElement(Rt,{title:n,out:this.props.location.pathname.includes("posts")},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"".concat(t,"/users"),render:function(){return r.a.createElement(_t,{url:"/users"+e.props.location.search})}}),r.a.createElement(d.b,{path:"".concat(t,"/posts"),render:function(){return r.a.createElement(We,{url:"/posts"+e.props.location.search,detail:!0})}}),r.a.createElement(d.a,{to:"".concat(t,"/users")}))))}}]),a}(n.Component),Wt=Object(Ae.a)(qt,null,Ne.a),Vt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.classes.discover},r.a.createElement(Rt,{title:"Discover Users"},r.a.createElement(_t,{url:"/users"})))}}]),a}(n.Component),Gt=Object(Ae.a)(Vt,(function(e){return{discover:{marginTop:e.spacing(2)}}}),Ne.a),Xt=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,238))})),Qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).switchDarkMode=function(){n.setState((function(e){return{dark:!e.dark}}))},n.state={dark:!0},n.props.onTryAutoSignup(),n}return Object(c.a)(a,[{key:"render",value:function(){var e=Object(m.a)({palette:{type:"light",primary:{main:b.a[500]},secondary:{main:k.a[500]},background:{default:"#dfdfdf",back:"#dfdfdf",mid:"#efefef",front:"#f7f7f7"},text:{secondary:"#2e2e2e"}}}),t=Object(m.a)({palette:{type:"dark",primary:{main:b.a[500]},secondary:{main:k.a[500]},background:{default:"#424242",back:"#424242",mid:"#2d2d2d",front:"#232323"},text:{secondary:"#cccccc"}}});return r.a.createElement(p.a,{theme:this.state.dark?t:e},r.a.createElement(h.a,null),r.a.createElement(oe,{switchedDarkMode:this.switchDarkMode},r.a.createElement(n.Suspense,{fallback:r.a.createElement(g.a,{style:{marginTop:24}})},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/post/:postId/:commentId?",component:pt}),this.props.isAuthenticated&&r.a.createElement(d.b,{path:"/settings",component:Xt}),r.a.createElement(d.b,{path:"/login",render:function(e){return r.a.createElement(Lt,Object.assign({register:!1},e))}}),r.a.createElement(d.b,{path:"/register",render:function(e){return r.a.createElement(Lt,Object.assign({register:!0},e))}}),this.props.isAuthenticated&&r.a.createElement(d.b,{path:"/logout",component:Ht}),r.a.createElement(d.b,{path:"/search",component:Wt}),r.a.createElement(d.b,{path:"/discover",component:Gt}),r.a.createElement(d.b,{path:"/feed",component:Ge}),r.a.createElement(d.b,{path:"/profile/:id",component:Pt}),r.a.createElement(d.a,{to:"/feed"})))))}}]),a}(n.Component),Zt=Object(ne.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e(Fe.b())}}}))(Qt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kt=a(53),Yt=a(130),Jt={token:null,currentUser:{},errors:[],loading:!1,redirectMessage:null,authRedirectPath:"/"},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mt.c:return Object(Y.f)(e,{error:null,loading:!0});case Mt.d:return Object(Y.f)(e,{token:t.token,currentUser:t.currentUser,error:null,loading:!1});case Mt.h:return Object(Y.f)(e,{redirectMessage:t.redirectMessage,loading:!1});case Mt.a:return Object(Y.f)(e,{errors:t.errors,loading:!1});case Mt.b:return Object(Y.f)(e,{token:null,currentUser:{}});case Mt.e:return Object(Y.f)(e,{errors:[],redirectMessage:null,authRedirectPath:"/"});case Mt.f:return Object(Y.f)(e,{errors:[]});case Mt.g:return Object(Y.f)(e,{redirectMessage:null});case Mt.j:return Object(W.a)(Object(W.a)({},e),{},{currentUser:Object(Y.f)(e.currentUser,{profile_pic:t.profile_pic,banner_pic:t.banner_pic})});case Mt.i:return Object(Y.f)(e,{authRedirectPath:t.path});default:return e}},ea=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Kt.d,ta=Object(Kt.c)({auth:$t}),aa=Object(Kt.e)(ta,ea(Object(Kt.a)(Yt.a))),na=r.a.createElement(ne.a,{store:aa},r.a.createElement(U.a,null,r.a.createElement(Zt,null)));i.a.render(na,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,a){"use strict";var n=a(126),r=a.n(n).a.create({baseURL:"/api",timeout:15e3});t.a=r},20:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"i",(function(){return m}));var n="AUTH_START",r="AUTH_SUCCESS",o="REGISTER_SUCCESS",i="AUTH_FAIL",s="AUTH_LOGOUT",c="CLEAR_ERRORS",l="CLEAR_AUTH_HELPERS",u="CLEAR_REDIRECT_MESSAGE",d="UPDATE_PICTURES",m="SET_AUTH_REDIRECT_PATH"},23:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return l}));var n=a(11),r="/images/default-banner.png",o="/images/default-profile-picture.jpg",i=function(e){return new Date(e.trim()).toDateString().replace(/^\S+\s/,"").replace(/ (?=\d{4})/,", ")},s=function(e,t){var a={};for(var r in t)void 0!==t[r]&&(a[r]=t[r]);return Object(n.a)(Object(n.a)({},e),a)},c=function(e,t){if(""===e)return"Required";switch(t){case"email":return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(e)?null:"Invalid e-mail";case"username":return e.match(/[^a-zA-z0-9]/g)?"Alpha-numeric characters only":null;case"name":return e.match(/[ ]{2}|[^a-zA-z0-9 ]/g)?"Alpha-numeric characters or single spaces only":null;default:return null}},l=[{regex:/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,embedUrl:"https://www.youtube.com/embed/"},{regex:/^(?:https?:\/\/)?(?:www\.|player\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,embedUrl:"https://player.vimeo.com/video/"}]},40:function(e,t,a){"use strict";var n=a(7),r=a(8),o=a(10),i=a(9),s=a(11),c=a(0),l=a.n(c),u=a(4),d=a(222),m=a(224),p=a(225),h=a(95),g=a(66),f=Object(h.a)((function(e){return{errorPage:{borderRadius:16,overflow:"hidden",marginBottom:e.spacing(3),marginTop:e.spacing(3)}}}));function b(){var e=f();return l.a.createElement("div",{className:e.errorPage},l.a.createElement(g.a,{variant:"h5"},"404 Not found"))}t.a=function(e,t,a){var h=function(t){Object(o.a)(c,t);var s=Object(i.a)(c);function c(e){var t;return Object(n.a)(this,c),(t=s.call(this,e)).errorConfirmedHandler=function(){t.setState({errMsg:null})},t.state={errMsg:null},t.reqInterceptor=a.interceptors.request.use((function(e){return t.setState({errMsg:null}),e})),t.resInterceptor=a.interceptors.response.use((function(e){return e}),(function(e){try{t.setState({errMsg:e.response.data.errors[0].msg})}catch(a){t.setState({errMsg:e.message})}return Promise.reject(e)})),t}return Object(r.a)(c,[{key:"componentWillUnmount",value:function(){a.interceptors.request.eject(this.reqInterceptor),a.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){return"DOCUMENT_NOT_FOUND"===this.state.errMsg?l.a.createElement(b,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{open:!!this.state.errMsg,onClose:this.errorConfirmedHandler},l.a.createElement(m.a,null,l.a.createElement(p.a,null,this.state.errMsg))),l.a.createElement(e,this.props))}}]),c}(c.Component);return Object(u.a)((function(e){var a=t?t(e):{};return Object(s.a)({paper:{position:"absolute",top:"30%",left:"calc(50% - 200px)",width:400,wordWrap:"break-word",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}},a)}))(h)}},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return m})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return p}));var n=a(11),r=a(18),o=a(20),i=["_id","name","username","profile_pic","banner_pic"],s=function(e,t){return{type:o.d,token:e,currentUser:Object(n.a)(Object(n.a)({},t),{},{profile_pic:t.profile_pic,banner_pic:t.banner_pic})}},c=function(e,t){return{type:o.j,profile_pic:e,banner_pic:t}},l=function(){return[].concat(i,["token","expirationDate"]).forEach((function(e){localStorage.removeItem(e)})),{type:o.b}},u=function(e){return function(t){setTimeout((function(){t(l())}),1e3*e)}},d=function(e,t){return function(a){a({type:o.c});var n="/"+(t?"register":"login");r.a.post(n,e).then((function(e){if(t)return a({type:o.h,redirectMessage:"Account successfully registered!"});a(s(e.data.token,e.data.user));var n=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("expirationDate",n),localStorage.setItem("token",e.data.token),i.forEach((function(t){localStorage.setItem(t,e.data.user[t])})),a(u(e.data.expiresIn))})).catch((function(e){var t;a((t=e.response.data.errors,{type:o.a,errors:t}))}))}},m=function(){return function(e){var t={};i.forEach((function(a){if(t[a]=localStorage.getItem(a),!t[a])return e(l())}));var a=localStorage.getItem("token"),n=new Date(localStorage.getItem("expirationDate"));!a||!n||n<=new Date?e(l()):(e(s(a,t)),e(u((n.getTime()-(new Date).getTime())/1e3)))}},p=function(e){return{type:o.i,path:e}}},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),o=a(95),i=Object(o.a)((function(e){return{coverPhoto:{width:"100%",paddingBottom:"33.33333%",backgroundSize:"cover",position:"relative"},content:{position:"absolute",top:0,bottom:0,right:0,left:0,display:"flex",justifyContent:"center",alignItems:"center"}}}));function s(e){var t=i();return r.a.createElement("div",{className:t.coverPhoto,style:{backgroundImage:'url("'+e.backgroundUrl+'")'}},e.children?r.a.createElement("div",{className:t.content},e.children):null)}},66:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a.n(n),o=a(95),i=a(83),s=Object(o.a)((function(e){return{heading:{backgroundColor:e.palette.background.mid,padding:e.spacing(2)+"px "+e.spacing(3)+"px"}}}));function c(e){var t=s();return r.a.createElement("div",{className:t.heading},r.a.createElement(i.a,{style:{margin:0,fontWeight:"lighter"},variant:e.variant},e.children))}}},[[149,1,2]]]);
//# sourceMappingURL=main.a2a880a8.chunk.js.map